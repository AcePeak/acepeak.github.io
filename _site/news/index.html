<!DOCTYPE HTML>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <title>博文</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="generator" content="Jekyll v2.5.2">
  <link rel="alternate" type="application/rss+xml" title="Jekyll • Simple, blog-aware, static sites - Feed" href="/feed.xml">
  <link rel="alternate" type="application/atom+xml" title="Recent commits to Jekyll’s master branch" href="https://github.com/AcePeak/commits/master.atom">
  <link rel="stylesheet" href="/css/screen.css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <!--[if lt IE 9]>
  <script src="/js/html5shiv.min.js"></script>
  <script src="/js/respond.min.js"></script>
  <![endif]-->
  
  <meta name="ujianVerification" content="4c8bde8abe6463ba2291aff7c1688d53" />
  
  <script src="/js/jquery-1.11.1.min.js" type="text/javascript" charset="utf-8"></script>
  <script type="text/javascript">
    var jq = jQuery.noConflict();
  </script>
</head>


<body class="wrap">
  <header>
  <nav class="mobile-nav show-on-mobiles">
    <ul>
  <li class="">
    <a href="/">首页</a>
  </li>
  <li class="">
    <a href="/docs/home/">专题</span></a>
  </li>
  <li class="current">
    <a href="/news/">博文</a>
  </li>
  <li>
    <a href="https://github.com/AcePeak">源码<span class="hide-on-mobiles">@GitHub</span></a>
  </li>
</ul>

  </nav>
  <div class="grid">
    <nav class="main-nav unit hide-on-mobiles">
      <ul>
  <li class="">
    <a href="/">首页</a>
  </li>
  <li class="">
    <a href="/docs/home/">专题</span></a>
  </li>
  <li class="current">
    <a href="/news/">博文</a>
  </li>
  <li>
    <a href="https://github.com/AcePeak">源码<span class="hide-on-mobiles">@GitHub</span></a>
  </li>
</ul>

    </nav>
  </div>
</header>


    <section class="news">
    <div class="grid">

      <div class="docs-nav-mobile unit whole show-on-mobiles">
  <select onchange="if (this.value) window.location.href=this.value">
    <option value="">浏览博文…</option>
    <option value="/news/">所有博文</option>
    <optgroup label="v1.x">
      
      <option value="/news/2015/01/07/Jekyll-Date/">GithubPages+Jekyll模板中各类型对象的方法介绍</option>
      
      <option value="/news/2015/01/02/Advertise-Mobile-Platform-Market/">2014年移动广告平台界投融资整理</option>
      
      <option value="/news/2014/12/28/Advertise-glossary/">广告平台术语</option>
      
      <option value="/news/2014/12/23/PubNative-Publish/">PubNative发布世界上首个满足专业需求的“原生广告适配器”</option>
      
      <option value="/news/2014/12/17/Mac+GithubPages+Jekyll-site/">Mac+GithubPages+Jekyll配置个人网站</option>
      
      <option value="/news/2009/03/15/Productivity-And-Production-Relations/">生产力VS生产关系</option>
      
      <option value="/news/2009/03/13/Joke-Music-Strings/">这把伞是你的吗？</option>
      
      <option value="/news/2009/03/13/Joke-Is-This-Your-Umbrella/">这把伞是你的吗？</option>
      
      <option value="/news/2009/02/27/About-Career/">好文分享－不错的短文《所谓职业》</option>
      
      <option value="/news/2009/02/19/Joke-Maybe-Cow-Sick/">可能会有口蹄疫</option>
      
      <option value="/news/2009/02/17/Joke-No-Matters-Neither-Him/">没事，他也没有</option>
      
      <option value="/news/2009/02/14/Houseman-Lovers-Day/">情人节的绝活亮相！</option>
      
      <option value="/news/2009/02/08/Introducing-WM-Softwares/">推荐的WM手机软件</option>
      
      <option value="/news/2009/02/02/Letter-To-Losing-Boy/">回复失恋男的来信</option>
      
      <option value="/news/2009/01/18/Yesterday-Today-Tomorrow/">Feedback for <The Sixth Sense>/《第六感》影评</option>
      
      <option value="/news/2009/01/12/2008-Hot-Words/">08年流行语文</option>
      
      <option value="/news/2009/01/10/Life-tricks/">你一定能用上的生活小绝招～</option>
      
      <option value="/news/2009/01/03/Movie-Feedback-The-Sixth-Sense/">Feedback for <The Sixth Sense>/《第六感》影评</option>
      
      <option value="/news/2009/01/01/Joke-Japanese-Cannot-Find/">日本鬼子来了也找不到！</option>
      
      <option value="/news/2008/12/28/About-Destiny/">关于投资的谈话</option>
      
      <option value="/news/2008/12/21/About-Investment/">关于投资的谈话</option>
      
      <option value="/news/2006/05/19/CPP-Test-English/">C++ STL 习题</option>
      
      <option value="/news/2006/05/17/Template-Test-English/">C++ Template 习题</option>
      
      <option value="/news/2006/05/10/ActiveX-Safety/">剖析ActiveX控件安全问题</option>
      
      <option value="/news/2006/04/30/Universe-Think/">西山居士的宇宙模型遐想</option>
      
      <option value="/news/2005/12/20/Translation-Dialog-Change-Name/">【翻译】 对话：换个名字</option>
      
      <option value="/news/2005/11/28/Translation-Dialog-Touching-Pointers/">【翻译】 对话：接触指针</option>
      
      <option value="/news/2005/11/19/Translation-Dialog-Portable-Design/">【翻译】 对话：究竟谁才是可移植的程序员？</option>
      
    </optgroup>
  </select>
</div>


      <div class="unit four-fifths">
        
  <article>
  <h2>
    <a href="/news/2015/01/07/Jekyll-Date/">
      GithubPages+Jekyll模板中各类型对象的方法介绍
    </a>
  </h2>
  <span class="post-category">
    <span class="label">
      internet
    </span>
  </span>
  <div class="post-meta">
    <span class="post-date">
      07 Jan 2015
    </span>
    <a href="https://github.com/AcePeak" class="post-author">
      <img src="https://github.com/AcePeak.png" class="avatar" alt="AcePeak" width="24" height="24">
      AcePeak
    </a>
  </div>
  <div class="post-content">
    <p>Jekyll 使用Liquid来处理模板数据。在建立中文博客的过程中，常常会苦于无法在文章中显示中文或阿拉伯数字形式日期的问题，而网上绝大多数给出的方案都只是官方的文档给出的 07 Jan 2015。为了能够了解Jekyll模板中不同对象究竟有哪些可以使用的方法，写下此文。</p>

<p>在Liquid中，以上面的语句为例，page为object对象，page.date为attribute属性，后面的date_to_string叫做filter过滤器。请参考Liquid官网<a href="http://docs.shopify.com/themes/liquid-documentation/objects">关于Objects的介绍</a>。而在Jekyll中page被叫做Global Variables全局变量，而每个全局变量拥有的多个属性被称为子变量，如Site全局变量的子变量为Site Variables。 请参考官网的<a href="http://jekyllrb.com/docs/variables/">变量介绍一页</a>。</p>

<p>不同的属性拥有不同的类型，有的属于数组，有的属于字符，有的属于日期时间等等，下面分别介绍不同类型属性的过滤器：</p>

<h1 id="section">数组过滤器</h1>

<p>主要包括以下对象：</p>

<blockquote>
  <ul>
    <li>site.pages</li>
    <li>site.posts</li>
    <li>site.related_posts</li>
    <li>site.static_files</li>
    <li>site.html_pages</li>
    <li>site.collections</li>
    <li>site.data</li>
    <li>site.documents</li>
    <li>site.categories</li>
    <li>site.categories.CATEGORY</li>
    <li>site.tags</li>
    <li>site.tags.TAG</li>
    <li>site.[CONFIGURATION_DATA]</li>
    <li>page.categories</li>
    <li>page.tags</li>
    <li>paginator.posts</li>
  </ul>
</blockquote>

<h3 id="join">join</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">product</span><span class="o">.</span><span class="n">tags</span> <span class="o">|</span> <span class="ss">join</span><span class="p">:</span> <span class="s1">&#39;, &#39;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">tag1</span><span class="p">,</span> <span class="n">tag2</span><span class="p">,</span> <span class="n">tag3</span></code></pre></div>

<h3 id="first">first</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="n">product</span><span class="o">.</span><span class="n">tags</span> <span class="o">=</span> <span class="s2">&quot;sale&quot;</span><span class="p">,</span> <span class="s2">&quot;mens&quot;</span><span class="p">,</span> <span class="s2">&quot;womens&quot;</span><span class="p">,</span> <span class="s2">&quot;awesome&quot;</span> <span class="o">--&gt;</span>
<span class="p">{{</span> <span class="n">product</span><span class="o">.</span><span class="n">tags</span> <span class="o">|</span> <span class="n">first</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">sale</span></code></pre></div>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">product</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">first</span> <span class="o">==</span> <span class="s2">&quot;sale&quot;</span> <span class="sx">%}</span>
<span class="sx">    This product is on sale!</span>
<span class="sx">{% endif %}</span></code></pre></div>

<h3 id="last">last</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="n">product</span><span class="o">.</span><span class="n">tags</span> <span class="o">=</span> <span class="s2">&quot;sale&quot;</span><span class="p">,</span> <span class="s2">&quot;mens&quot;</span><span class="p">,</span> <span class="s2">&quot;womens&quot;</span><span class="p">,</span> <span class="s2">&quot;awesome&quot;</span> <span class="o">--&gt;</span>
<span class="p">{{</span> <span class="n">product</span><span class="o">.</span><span class="n">tags</span> <span class="o">|</span> <span class="n">last</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">awesome</span></code></pre></div>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">product</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">last</span> <span class="o">==</span> <span class="s2">&quot;sale&quot;</span> <span class="sx">%}</span>
<span class="sx">    This product is on sale!</span>
<span class="sx">{% endif %}</span></code></pre></div>

<h3 id="map">map</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="n">collection</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Spring&quot;</span><span class="p">,</span> <span class="s2">&quot;Summer&quot;</span><span class="p">,</span> <span class="s2">&quot;Fall&quot;</span><span class="p">,</span> <span class="s2">&quot;Winter&quot;</span> <span class="o">--&gt;</span>
<span class="p">{</span><span class="o">%</span> <span class="n">assign</span> <span class="n">collection_titles</span> <span class="o">=</span> <span class="n">collections</span> <span class="o">|</span> <span class="ss">map</span><span class="p">:</span> <span class="s1">&#39;title&#39;</span> <span class="sx">%}</span>
<span class="sx">{{ collection_titles }</span><span class="p">}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">SpringSummerFallWinter</span></code></pre></div>

<h3 id="size">size</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="s1">&#39;is this a 30 character string?&#39;</span> <span class="o">|</span> <span class="n">size</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="mi">30</span></code></pre></div>

<h3 id="sort">sort</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="n">products</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span> <span class="o">--&gt;</span>
<span class="p">{</span><span class="o">%</span> <span class="n">assign</span> <span class="n">products</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">products</span> <span class="o">|</span> <span class="ss">sort</span><span class="p">:</span> <span class="s1">&#39;title&#39;</span> <span class="sx">%}</span>
<span class="sx">{% for product in products %}</span>
   <span class="p">{{</span> <span class="n">product</span><span class="o">.</span><span class="n">title</span> <span class="p">}}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endfor</span> <span class="o">%</span><span class="p">}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">A</span> <span class="n">B</span> <span class="n">a</span> <span class="n">b</span></code></pre></div>

<h1 id="html">HTML标签过滤器</h1>

<h3 id="imgtag">img_tag</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="s1">&#39;smirking_gnome.gif&#39;</span> <span class="o">|</span> <span class="n">asset_url</span> <span class="o">|</span> <span class="ss">img_tag</span><span class="p">:</span> <span class="s1">&#39;Smirking Gnome&#39;</span><span class="p">,</span> <span class="s1">&#39;cssclass1 cssclass2&#39;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;//cdn.shopify.com/s/files/1/0147/8382/t/15/assets/smirking_gnome.gif?v=1384022871&quot;</span> <span class="n">alt</span><span class="o">=</span><span class="s2">&quot;Smirking Gnome&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;cssclass1 cssclass2&quot;</span> <span class="sr">/&gt;</span></code></pre></div>

<h3 id="scripttag">script_tag</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="s1">&#39;shop.js&#39;</span> <span class="o">|</span> <span class="n">asset_url</span> <span class="o">|</span> <span class="n">script_tag</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;</span><span class="n">script</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;//cdn.shopify.com/s/files/1/0087/0462/t/394/assets/shop.js?28178&quot;</span> <span class="n">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;&lt;</span><span class="sr">/script&gt;</span></code></pre></div>

<h3 id="stylesheettag">stylesheet_tag</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="s1">&#39;shop.css&#39;</span> <span class="o">|</span> <span class="n">asset_url</span> <span class="o">|</span> <span class="n">stylesheet_tag</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;</span><span class="n">link</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;//cdn.shopify.com/s/files/1/0087/0462/t/394/assets/shop.css?28178&quot;</span> <span class="n">rel</span><span class="o">=</span><span class="s2">&quot;stylesheet&quot;</span> <span class="n">type</span><span class="o">=</span><span class="s2">&quot;text/css&quot;</span> <span class="n">media</span><span class="o">=</span><span class="s2">&quot;all&quot;</span> <span class="sr">/&gt;</span></code></pre></div>

<h1 id="section-1">数学函数过滤器</h1>

<blockquote>
  <p>主要包括以下对象：
* paginator.per_page
* paginator.total_posts
* paginator.total_pages
* paginator.page
* paginator.previous_page
* paginator.previous_page_path
* paginator.next_page
* paginator.next_page_path</p>
</blockquote>

<h3 id="ceil">ceil</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="mi">4</span><span class="o">.</span><span class="mi">6</span> <span class="o">|</span> <span class="n">ceil</span> <span class="p">}}</span> 
<span class="p">{{</span> <span class="mi">4</span><span class="o">.</span><span class="mi">3</span> <span class="o">|</span> <span class="n">ceil</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="mi">5</span>
<span class="mi">5</span></code></pre></div>

<h3 id="dividedby">divided_by</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="n">product</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="mi">200</span> <span class="o">--&gt;</span>
<span class="p">{{</span> <span class="n">product</span><span class="o">.</span><span class="n">price</span> <span class="o">|</span> <span class="ss">divided_by</span><span class="p">:</span> <span class="mi">10</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="mi">20</span></code></pre></div>

<h3 id="floor">floor</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="mi">4</span><span class="o">.</span><span class="mi">6</span> <span class="o">|</span> <span class="n">floor</span> <span class="p">}}</span>
<span class="p">{{</span> <span class="mi">4</span><span class="o">.</span><span class="mi">3</span> <span class="o">|</span> <span class="n">floor</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="mi">4</span>
<span class="mi">4</span></code></pre></div>

<h3 id="minus">minus</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="n">product</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="mi">200</span> <span class="o">--&gt;</span>
<span class="p">{{</span> <span class="n">product</span><span class="o">.</span><span class="n">price</span> <span class="o">|</span> <span class="ss">minus</span><span class="p">:</span> <span class="mi">15</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="mi">185</span></code></pre></div>

<h3 id="plus">plus</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="n">product</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="mi">200</span> <span class="o">--&gt;</span>
<span class="p">{{</span> <span class="n">product</span><span class="o">.</span><span class="n">price</span> <span class="o">|</span> <span class="ss">plus</span><span class="p">:</span> <span class="mi">15</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="mi">215</span></code></pre></div>

<h3 id="round">round</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="mi">4</span><span class="o">.</span><span class="mi">6</span> <span class="o">|</span> <span class="n">round</span> <span class="p">}}</span>
<span class="p">{{</span> <span class="mi">4</span><span class="o">.</span><span class="mi">3</span> <span class="o">|</span> <span class="n">round</span> <span class="p">}}</span>
<span class="p">{{</span> <span class="mi">4</span><span class="o">.</span><span class="mi">5612</span> <span class="o">|</span> <span class="ss">round</span><span class="p">:</span> <span class="mi">2</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="mi">5</span>
<span class="mi">4</span>
<span class="mi">4</span><span class="o">.</span><span class="mi">56</span></code></pre></div>

<h3 id="times">times</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="n">product</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="mi">200</span> <span class="o">--&gt;</span>
<span class="p">{{</span> <span class="n">product</span><span class="o">.</span><span class="n">price</span> <span class="o">|</span> <span class="ss">times</span><span class="p">:</span> <span class="mi">1</span><span class="o">.</span><span class="mi">15</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="mi">230</span></code></pre></div>

<h3 id="modulo">modulo</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="mi">12</span> <span class="o">|</span> <span class="ss">modulo</span><span class="p">:</span><span class="mi">5</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="mi">2</span></code></pre></div>

<h1 id="section-2">货币函数过滤器</h1>

<h3 id="money">money</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="mi">145</span> <span class="o">|</span> <span class="n">money</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="k">if</span> <span class="s2">&quot;HTML without currency&quot;</span> <span class="n">is</span> <span class="err">$</span><span class="p">{{</span> <span class="n">amount</span> <span class="p">}}</span> <span class="o">--&gt;</span>
<span class="vg">$1</span><span class="o">.</span><span class="mi">45</span>
<span class="o">&lt;!--</span> <span class="k">if</span> <span class="s2">&quot;HTML without currency&quot;</span> <span class="n">is</span> <span class="err">€</span><span class="p">{{</span> <span class="n">amount_no_decimals</span> <span class="p">}}</span> <span class="o">--&gt;</span>
<span class="err">€</span><span class="mi">1</span></code></pre></div>

<h3 id="moneywithcurrency">money_with_currency</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="mi">1</span><span class="o">.</span><span class="mi">45</span> <span class="o">|</span> <span class="n">money_with_currency</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="k">if</span> <span class="s2">&quot;HTML with currency&quot;</span> <span class="n">is</span> <span class="err">$</span><span class="p">{{</span> <span class="n">amount</span> <span class="p">}}</span> <span class="no">CAD</span> <span class="o">--&gt;</span>
<span class="vg">$1</span><span class="o">.</span><span class="mi">45</span> <span class="no">CAD</span></code></pre></div>

<h3 id="moneywithoutcurrency">money_without_currency</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="mi">145</span> <span class="o">|</span> <span class="n">money_without_currency</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="mi">1</span><span class="o">.</span><span class="mi">45</span></code></pre></div>

<h1 id="section-3">字符串过滤器</h1>

<blockquote>
  <p>主要包括以下对象：
* page.content
* page.title
* page.excerpt
* page.url
* page.id
* page.path</p>
</blockquote>

<h3 id="append">append</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="s1">&#39;sales&#39;</span> <span class="o">|</span> <span class="ss">append</span><span class="p">:</span> <span class="s1">&#39;.jpg&#39;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">sales</span><span class="o">.</span><span class="n">jpg</span></code></pre></div>

<h3 id="camelcase">camelcase</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="s1">&#39;coming-soon&#39;</span> <span class="o">|</span> <span class="n">camelcase</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">ComingSoon</span></code></pre></div>

<h3 id="capitalize">capitalize</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="s1">&#39;capitalize me&#39;</span> <span class="o">|</span> <span class="n">capitalize</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Capitalize</span> <span class="n">me</span></code></pre></div>

<h3 id="downcase">downcase</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="s1">&#39;UPPERCASE&#39;</span> <span class="o">|</span> <span class="n">downcase</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">uppercase</span></code></pre></div>

<h3 id="escape">escape</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="s2">&quot;&lt;p&gt;test&lt;/p&gt;&quot;</span> <span class="o">|</span> <span class="n">escape</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="no">The</span> <span class="o">&lt;</span><span class="nb">p</span><span class="o">&gt;</span> <span class="n">tags</span> <span class="n">are</span> <span class="ow">not</span> <span class="n">rendered</span> <span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nb">p</span><span class="o">&gt;</span><span class="nb">test</span><span class="o">&lt;</span><span class="sr">/p&gt;</span></code></pre></div>

<h3 id="handlehandleize">handle/handleize</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="s1">&#39;100% M &amp; Ms!!!&#39;</span> <span class="o">|</span> <span class="n">handleize</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="mi">100</span><span class="o">-</span><span class="n">m</span><span class="o">-</span><span class="n">ms</span></code></pre></div>

<h3 id="md5">md5</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;http://www.gravatar.com/avatar/{{ comment.email | remove: &#39; &#39; | strip_newlines | downcase | md5 }}&quot;</span> <span class="sr">/&gt;</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;http://www.gravatar.com/avatar/2a95ab7c950db9693c2ceb767784c201&quot;</span> <span class="sr">/&gt;</span></code></pre></div>

<h3 id="newlinetobr">newline_to_br</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{</span><span class="o">%</span> <span class="n">capture</span> <span class="n">var</span> <span class="sx">%}</span>
<span class="sx">One </span>
<span class="sx">Two</span>
<span class="sx">Three</span>
<span class="sx">{% endcapture %}</span>
<span class="p">{{</span> <span class="n">var</span> <span class="o">|</span> <span class="n">newline_to_br</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">One</span> <span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span>
<span class="no">Two</span><span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span>
<span class="no">Three</span><span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span></code></pre></div>

<h3 id="pluralize">pluralize</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">cart</span><span class="o">.</span><span class="n">item_count</span> <span class="p">}}</span>
<span class="p">{{</span> <span class="n">cart</span><span class="o">.</span><span class="n">item_count</span> <span class="o">|</span> <span class="ss">pluralize</span><span class="p">:</span> <span class="s1">&#39;item&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="mi">3</span> <span class="n">items</span></code></pre></div>

<h3 id="prepend">prepend</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="s1">&#39;sale&#39;</span> <span class="o">|</span> <span class="ss">prepend</span><span class="p">:</span> <span class="s1">&#39;Made a great &#39;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Made</span> <span class="n">a</span> <span class="n">great</span> <span class="n">sale</span></code></pre></div>

<h3 id="remove">remove</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="s2">&quot;Hello, world. Goodbye, world.&quot;</span> <span class="o">|</span> <span class="ss">remove</span><span class="p">:</span> <span class="s2">&quot;world&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Made</span> <span class="n">a</span> <span class="n">great</span> <span class="n">saleHello</span><span class="p">,</span> <span class="o">.</span> <span class="no">Goodbye</span><span class="p">,</span> <span class="o">.</span></code></pre></div>

<h3 id="removefirst">remove_first</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="s2">&quot;Hello, world. Goodbye, world.&quot;</span> <span class="o">|</span> <span class="ss">remove_first</span><span class="p">:</span> <span class="s2">&quot;world&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Hello</span><span class="p">,</span> <span class="o">.</span> <span class="no">Goodbye</span><span class="p">,</span> <span class="n">world</span><span class="o">.</span></code></pre></div>

<h3 id="replace">replace</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="n">product</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Awesome Shoes&quot;</span> <span class="o">--&gt;</span>
<span class="p">{{</span> <span class="n">product</span><span class="o">.</span><span class="n">title</span> <span class="o">|</span> <span class="ss">replace</span><span class="p">:</span> <span class="s1">&#39;Awesome&#39;</span><span class="p">,</span> <span class="s1">&#39;Mega&#39;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Mega</span> <span class="no">Shoes</span></code></pre></div>

<h3 id="replacefirst">replace_first</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="n">product</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Awesome Awesome Shoes&quot;</span> <span class="o">--&gt;</span>
<span class="p">{{</span> <span class="n">product</span><span class="o">.</span><span class="n">title</span> <span class="o">|</span> <span class="ss">replace_first</span><span class="p">:</span> <span class="s1">&#39;Awesome&#39;</span><span class="p">,</span> <span class="s1">&#39;Mega&#39;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Mega</span> <span class="no">Awesome</span> <span class="no">Shoes</span></code></pre></div>

<h3 id="slice">slice</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="s2">&quot;hello&quot;</span> <span class="o">|</span> <span class="ss">slice</span><span class="p">:</span> <span class="mi">2</span> <span class="p">}}</span>
<span class="p">{{</span> <span class="s2">&quot;hello&quot;</span> <span class="o">|</span> <span class="ss">slice</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">e</span>
<span class="n">ell</span></code></pre></div>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="s2">&quot;hello&quot;</span> <span class="o">|</span> <span class="ss">slice</span><span class="p">:</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span>  <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">el</span></code></pre></div>

<h3 id="split">split</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{</span><span class="o">%</span> <span class="n">assign</span> <span class="n">words</span> <span class="o">=</span> <span class="s2">&quot;Uses cheat codes, calls the game boring.&quot;</span> <span class="o">|</span> <span class="nb">split</span><span class="p">:</span> <span class="s1">&#39; &#39;</span> <span class="sx">%}</span>
<span class="sx">First word: {{ words.first }</span><span class="p">}</span>
<span class="no">First</span> <span class="ss">word</span><span class="p">:</span> <span class="p">{{</span> <span class="n">words</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="p">}}</span>
<span class="no">Second</span> <span class="ss">word</span><span class="p">:</span> <span class="p">{{</span> <span class="n">words</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="p">}}</span>
<span class="no">Last</span> <span class="ss">word</span><span class="p">:</span> <span class="p">{{</span> <span class="n">words</span><span class="o">.</span><span class="n">last</span> <span class="p">}}</span>
<span class="no">All</span> <span class="ss">words</span><span class="p">:</span> <span class="p">{{</span> <span class="n">words</span> <span class="o">|</span> <span class="ss">join</span><span class="p">:</span> <span class="s1">&#39;, &#39;</span> <span class="p">}}</span>
<span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="n">word</span> <span class="k">in</span> <span class="n">words</span> <span class="sx">%}</span>
<span class="sx">{{ word }</span><span class="p">}</span> 
<span class="p">{</span><span class="o">%</span> <span class="n">endfor</span> <span class="o">%</span><span class="p">}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">First</span> <span class="ss">word</span><span class="p">:</span> <span class="no">Uses</span>
<span class="no">First</span> <span class="ss">word</span><span class="p">:</span> <span class="no">Uses</span>
<span class="no">Second</span> <span class="ss">word</span><span class="p">:</span> <span class="n">cheat</span>
<span class="no">Last</span> <span class="ss">word</span><span class="p">:</span> <span class="n">boring</span><span class="o">.</span>
<span class="no">All</span> <span class="ss">words</span><span class="p">:</span> <span class="no">Uses</span><span class="p">,</span> <span class="n">cheat</span><span class="p">,</span> <span class="n">codes</span><span class="p">,,</span> <span class="n">calls</span><span class="p">,</span> <span class="n">the</span><span class="p">,</span> <span class="n">game</span><span class="p">,</span> <span class="n">boring</span><span class="o">.</span>

<span class="no">Uses</span> <span class="n">cheat</span> <span class="n">codes</span><span class="p">,</span> <span class="n">calls</span> <span class="n">the</span> <span class="n">game</span> <span class="n">boring</span><span class="o">.</span></code></pre></div>

<h3 id="strip">strip</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="s1">&#39;   too many spaces      &#39;</span> <span class="o">|</span> <span class="n">strip</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">too</span> <span class="n">many</span> <span class="n">spaces</span></code></pre></div>

<h3 id="lstrip">lstrip</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="s1">&#39;   too many spaces           &#39;</span> <span class="o">|</span> <span class="n">lstrip</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="no">Notice</span> <span class="n">the</span> <span class="n">empty</span> <span class="n">spaces</span> <span class="n">to</span> <span class="n">the</span> <span class="n">right</span> <span class="n">of</span> <span class="n">the</span> <span class="n">string</span> <span class="o">--&gt;</span>
<span class="n">too</span> <span class="n">many</span> <span class="n">spaces</span></code></pre></div>

<h3 id="rstrip">rstrip</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="s1">&#39;   too many spaces      &#39;</span> <span class="o">|</span> <span class="n">rstrip</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">too</span> <span class="n">many</span> <span class="n">spaces</span></code></pre></div>

<h3 id="striphtml">strip_html</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="s2">&quot;&lt;h1&gt;Hello&lt;/h1&gt; World&quot;</span> <span class="o">|</span> <span class="n">strip_html</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Hello</span> <span class="no">World</span></code></pre></div>

<h3 id="stripnewlines">strip_newlines</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">product</span><span class="o">.</span><span class="n">description</span> <span class="o">|</span> <span class="n">strip_newlines</span> <span class="p">}}</span></code></pre></div>

<h3 id="truncate">truncate</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="s2">&quot;The cat came back the very next day&quot;</span> <span class="o">|</span> <span class="ss">truncate</span><span class="p">:</span> <span class="mi">10</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">The</span> <span class="n">cat</span><span class="o">.</span><span class="n">.</span><span class="o">.</span></code></pre></div>

<h3 id="truncatewords">truncatewords</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="s2">&quot;The cat came back the very next day&quot;</span> <span class="o">|</span> <span class="ss">truncatewords</span><span class="p">:</span> <span class="mi">4</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">The</span> <span class="n">cat</span> <span class="n">came</span> <span class="n">back</span><span class="o">.</span><span class="n">.</span><span class="o">.</span></code></pre></div>

<h3 id="uniq">uniq</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{</span><span class="o">%</span> <span class="n">assign</span> <span class="n">fruits</span> <span class="o">=</span> <span class="s2">&quot;orange apple banana apple orange&quot;</span> <span class="sx">%}</span>
<span class="sx">{{ fruits | split: &#39; &#39; | uniq | join: &#39; &#39; }</span><span class="p">}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">orange</span> <span class="n">apple</span> <span class="n">banana</span></code></pre></div>

<h3 id="upcase">upcase</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="s1">&#39;i want this to be uppercase&#39;</span> <span class="o">|</span> <span class="n">upcase</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">I</span> <span class="no">WANT</span> <span class="no">THIS</span> <span class="no">TO</span> <span class="no">BE</span> <span class="no">UPPERCASE</span></code></pre></div>

<h3 id="urlescape">url_escape</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="s2">&quot;&lt;hello&gt; &amp; &lt;shopify&gt;&quot;</span> <span class="o">|</span> <span class="n">url_escape</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">%</span><span class="mi">3</span><span class="no">Chello</span><span class="o">%</span><span class="mi">3</span><span class="n">E</span><span class="o">%</span><span class="mi">20</span><span class="o">&amp;%</span><span class="mi">20</span><span class="o">%</span><span class="mi">3</span><span class="no">Cshopify</span><span class="o">%</span><span class="mi">3</span><span class="n">E</span></code></pre></div>

<h3 id="urlparamescape">url_param_escape</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="s2">&quot;&lt;hello&gt; &amp; &lt;shopify&gt;&quot;</span> <span class="o">|</span> <span class="n">url_param_escape</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">%</span><span class="mi">3</span><span class="no">Chello</span><span class="o">%</span><span class="mi">3</span><span class="n">E</span><span class="o">%</span><span class="mi">20</span><span class="o">%</span><span class="mi">26</span><span class="o">%</span><span class="mi">20</span><span class="o">%</span><span class="mi">3</span><span class="no">Cshopify</span><span class="o">%</span><span class="mi">3</span><span class="n">E</span></code></pre></div>

<h3 id="numberofwords">number_of_words</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">page</span><span class="o">.</span><span class="n">content</span> <span class="o">|</span> <span class="n">number_of_words</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="mi">1337</span></code></pre></div>

<h3 id="arraytosentencestring">array_to_sentence_string</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">page</span><span class="o">.</span><span class="n">tags</span> <span class="o">|</span> <span class="n">array_to_sentence_string</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">foo</span><span class="p">,</span><span class="n">bar</span><span class="p">,</span><span class="ow">and</span> <span class="n">baz</span></code></pre></div>

<h1 id="section-4">日期过滤器</h1>

<blockquote>
  <p>主要包括以下对象：
* site.time
* page.date</p>
</blockquote>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">article</span><span class="o">.</span><span class="n">published_at</span> <span class="o">|</span> <span class="ss">date</span><span class="p">:</span> <span class="s2">&quot;%a, %b %d, %y&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Tue</span><span class="p">,</span> <span class="no">Apr</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">14</span></code></pre></div>

<h3 id="aabbreviated-weekday">%a:Abbreviated weekday.</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">article</span><span class="o">.</span><span class="n">published_at</span> <span class="o">|</span> <span class="ss">date</span><span class="p">:</span> <span class="s2">&quot;%a&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="no">Sat</span> <span class="o">--&gt;</span></code></pre></div>

<h3 id="afull-weekday-name">%A:Full weekday name.</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">article</span><span class="o">.</span><span class="n">published_at</span> <span class="o">|</span> <span class="ss">date</span><span class="p">:</span> <span class="s2">&quot;%A&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="no">Tuesday</span> <span class="o">--&gt;</span></code></pre></div>

<h3 id="babbreviated-month-name">%b:Abbreviated month name.</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">article</span><span class="o">.</span><span class="n">published_at</span> <span class="o">|</span> <span class="ss">date</span><span class="p">:</span> <span class="s2">&quot;%b&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="no">Jan</span> <span class="o">--&gt;</span></code></pre></div>

<h3 id="bfull-month-name">%B:Full month name</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">article</span><span class="o">.</span><span class="n">published_at</span> <span class="o">|</span> <span class="ss">date</span><span class="p">:</span> <span class="s2">&quot;%B&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="no">January</span> <span class="o">--&gt;</span></code></pre></div>

<h3 id="cpreferred-local-date-and-time-representation">%c:Preferred local date and time representation</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">article</span><span class="o">.</span><span class="n">published_at</span> <span class="o">|</span> <span class="ss">date</span><span class="p">:</span> <span class="s2">&quot;%c&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="no">Tue</span> <span class="no">Apr</span> <span class="mi">22</span> <span class="mi">11</span><span class="p">:</span><span class="mi">16</span><span class="p">:</span><span class="mi">09</span> <span class="mi">2014</span> <span class="o">--&gt;</span></code></pre></div>

<h3 id="dday-of-the-month-zero-padded-01-02-03-etc">%d:Day of the month, zero-padded (01, 02, 03, etc.).</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">article</span><span class="o">.</span><span class="n">published_at</span> <span class="o">|</span> <span class="ss">date</span><span class="p">:</span> <span class="s2">&quot;%d&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="mo">04</span> <span class="o">--&gt;</span></code></pre></div>

<h3 id="dday-of-the-month-not-zero-padded-123-etc">%-d:Day of the month, not zero-padded (1,2,3, etc.).</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">article</span><span class="o">.</span><span class="n">published_at</span> <span class="o">|</span> <span class="ss">date</span><span class="p">:</span> <span class="s2">&quot;%-d&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="mi">4</span> <span class="o">--&gt;</span></code></pre></div>

<h3 id="dformats-the-date-ddmmyy">%D:Formats the date (dd/mm/yy).</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">article</span><span class="o">.</span><span class="n">published_at</span> <span class="o">|</span> <span class="ss">date</span><span class="p">:</span> <span class="s2">&quot;%D&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="mo">04</span><span class="o">/</span><span class="mi">22</span><span class="o">/</span><span class="mi">14</span> <span class="o">--&gt;</span></code></pre></div>

<h3 id="eday-of-the-month-blank-padded--1-2-3-etc">%e:Day of the month, blank-padded ( 1, 2, 3, etc.).</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">article</span><span class="o">.</span><span class="n">published_at</span> <span class="o">|</span> <span class="ss">date</span><span class="p">:</span> <span class="s2">&quot;%e&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="mi">3</span> <span class="o">--&gt;</span></code></pre></div>

<h3 id="freturns-the-date-in-iso-8601-format-yyyy-mm-dd">%F:Returns the date in ISO 8601 format (yyyy-mm-dd).</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">article</span><span class="o">.</span><span class="n">published_at</span> <span class="o">|</span> <span class="ss">date</span><span class="p">:</span> <span class="s2">&quot;%F&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="mi">2014</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">22</span> <span class="o">--&gt;</span></code></pre></div>

<h3 id="hhour-of-the-day-24-hour-clock-00---23">%H:Hour of the day, 24-hour clock (00 - 23).</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">article</span><span class="o">.</span><span class="n">published_at</span> <span class="o">|</span> <span class="ss">date</span><span class="p">:</span> <span class="s2">&quot;%H&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="mi">15</span> <span class="o">--&gt;</span></code></pre></div>

<h3 id="ihour-of-the-day-12-hour-clock-1---12">%I:Hour of the day, 12-hour clock (1 - 12).</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">article</span><span class="o">.</span><span class="n">published_at</span> <span class="o">|</span> <span class="ss">date</span><span class="p">:</span> <span class="s2">&quot;%I&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="mi">7</span> <span class="o">--&gt;</span></code></pre></div>

<h3 id="jday-of-the-year-001---366">%j:Day of the year (001 - 366).</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">article</span><span class="o">.</span><span class="n">published_at</span> <span class="o">|</span> <span class="ss">date</span><span class="p">:</span> <span class="s2">&quot;%j&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="mi">245</span> <span class="o">--&gt;</span></code></pre></div>

<h3 id="khour-of-the-day-24-hour-clock-1---24">%k:Hour of the day, 24-hour clock (1 - 24).</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">article</span><span class="o">.</span><span class="n">published_at</span> <span class="o">|</span> <span class="ss">date</span><span class="p">:</span> <span class="s2">&quot;%k&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="mi">14</span> <span class="o">--&gt;</span></code></pre></div>

<h3 id="mmonth-of-the-year-01---12">%m:Month of the year (01 - 12).</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">article</span><span class="o">.</span><span class="n">published_at</span> <span class="o">|</span> <span class="ss">date</span><span class="p">:</span> <span class="s2">&quot;%m&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="mo">04</span> <span class="o">--&gt;</span></code></pre></div>

<h3 id="mminute-of-the-hour-00---59">%M:Minute of the hour (00 - 59).</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">article</span><span class="o">.</span><span class="n">published_at</span> <span class="o">|</span> <span class="ss">date</span><span class="p">:</span> <span class="s2">&quot;%M&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span><span class="mi">53</span><span class="o">--&gt;</span></code></pre></div>

<h3 id="pmeridian-indicator-ampm">%p:Meridian indicator (AM/PM).</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">article</span><span class="o">.</span><span class="n">published_at</span> <span class="o">|</span> <span class="ss">date</span><span class="p">:</span> <span class="s2">&quot;%p&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="no">PM</span> <span class="o">--&gt;</span></code></pre></div>

<h3 id="r12-hour-time-ims-p">%r:12-hour time (%I:%M:%S %p)</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">article</span><span class="o">.</span><span class="n">published_at</span> <span class="o">|</span> <span class="ss">date</span><span class="p">:</span> <span class="s2">&quot;%r&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="mo">03</span><span class="p">:</span><span class="mi">20</span><span class="p">:</span><span class="mo">07</span> <span class="no">PM</span> <span class="o">--&gt;</span></code></pre></div>

<h3 id="r24-hour-time-hm">%R:24-hour time (%H:%M)</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">article</span><span class="o">.</span><span class="n">published_at</span> <span class="o">|</span> <span class="ss">date</span><span class="p">:</span> <span class="s2">&quot;%R&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="mi">15</span><span class="p">:</span><span class="mi">21</span> <span class="o">--&gt;</span></code></pre></div>

<h3 id="t24-hour-time-hms">%T:24-hour time (%H:%M:%S)</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">article</span><span class="o">.</span><span class="n">published_at</span> <span class="o">|</span> <span class="ss">date</span><span class="p">:</span> <span class="s2">&quot;%T&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="mi">15</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">13</span> <span class="o">--&gt;</span></code></pre></div>

<h3 id="uthe-number-of-the-week-in-the-current-year-starting-with-the-first-sunday-as-the-first-day-of-the-first-week">%U:The number of the week in the current year, starting with the first Sunday as the first day of the first week.</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">article</span><span class="o">.</span><span class="n">published_at</span> <span class="o">|</span> <span class="ss">date</span><span class="p">:</span> <span class="s2">&quot;%U&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="mi">16</span> <span class="o">--&gt;</span></code></pre></div>

<h3 id="wthe-number-of-the-week-in-the-current-year-starting-with-the-first-monday-as-the-first-day-of-the-first-week">%W:The number of the week in the current year, starting with the first Monday as the first day of the first week.</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">article</span><span class="o">.</span><span class="n">published_at</span> <span class="o">|</span> <span class="ss">date</span><span class="p">:</span> <span class="s2">&quot;%W&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="mi">16</span> <span class="o">--&gt;</span></code></pre></div>

<h3 id="wday-of-the-week-0---6-with-sunday-being-0">%w:Day of the week (0 - 6, with Sunday being 0).</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">article</span><span class="o">.</span><span class="n">published_at</span> <span class="o">|</span> <span class="ss">date</span><span class="p">:</span> <span class="s2">&quot;%w&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="mi">2</span> <span class="o">--&gt;</span></code></pre></div>

<h3 id="xpreferred-representation-for-the-date-alone-no-time-mmddyy">%x:Preferred representation for the date alone, no time. (mm/dd/yy).</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">article</span><span class="o">.</span><span class="n">published_at</span> <span class="o">|</span> <span class="ss">date</span><span class="p">:</span> <span class="s2">&quot;%x&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="mo">04</span><span class="o">/</span><span class="mi">22</span><span class="o">/</span><span class="mi">14</span> <span class="o">--&gt;</span></code></pre></div>

<h3 id="xpreferred-representation-for-the-time-hhmmss">%X:Preferred representation for the time. (hh:mm:ss).</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">article</span><span class="o">.</span><span class="n">published_at</span> <span class="o">|</span> <span class="ss">date</span><span class="p">:</span> <span class="s2">&quot;%X&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="mi">13</span><span class="p">:</span><span class="mi">17</span><span class="p">:</span><span class="mi">24</span> <span class="o">--&gt;</span></code></pre></div>

<h3 id="yyear-without-a-century-0099">%y:Year without a century (00.99).</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">article</span><span class="o">.</span><span class="n">published_at</span> <span class="o">|</span> <span class="ss">date</span><span class="p">:</span> <span class="s2">&quot;%y&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="mi">14</span> <span class="o">--&gt;</span></code></pre></div>

<h3 id="yyear-with-a-century">%Y:Year with a century.</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">article</span><span class="o">.</span><span class="n">published_at</span> <span class="o">|</span> <span class="ss">date</span><span class="p">:</span> <span class="s2">&quot;%Y&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="mi">2014</span> <span class="o">--&gt;</span></code></pre></div>

<h3 id="ztime-zone-name">%Z:Time zone name.</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">article</span><span class="o">.</span><span class="n">published_at</span> <span class="o">|</span> <span class="ss">date</span><span class="p">:</span> <span class="s2">&quot;%Z&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="no">EDT</span> <span class="o">--&gt;</span></code></pre></div>

<h3 id="datetoxmlschema">date_to_xmlschema</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">site</span><span class="o">.</span><span class="n">time</span> <span class="o">|</span> <span class="n">date_to_xmlschema</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="mi">2008</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">17</span><span class="ss">T13</span><span class="p">:</span><span class="mo">07</span><span class="p">:</span><span class="mi">54</span><span class="o">-</span><span class="mi">08</span><span class="p">:</span><span class="mo">00</span></code></pre></div>

<h3 id="datetostring">date_to_string</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">site</span><span class="o">.</span><span class="n">time</span> <span class="o">|</span> <span class="n">date_to_string</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="mi">17</span> <span class="no">Nov</span> <span class="mi">2008</span></code></pre></div>

<h3 id="datetolongstring">date_to_long_string</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">site</span><span class="o">.</span><span class="n">time</span> <span class="o">|</span> <span class="n">date_to_long_string</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="mi">17</span> <span class="no">November</span> <span class="mi">2008</span></code></pre></div>

<h1 id="section-5">其他过滤器</h1>

<h3 id="default">default</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Dear</span> <span class="p">{{</span> <span class="n">customer</span><span class="o">.</span><span class="n">name</span> <span class="o">|</span> <span class="ss">default</span><span class="p">:</span> <span class="s2">&quot;customer&quot;</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="k">if</span> <span class="n">customer</span><span class="o">.</span><span class="n">name</span> <span class="n">is</span> <span class="kp">nil</span> <span class="o">--&gt;</span>
<span class="no">Dear</span> <span class="n">customer</span></code></pre></div>

<h3 id="defaulterrors">default_errors</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">errors</span> <span class="sx">%}</span>
<span class="sx">      {{ form.errors | default_errors }</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endif</span> <span class="o">%</span><span class="p">}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">errors</span> <span class="n">returned</span> <span class="s2">&quot;email&quot;</span> <span class="o">--&gt;</span>
<span class="no">Please</span> <span class="n">enter</span> <span class="n">a</span> <span class="n">valid</span> <span class="n">email</span> <span class="n">address</span><span class="o">.</span></code></pre></div>

<h3 id="defaultpagination">default_pagination</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">paginate</span> <span class="o">|</span> <span class="n">default_pagination</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;page current&quot;</span><span class="o">&gt;</span><span class="mi">1</span><span class="o">&lt;</span><span class="sr">/span&gt;</span>
<span class="sr">&lt;span class=&quot;page&quot;&gt;&lt;a href=&quot;/</span><span class="n">collections</span><span class="o">/</span><span class="n">all?page</span><span class="o">=</span><span class="mi">2</span><span class="s2">&quot; title=&quot;&quot;&gt;2&lt;/a&gt;&lt;/span&gt;</span>
<span class="s2">&lt;span class=&quot;</span><span class="n">page</span><span class="s2">&quot;&gt;&lt;a href=&quot;</span><span class="o">/</span><span class="n">collections</span><span class="o">/</span><span class="n">all?page</span><span class="o">=</span><span class="mi">3</span><span class="s2">&quot; title=&quot;&quot;&gt;3&lt;/a&gt;&lt;/span&gt; </span>
<span class="s2">&lt;span class=&quot;</span><span class="n">deco</span><span class="s2">&quot;&gt;&amp;hellip;&lt;/span&gt;</span>
<span class="s2">&lt;span class=&quot;</span><span class="n">page</span><span class="s2">&quot;&gt;&lt;a href=&quot;</span><span class="o">/</span><span class="n">collections</span><span class="o">/</span><span class="n">all?page</span><span class="o">=</span><span class="mi">17</span><span class="s2">&quot; title=&quot;&quot;&gt;17&lt;/a&gt;&lt;/span&gt;</span>
<span class="s2">&lt;span class=&quot;</span><span class="k">next</span><span class="s2">&quot;&gt;&lt;a href=&quot;</span><span class="o">/</span><span class="n">collections</span><span class="o">/</span><span class="n">all?page</span><span class="o">=</span><span class="mi">2</span><span class="s2">&quot; title=&quot;&quot;&gt;Next &amp;raquo;&lt;/a&gt;&lt;/span&gt;</span></code></pre></div>

<h3 id="highlight">highlight</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">item</span><span class="o">.</span><span class="n">content</span> <span class="o">|</span> <span class="ss">highlight</span><span class="p">:</span> <span class="n">search</span><span class="o">.</span><span class="n">terms</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="no">If</span> <span class="n">the</span> <span class="n">search</span> <span class="n">term</span> <span class="n">was</span> <span class="s2">&quot;Yellow&quot;</span> <span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="n">strong</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;highlight&quot;</span><span class="o">&gt;</span><span class="no">Yellow</span><span class="o">&lt;</span><span class="sr">/strong&gt; shirts are the best!</span></code></pre></div>

<h3 id="highlightactivetag">highlight_active_tag</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;!--</span> <span class="n">collection</span><span class="o">.</span><span class="n">tags</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&quot;Cotton&quot;</span><span class="p">,</span> <span class="s2">&quot;Crew Neck&quot;</span><span class="p">,</span> <span class="s2">&quot;Jersey&quot;</span><span class="o">]</span> <span class="o">--&gt;</span>
<span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="n">tag</span> <span class="k">in</span> <span class="n">collection</span><span class="o">.</span><span class="n">tags</span> <span class="sx">%}</span>
<span class="sx">    {{ tag | highlight_active | link_to_tag: tag }</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endfor</span> <span class="o">%</span><span class="p">}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;</span><span class="n">a</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Show products matching tag Cotton&quot;</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;/collections/all/cotton&quot;</span><span class="o">&gt;&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;active&quot;</span><span class="o">&gt;</span><span class="no">Cotton</span><span class="o">&lt;</span><span class="sr">/span&gt;&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">a</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Show products matching tag Crew Neck&quot;</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;/collections/all/crew-neck&quot;</span><span class="o">&gt;</span><span class="no">Crew</span> <span class="no">Neck</span><span class="o">&lt;</span><span class="sr">/a&gt;</span>
<span class="sr">&lt;a title=&quot;Show products matching tag Jersey&quot; href=&quot;/</span><span class="n">collections</span><span class="o">/</span><span class="n">all</span><span class="o">/</span><span class="n">jersey</span><span class="s2">&quot;&gt;Jersey&lt;/a&gt;</span></code></pre></div>

<h3 id="json">json</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">var</span> <span class="n">content</span> <span class="o">=</span> <span class="p">{{</span> <span class="n">pages</span><span class="o">.</span><span class="n">page</span><span class="o">-</span><span class="n">handle</span><span class="o">.</span><span class="n">content</span> <span class="o">|</span> <span class="n">json</span> <span class="p">}};</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">var</span> <span class="n">content</span> <span class="o">=</span> <span class="s2">&quot;\u003Cp\u003E\u003Cstrong\u003EYou made it! Congratulations on starting your own e-commerce store!\u003C/strong\u003E\u003C/p\u003E</span><span class="se">\n</span><span class="s2">\u003Cp\u003EThis is your shop\u0026#8217;s \u003Cstrong\u003Efrontpage\u003C/strong\u003E, and it\u0026#8217;s the first thing your customers will see when they arrive. You\u0026#8217;ll be able to organize and style this page however you like.\u003C/p\u003E</span><span class="se">\n</span><span class="s2">\u003Cp\u003E\u003Cstrong\u003ETo get started adding products to your shop, head over to the \u003Ca href=</span><span class="se">\&quot;</span><span class="s2">/admin</span><span class="se">\&quot;</span><span class="s2">\u003EAdmin Area\u003C/a\u003E.\u003C/strong\u003E\u003C/p\u003E</span><span class="se">\n</span><span class="s2">\u003Cp\u003EEnjoy the software,  \u003Cbr /\u003E</span><span class="se">\n</span><span class="s2">Your Shopify Team.\u003C/p\u003E&quot;</span><span class="p">;</span></code></pre></div>

<h3 id="weightwithunit">weight_with_unit</h3>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{{</span> <span class="n">product</span><span class="o">.</span><span class="n">variants</span><span class="o">.</span><span class="n">first</span><span class="o">.</span><span class="n">weight</span> <span class="o">|</span> <span class="n">weight_with_unit</span> <span class="p">}}</span></code></pre></div>

<p>=&gt;</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="mi">24</span><span class="o">.</span><span class="mi">0</span> <span class="n">kg</span></code></pre></div>


  </div>
</article>


  <article>
  <h2>
    <a href="/news/2015/01/02/Advertise-Mobile-Platform-Market/">
      2014年移动广告平台界投融资整理
    </a>
  </h2>
  <span class="post-category">
    <span class="label">
      广告平台
    </span>
  </span>
  <div class="post-meta">
    <span class="post-date">
      02 Jan 2015
    </span>
    <a href="https://github.com/AcePeak" class="post-author">
      <img src="https://github.com/AcePeak.png" class="avatar" alt="AcePeak" width="24" height="24">
      AcePeak
    </a>
  </div>
  <div class="post-content">
    <pre><code>domob多盟
    2014.09.16已完成C轮
    2011.07.09 B轮 启明创投、红点投资投资超1000万美元

mobSage-艾德思奇
    2014.08.21百视通1亿美元收购51%股权

inMobi邑盟
    2011.09 日本软银投资2亿美元
    2014.05.06 GMIC上宣布接下来几年投入1亿美元在原生广告平台上
    2010.07 已获得来自KPCB等1560万美元投资

limei力美科技
    2012年IDG、KPCB等多家知名海外投资机构共2000多万美元的风险投资

youmi有米-广州优蜜
    2013.08.16深圳同创伟业领投，广州的润都资本和北京的华扬联众共同出资1亿融资

adwo安沃-北京掌阔移动
    2012.06.26获得美国和日本资金的B轮投资1200万美元

点入-北京亿起联
    2014.09.10久其软件4.8亿收购100%

kuguo酷果-广州谷果
    2013.10.07星辉车模7300万收购51%

TEAMTOP天拓-广州天拓
    2013.10.18星辉车模8.12亿收购100%

miidi米迪
    2014.09.22德丰杰龙脉领投北京朗玛峰创投、北京叠金华麒跟投数千万元

momark东信
    2011.05 德丰杰龙脉基金400万美元A轮

aduu优友-深圳优友传媒

smartmad亿动智道
    2013.04.10 高通风险投资领投C轮。ABC共融资3000万美元

vpon威朋
    2014.07.03由多家机构投资B轮千万美金

appflood木瓜
    2014.04 之前已经完成北极光创投B轮融资。AB轮共计2200万美元

WQmobile帷千动媒
    2014.11.05 A轮融资，不祥

casee架势无线
    2008.05.09 Velti投资600万美元

wooboo哇棒
    2013.11.07新文化传媒投资1000万占10%

智盟
    可能与1mob合并了？

1mob易盟

doumob豆盟-掌上云景
    2014.12.05 蓝色光标 4800万24%股权

nextad指智-指点传媒
    2014.09.26电广传媒投资1.673亿收购51%股权

dianjin点金-福建博动

lonark点媒

adjumi聚米
    2013年投资1000万

iDian道有道
    2014.12.09与凤凰移动建立平台战略合作
    2013.07完成A轮融资

mopub
    2013.09.10 Twitter 3.5亿美元收购

Max传漾
</code></pre>

  </div>
</article>


  <article>
  <h2>
    <a href="/news/2014/12/28/Advertise-glossary/">
      广告平台术语
    </a>
  </h2>
  <span class="post-category">
    <span class="label">
      广告平台
    </span>
  </span>
  <div class="post-meta">
    <span class="post-date">
      28 Dec 2014
    </span>
    <a href="https://github.com/AcePeak" class="post-author">
      <img src="https://github.com/AcePeak.png" class="avatar" alt="AcePeak" width="24" height="24">
      AcePeak
    </a>
  </div>
  <div class="post-content">
    <p><code>Campaign: 广告活动</code></p>

<p>Advertising Campaign(广告活动) 指在某一特定市场上为实现某一目标所集中进行的大规模的广告活动, 可以是通过平面印刷品、电视电台、落地活动、互联网及社交平台、移动端等作为载体进行传播更可以是组合, 是广告策略的一种体现。</p>

<p><code>impression: 展现或印象</code></p>

<p>放置广告图像的网页每一次显示，就是一次印象。</p>

<p><code>PV(Page View): 页面展现</code></p>

<p>页面浏览量，用户每次刷新即被计算一次。一般与Impression展现同意。</p>

<p><code>UV(Unique View): 独立访客</code></p>

<p>访问网站或看到广告的一台电脑客户端为一个访客。24小时内相同的客户端只被计算一次。</p>

<p><code>IP(Individual IP): 独立IP</code></p>

<p>24小时内相同IP地址之被计算一次。</p>

<p><code>CPM(Cost Per Mille): 千次展现费用</code></p>

<p>CPM更多是一种费用清算方式，表明按照展现收费。网上广告收费最科学的办法是按照有多少人看到你的广告来收费。按访问人次收费已经成为网络广告的惯例。CPM(千人成本)指的是广告投放过程中，听到或者看到某广告的每一人平均分担到多少广告成本。传统媒介多采用这种计价方式。在网上广告，CPM取决于“印象”尺度，通常理解为一个人的眼睛在一段固定的时间内注视一个广告的次数。比如说一个广告横幅的单价是1元/CPM的话，意味着每一千个人次看到这个Banner的话就收1元，如此类推，10，000人次访问的主页就是10元。至于每CPM的收费究竟是多少，要根据以主页的热门程度(即浏览人数)划分价格等级，采取固定费率。国际惯例是每CPM收费从5美元至200美元不等。</p>

<p><code>eCPM(effective Cost Per Mille): 有效千次展现费用</code></p>

<p>eCPM是一种指标和数量，表明千次展现成本。
eCPM = 收入/网页展示次数×1000</p>

<p><code>CPC(Cost Per Click): 每次点击费用</code></p>

<p>以每点击一次计费。这样的方法加上点击率限制可以加强作弊的难度，而且是宣传网站站点的最优方式。但是，此类方法就有不少经营广告的网站觉得不公平，比如，虽然浏览者没有点击，但是他已经看到了广告，对于这些看到广告却没有点击的流量来说，网站成了白忙活。有很多网站不愿意做这样的广告，据说，是因为传统媒体从来都没有这样干过。目前Google Adsense就采用此方式。</p>

<p><code>CPA(Cost Per Acquisition/Action): 每次行动费用</code></p>

<p>CPA计价方式是指按广告投放实际效果，即按回应的有效问卷或定单来计费，而不限广告投放量。CPA的计价方式对于网站而言有一定的风险，但若广告投放成功，其收益也比CPM的计价方式要大得多。广告主为规避广告费用风险，只有当网络用户点击旗帜广告，链接广告主网页后，才按点击次数付给广告站点费用。</p>

<p>CPL(Cost Per Leads): 每次引导费用</p>

<p>即每次通过特定链接，注册成功后付费的一个常见广告模式。这是我们通常称谓的引导注册，比如“亚洲交友”。一个网络媒体(网站)会包含有数十个甚至成千上万个页面，站点为获得生存，一般都需要在站点投放网络广告。网络广告所投放的位置和价格就牵涉到特定的页面以及浏览人数的多寡。这好比平面媒体(如报纸)的“版位”、“发行量”，或者电波媒体(如电视)的“时段”、“收视率”的概念。</p>

<p>CPS(Cost Per Sales): 以实际销售产品数量来换算广告刊登金额</p>

<p>即根据每个订单/每次交易来收费的方式。用户每成功达成一笔交易,网站主可获得佣金。</p>

<p><code>CTR(Click-Through Rate): 点击率</code></p>

<p>网络广告被点击的次数与访问次数的比例，即Clicks/ Impressions。如果这个页面被访问了100次，而页面上的广告被点击了20次，那么CTR为20%。CTR是评估广告效果的指标之一。</p>

<p><code>IO(Insertion Order): 广告订单（加插刊登通知）</code></p>

<p><code>MFC(Media Flow Chart): 媒介排期表</code></p>

<p>在4A中指粗略的排期，只规定对每个媒体的预算、总体时间段等粗略的信息</p>

<p><code>MP(Media Plan): 媒介排期表（详）</code></p>

<p>IGA(In-Game Advertising): 游戏内广告</p>

<p>是指在游戏中的嵌入式商业广告. 通常分为内嵌式、外挂式和独立交互式三种. </p>


  </div>
</article>


  <article>
  <h2>
    <a href="/news/2014/12/23/PubNative-Publish/">
      PubNative发布世界上首个满足专业需求的“原生广告适配器”
    </a>
  </h2>
  <span class="post-category">
    <span class="label">
      广告平台
    </span>
  </span>
  <div class="post-meta">
    <span class="post-date">
      23 Dec 2014
    </span>
    <a href="https://github.com/AcePeak" class="post-author">
      <img src="https://github.com/AcePeak.png" class="avatar" alt="AcePeak" width="24" height="24">
      AcePeak
    </a>
  </div>
  <div class="post-content">
    <p>原文  <a href="http://www.adexchanger.cn/tech-company/9903.html">http://www.adexchanger.cn/tech-company/9903.html</a></p>

<p>前Motility Ads GM 兼Co-Founder 加入原生 SSP 管理团队</p>

<p>柏林/旧金山/首尔- PubNative,总部位于柏林的原生广告供应方平台，今天发布世界上首个移动原生广告适配器，使所有的移动广告网络以及需求方平台可以访问原生流量。另外，PubNative正式宣布前 Motility Ads 总经理Eddie de Guia作为联合创始人兼总经理加入本公司，负责公司策略制定，PubNative 正在经历快速发展并居于移动原生广告创新的前沿。</p>

<p>PubNative 的移动原生适配器技术使用应用商店的信息和额外的定制化素材，使广告内容更丰富，并制定适合广告载体的广告单元。通过这种技术，PubNative 成为了首个通过API 将完全定制化的广告单元和可拓展性专业需求以及视频广告结合在一起的供应方平台。该技术完全支持IAB的OpenRTB V2.3的原生广告标准，同时也使任何暂时不满足该标准的需求方可以访问原生流量。</p>

<p>“市面上有90%以上的移动流量需求方不支持原生广告形式 ”，PubNative 联合创始人 Ionut Ciobotaru指出。“我们的技术通过使所有的需求方能轻易的访问原生流量而解决了这一难题”。同时，开发者更大范围的从多样化以及相关的原生广告中获利，从而提高广告的相关性以及eCPMs。</p>

<p>Elad Natanson, 应用程序分发平台Appnext创始人证实：“PubNative 的适配器技术可以让我们的广告客户通过必要的资源丰富他们的广告以扩大全球分销量，从而获得更广阔的优质移动原生流量。</p>

<p>据相关报道，PubNative已经宣布Eddie de Guia 作为联合创始人兼总经理。Eddie de Guia带来了超过10年的广告技术行业工作经验;他曾在各种广告技术公司担任领导角色，目前是移动营销协会的董事会成员。他之前在被 Freenet收购的Motility Ads担任联合创始人和总经理。Eddie de Guia 将通过自己的行业专业知识，强烈的商业嗅觉和丰富的管理经验结合Ciobotaru的产品理念，来共同推动公司的发展。</p>

<p>“在不到半年的时间，PubNative的技术已经设立了移动原生广告的标准，并处于行业领先地位，”DeGuia说。 “我很高兴能成为我们高效，创新和有趣的团队的一部分。</p>

<p>关于PubNative:</p>

<p>PubNative是移动发行商平台，通过 API为应用和移动网页提供可扩展的，灵活的原生广告。该平台的程序交换系统使开发者可以访问全球超过400家的需求方合作伙伴。PubNative正在申请专利的eCPM最大化算法通过机器学习模式和预测行为分析来优化收益率。该平台还为额外为开发者提供了广告投放和定位功能，以及丰富的流量管理工具。其开发者优先的策略将关注各个行业的每个开发者具体需求，并帮助他们创建无缝的，非侵入性的和高效的广告解决方案。该公司总部设在柏林，在旧金山和首尔设有办事处。</p>

  </div>
</article>


  <article>
  <h2>
    <a href="/news/2014/12/17/Mac+GithubPages+Jekyll-site/">
      Mac+GithubPages+Jekyll配置个人网站
    </a>
  </h2>
  <span class="post-category">
    <span class="label">
      internet
    </span>
  </span>
  <div class="post-meta">
    <span class="post-date">
      17 Dec 2014
    </span>
    <a href="https://github.com/AcePeak" class="post-author">
      <img src="https://github.com/AcePeak.png" class="avatar" alt="AcePeak" width="24" height="24">
      AcePeak
    </a>
  </div>
  <div class="post-content">
    <p><code>1 Github官网注册账号</code></p>

<p><a href="https://github.com/">Github.com官网</a></p>

<p><code>2 下载Github For Mac并登录</code></p>

<p><a href="https://mac.github.com/">Mac版Github下载页面</a></p>

<p><code>3 设置Git方式同步并使用SSH Keys</code></p>

<p><a href="http://segmentfault.com/q/1010000002169878">前往此贴查看changsj的回答</a></p>

<p><code>4 使用Jekyll</code></p>

<p><a href="http://www.365dw.cn/616.html">首先更换GEM源</a></p>

<p><a href="http://jekyllrb.com/">按照Jekyll首页所列的代码指令开始吧</a></p>

<p><code>5 从Jekyll建立主页</code></p>

<p><a href="https://github.com/jekyll/jekyll">Fork Jekyll并clone到桌面吧</a></p>

<p><a href="https://pages.github.com/">创建Pages代码库</a></p>

<p>然后通过Github For Mac将<username>.github.io和jekyll代码库下载到你的电脑上，把Jekyll代码库中的sites文件夹内所有文件拷贝到<username>.github.io代码库根目录下</username></username></p>

<p><code>6 绑定域名</code></p>

<p><a href="https://help.github.com/articles/setting-up-a-custom-domain-with-github-pages/">官方绑定攻略</a></p>

<p>要(很)注(坑)意(爹)的是，在<a href="https://help.github.com/articles/tips-for-configuring-an-a-record-with-your-dns-provider/">绑定根域名</a>时, 网页上列出的两个IP地址(192.30.252.XXX)都不是你的IP，你需要在命令行知道你自己的http://<username>.github.io的IP是多少，ping之吧。</username></p>

<p><code>7 编写网站吧</code></p>

<p><a href="http://jekyllrb.com/docs/home/">Jekyll官方文档</a></p>

<p><code>8 提交网站</code></p>

<p>由于在Jekyll体系中，_site文件夹是本地服务器Jekyll生成最终html的地方，.sass-cache文件夹是本地的sass缓存文件，都不需要作为代码文件上传到服务器上，因此可以在Github For Mac中设置ignored files为</p>

<div class="highlight"><pre><code class="language-powershell" data-lang="powershell"><span class="n">_site</span><span class="p">/</span>
<span class="p">.</span><span class="n">sass-cache</span><span class="p">/</span></code></pre></div>

<p><code>9 Enjoy(Painful)!</code></p>


  </div>
</article>


  <article>
  <h2>
    <a href="/news/2009/03/15/Productivity-And-Production-Relations/">
      生产力VS生产关系
    </a>
  </h2>
  <span class="post-category">
    <span class="label">
      博文
    </span>
  </span>
  <div class="post-meta">
    <span class="post-date">
      15 Mar 2009
    </span>
    <a href="https://github.com/AcePeak" class="post-author">
      <img src="https://github.com/AcePeak.png" class="avatar" alt="AcePeak" width="24" height="24">
      AcePeak
    </a>
  </div>
  <div class="post-content">
    <p>丁：所以只能在美国人的公司里搞科研 </p>

<p>丁：给美国人打工 </p>

<p>丁：呵呵，其实人家说的很清楚 </p>

<p>丁：现在的科研不可能单枪匹马了 </p>

<p>乙：恩 </p>

<p>乙：科研都是大项目 </p>

<p>乙：一个人能搞出来除非你是爱因斯坦 </p>

<p>丁：本科小兵，硕士小队长，博士大队长而已 </p>

<p>丁：也就理论学界可以搞搞英雄主义 </p>

<p>丁：在咱们实践界 </p>

<p>丁：都是大工程…… </p>

<p>乙：感觉在学校里面那些人，每天工作不超过4小时 </p>

<p>丁：安逸啊 </p>

<p>丁：相比之下人家单位工资比我高多了 </p>

<p>丁：在学校，只要你努努力 </p>

<p>丁：比外面整的爽多了 </p>

<p>丁：现在，就是要做服务业 </p>

<p>丁：特别是教育业 </p>

<p>乙：其实服务业，教育业都是为了实业服务的，真正能够赚钱的是做实业的 </p>

<p>乙：然后服务业和教育业赚实业者的钱 </p>

<p>乙：就相当于采矿=实业，锻造=服务业 </p>

<p>丁：这个，不同意 </p>

<p>丁：因为，做实业的太多了 </p>

<p>丁：而且成本太高 </p>

<p>丁：这个，我们是不用考虑的 </p>

<p>乙：还记得马克思主义怎么说的吗？ </p>

<p>乙：生产力决定生产关系 </p>

<p>丁：实业是土，服务业是草，是花 </p>

<p>丁：我说的是提高生活水平，不是说做事业 </p>

<p>丁：做事业第一步要完成资本的原始积累 </p>

<p>丁：这个也是马克思主义说的 </p>

<p>乙：对啊，生产力决定生产关系，你的生产力高了你的关系提高了，关系提高基本上就代表你的生活水平高了 </p>

<p>丁：生产力是说社会平均生产力 </p>

<p>乙：用在个人也不为错 </p>

<p>丁：所有实业的平均值 </p>

<p>丁：服务业的用处就是以最高生产力为参考，努力提升次高生产力 </p>

<p>乙：生产力决定生产关系是说你的能力高了能做的事情多了效率高了，那么你的生产关系在提升，为更多的人创造价值，和更多的人合作，发展
到你领导更多的人 </p>

<p>丁：教育培训业的目的就是为了提升这个 </p>

<p>乙：最后当你能对更多人造成影响的时候，你做出的一点点努力其实就会使你生产力得到大幅提升 </p>

<p>丁：同意 </p>

<p>乙：这就是他们的关系 </p>

<p>丁：影响力决定生产力？ </p>

<p>丁：你能这么说吗？ </p>

<p>乙：影响力+现有生产力=产生的生产力 </p>

<p>乙：是个迭代过程 </p>

<p>丁：影响力决定你改变生产力的能力 </p>

<p>乙：影响力就是生产关系 </p>

<p>丁：是个嵌套关系 </p>

<p>乙：新生产力=旧生产力+生产关系 </p>

<p>乙：继续迭代 </p>

<p>乙：生产关系=K×生产力 </p>

<p>乙：所以说，一边努力提升自己的生产力，一边提高自己的生产关系吧 </p>

<p>乙：更新下：新生产力=旧生产力×生产关系 </p>

<p>乙：我觉得这样更合理 </p>

<p>丁：生产力=k*生产力^2? </p>

<p>乙：每次提升的生产关系K都不一样 </p>

<p>乙：所以是一系列K的乘法 </p>

<p>乙：每次的旧生产关系也都不一样 </p>

<p>乙：旧的生产力也不同 </p>

<p>乙：其实归根结底还是取决于生产力，你自己的能力和效率 </p>

<p>丁：细节有待商榷，基本框架基本理解，保留意见 </p>

<p>乙：如果你自己没能力，生产关系也不能提升你的生产力</p>

  </div>
</article>


  <article>
  <h2>
    <a href="/news/2009/03/13/Joke-Music-Strings/">
      这把伞是你的吗？
    </a>
  </h2>
  <span class="post-category">
    <span class="label">
      博文
    </span>
  </span>
  <div class="post-meta">
    <span class="post-date">
      13 Mar 2009
    </span>
    <a href="https://github.com/AcePeak" class="post-author">
      <img src="https://github.com/AcePeak.png" class="avatar" alt="AcePeak" width="24" height="24">
      AcePeak
    </a>
  </div>
  <div class="post-content">
    <p>1.王心凌《爱你》，S.H.E《我爱你》，Beyond《真的爱你》，李宗盛《我是真的爱你》，言承旭《我是真的真的很爱你》。 </p>

<p>点评：不用这么复杂吧！ </p>

<p>【Ace】想起来一个游戏。。。忘了名字～～～也是添加新的字上去</p>

<p>2.王菲《如果你是假的》，邓丽君《假如我是真的》，萧正楠《假如我是假的》。 </p>

<p>　点评：能退货么？ </p>

<p>【Ace】《假如你是真的》，我寒～～～</p>

<p>3.成龙《我是谁》，蟑螂《忘了我是谁》，蔡依林《你是谁》，许志安《忘了你是谁》。 </p>

<p>　点评：你们都需要脑白金！ </p>

<p>【Ace】换个顺序更好：《我是谁》《忘了你是谁》《你是谁》《忘了我是谁》。。。</p>

<p>4.萧亚轩《一辈子做你的女孩》，龙梅子《下辈子做你的女人》。 </p>

<p>　点评：不错，成熟了！ </p>

<p>5.朴树《我爱你 再见》，丁薇 《再见 我爱你》 </p>

<p>点评：不送…… </p>

<p>【Ace】想知道2楼掉下去和20楼掉下去的区别吗？听听这两首歌。</p>

<p>6.苏永康《男人不该让女人流泪》，陈小春《女人不该让男人太累》。 </p>

<p>点评：多么体贴的小夫妻啊！ </p>

<p>【Ace】男的听两首歌会觉得前面的是男人的责任，后者是女人没做好；女孩听的时候会觉得前者是男人没做好，后者是女人的责任。</p>

<p>7.姜育恒《爱我你怕了吗》，孙燕姿《害怕》，王力宏《不要害怕》，潘玮柏《我不怕》，赵薇《不怕》，郭美美《不怕不怕啦》，郑伊健《怕什么，什么也不怕》。 </p>

<p>　点评：真是人多胆子大！ </p>

<p>【Ace】小姜的表白有那么可怕吗？</p>

<p>8.董文华《春天的故事》，杨千桦《夏天的故事》，陈艾玲《秋天的故事》，马天宇《冬天的故事》。　　</p>

<p>　点评：小红帽，来！听狼外婆给你讲故事</p>

<p>【Ace】马天宇不容易啊，找到了这个缺口～～～</p>

  </div>
</article>


  <article>
  <h2>
    <a href="/news/2009/03/13/Joke-Is-This-Your-Umbrella/">
      这把伞是你的吗？
    </a>
  </h2>
  <span class="post-category">
    <span class="label">
      博文
    </span>
  </span>
  <div class="post-meta">
    <span class="post-date">
      13 Mar 2009
    </span>
    <a href="https://github.com/AcePeak" class="post-author">
      <img src="https://github.com/AcePeak.png" class="avatar" alt="AcePeak" width="24" height="24">
      AcePeak
    </a>
  </div>
  <div class="post-content">
    <p>话说昨天晚上浦东看房子看得比较晚也比较累，在浦电路等地铁的时候把伞放地下玩了玩手机。</p>

<p>过了几分钟抬头突然发现地铁来了就赶紧冲了进去。坐过了几站以后才发现伞没拿然后又回去拿伞，回去以后转了一圈发现没有。</p>

<p>就在踌躇间，忽然发现一个椅子上面有把伞，旁边有个女的，我眼睛就直直地看着那把伞，我能感觉那个女的就在看着我，而且一边看我一边看自己的伞，她的左手已经在朝那把伞伸去了。</p>

<p>然后我看了看那个女的，慢慢地问道“这把伞是你的吗？”，我还没说完，她就马上说“是“，看她那紧张的表情，心里面笑死我了，等我再找了一圈还是没发现，再走到她那里的时候，她已经把伞放到了怀里。。。</p>

<p>囧。。。</p>

  </div>
</article>


  <article>
  <h2>
    <a href="/news/2009/02/27/About-Career/">
      好文分享－不错的短文《所谓职业》
    </a>
  </h2>
  <span class="post-category">
    <span class="label">
      博文
    </span>
  </span>
  <div class="post-meta">
    <span class="post-date">
      27 Feb 2009
    </span>
    <a href="https://github.com/AcePeak" class="post-author">
      <img src="https://github.com/AcePeak.png" class="avatar" alt="AcePeak" width="24" height="24">
      AcePeak
    </a>
  </div>
  <div class="post-content">
    <p>所谓职业，无非是将自己变成一个聪明的勤快人。</p>

<p>2004年，集团下属科技公司改组，执行委员会找我谈话，决定派我去兼任科技公司的副总，负责整个公司的业务和人事安排。工作于是无厘头地增加了很多内容。 </p>

<p>当时公司招了大批应届本科和研究生毕业的新新人类。平均年龄25岁。那个新的助理，是经过多次面试后，我亲自招回来的一个女孩。名牌大学本科毕业，聪明、性格活泼。私下里我得承认，我招她的一个很重要的原因，除了她在大学里优秀的表现之外，还因为她写了一手漂亮的字。女孩能写一手好字的不多，尤其像她，看起来长发飘飘，多么女性化的一个姑娘，一手字却写得铿锵倜傥，让我对她不由多了很多好感。 </p>

<p>手把手地教。从工作流程到待人接物。她也学得快。很多工作一教就上手。一上手就熟练。跟各位同事也相处得颇融洽。我开始慢慢地给她一些协调的工作，各部门之间以及各分公司之间的业务联系和沟通让她尝试着去处理。 </p>

<p>开始经常出错。她很紧张，来找我谈。我告诉她：“错了没关系，你且放心按照你的想法去做。遇到问题了，来问我，我会告诉你该怎么办。”仍然错。又来找我，这次谈得比较深入，她的困惑是，为什么总是让她做这些琐碎的事情？我当时问她：“什么叫做不琐碎的工作呢？” </p>

<p>她答不上来，想了半天，跟我说：“我总觉得，我的能力不仅仅能做这些，我还能做一些更加重要的事情。”那次谈话，进行了一个小时。我知道，我说的话，她没听进去多少。后来我说：“先把手头的工作做好，避免常识性错误的发生，然后循序渐进吧。” </p>

<p>半年以后，她来找我，第一次提出辞职。我推掉了约会，跟她谈辞职的问题。问起辞职的原因，她跟我直言：“本科四年，功课优秀，没想到毕业后找到了工作，却每天处理的都是些琐碎的事情，没有成就感。”我又问她：“你觉得，在你现在所有的工作中，最没有意义的最浪费你的时间精力的工作是什么？”她马上答我：“帮您贴发票，然后报销，到财务去走流程，把现金拿回来给您。” </p>

<p>我笑着问她：“你帮我贴发票报销有半年了吧？通过这件事儿，你总结出了一些什么信息？”</p>

<p>她呆了半天，答我：“贴发票就是贴发票，只要财务上不出错不就行了呗，能有什么信息？”</p>

<p>我说，我来跟你讲讲当年我的做法吧：1998年的时候，我从财务被调到了总经理办公室，担任总经理助理的工作。其中有一项工作，就是跟你现在做的一样，帮总经理报销他所有的票据。本来这个工作就像你刚才说的，把票据贴好，然后完成财务上的流程，就可以了。 </p>

<p>其实票据是一种数据记录，它记录了和总经理乃至整个公司营运有关的费用情况。看起来没有意义的一堆数据，其实它们涉及了公司各方面的经营和运作。于是我建立了一个表格，将所有总经理在我这里报销的数据按照时间、数额、消费场所、联系人、电话等记录下来。 </p>

<p>我起初建立这个表格的目的很简单，我是想在财务上有据可循，同时万一我的上司有情况来询问我的时候，我会有准确的数据告诉他。通过这样的一份数据统计，渐渐地我发现了一些上级在商务活动中的规律，比如，哪一类的商务活动，经常在什么样的场合，费用预算大概是多少；总经理的公共关系常规和非常规的处理方式，等等。 </p>

<p>当我的上级发现，他布置工作给我的时候，我会处理得很妥帖。有一些信息是他根本没有告诉我的，我也能及时准确地处理。他问我为什么，我告诉了他我的工作方法和信息来源。 </p>

<p>渐渐地，他基于这种良性积累，越来越多地交代更加重要的工作。再渐渐地，一种信任和默契就此产生，我升职的时候，他说我是他用过的最好用的助理。</p>

<p>说完这些长篇大论，我看着这个姑娘，她愣愣地看着我。我跟她直言：“我觉得你最大的问题，是你没有用心。在看似简单不动脑子就能完成的工作里，你没有把你的心沉下去，所以，半年了，你觉得自己没有进步。”她不出声，但是收回了辞职报告。 </p>

<p>又坚持了三个月，她还是辞职了。这次我没有留她，让她走了。</p>

<p>后来她经常在MSN上跟我聊天，告诉我她的新工作的情况。一年内，她换了三份工作。每一次都坚持不了多久。每一次她都说新的工作不是她想要的工作。2005年的时候，她又一次辞职了，很苦恼，跑来找我，要跟我吃饭。我请她去写字楼后面的商场吃日本料理。吃到中途，忽然跟我说：“我有些明白你以前说的话是什么意思了。” </p>

<p>所谓的职业生涯，其实你很难预测到你将来真正要从事什么工作，将来所要从事的工作，是否跟你在大学里学的专业有关。大多数人，很有可能将来所做的工作，跟他当初所学的专业一点关系都没有。从22岁大学毕业到26岁之间这四年，不是你做了什么，重要的是你在工作中养成了怎么样的良好的工作习惯。这个良好的工作习惯指的是：认真、踏实的工作作风，以及是否学会了如何用最快的时间接受新的事物，发现新事物的内在规律，比别人更短时间内掌握这些规律并且处理好它们。具备了以上的要素，你就成长为一个被人信任的工作的人。 </p>

<p>人都有惰性，也都愿意用那些用起来顺手的人。当你具备了被人信任的基础，并且在日常的工作中逐渐表现出你的踏实、聪明和细致的时候，越来越多的工作机会就会提供到你面前。原因很简单，用一句话就能交代清楚并且能被你顺利完成的工作，谁愿意说三句话甚至半小时交代一个怎么都不明白的人呢？沟通也是一种成本，沟通的时间越少，内耗越少，这是作为管理者最清楚的一件事。 </p>

<p>当你有比别人更多的工作机会去接触那些你没有接触过的工作的时候，你就有了比别人多的学习机会，人人都喜欢聪明勤奋的学生，作为管理者，大概更是如此。 </p>

<p>一个新手，大多数新手，在这四年里，是看不出太大的差距的。但是这四年的经历，为以后职业生涯的发展奠定的基础，是至关重要的。很多人不在乎年轻时走弯路，很多人觉得日常的工作人人都能做好没什么了不起。然而就是这些简单的工作，循序渐进地、隐约地成为今后发展的分水岭。 </p>

<p>漫不经心地对待基层工作的最大损失，就是将看似简单的事物性处理方式，分界成为长远发展的能力问题。</p>

<p>聪明的人，总是不认为自己的能力有问题。时间长了，他会抱怨自己运气不好，抱怨那些看起来资质普通的人，总能比自己更能走狗屎运。抱怨她容貌比自己好，或者他更会讨领导欢心，等等。慢慢地，影响心态。所谓的怀才不遇，有时是这种情况。 </p>

<p>工作需要一个聪明人，工作其实更需要一个踏实的人。在聪明和踏实之间，我更愿意选择后者。而踏实，是人人都能做到的，和先天条件没有太大关系。</p>


  </div>
</article>


  <article>
  <h2>
    <a href="/news/2009/02/19/Joke-Maybe-Cow-Sick/">
      可能会有口蹄疫
    </a>
  </h2>
  <span class="post-category">
    <span class="label">
      博文
    </span>
  </span>
  <div class="post-meta">
    <span class="post-date">
      19 Feb 2009
    </span>
    <a href="https://github.com/AcePeak" class="post-author">
      <img src="https://github.com/AcePeak.png" class="avatar" alt="AcePeak" width="24" height="24">
      AcePeak
    </a>
  </div>
  <div class="post-content">
    <p>昨天和杨J在原味吃饭，上了一道菜是红烧带鱼。</p>

<p>杨J，“这个会不会有禽流感啊？”</p>

<p>我，“不会的，可能会有口蹄疫…”</p>

<p>jiong……</p>

  </div>
</article>


  <article>
  <h2>
    <a href="/news/2009/02/17/Joke-No-Matters-Neither-Him/">
      没事，他也没有
    </a>
  </h2>
  <span class="post-category">
    <span class="label">
      博文
    </span>
  </span>
  <div class="post-meta">
    <span class="post-date">
      17 Feb 2009
    </span>
    <a href="https://github.com/AcePeak" class="post-author">
      <img src="https://github.com/AcePeak.png" class="avatar" alt="AcePeak" width="24" height="24">
      AcePeak
    </a>
  </div>
  <div class="post-content">
    <p>今天打完球离开公司的时候和Steven，杨J一起走，因为公司有免费饮料所以他们一人拿了一瓶。</p>

<p>忽然Steven拿着手中的纸装橙汁大呼，“哎呀，我忘了拿吸管了。。。”</p>

<p>我沉着的看着他，指着正在喝灌装可乐的杨J说，“没事，他也没有～～～”</p>

<p>囧。。。</p>

  </div>
</article>


  <article>
  <h2>
    <a href="/news/2009/02/14/Houseman-Lovers-Day/">
      情人节的绝活亮相！
    </a>
  </h2>
  <span class="post-category">
    <span class="label">
      博文
    </span>
  </span>
  <div class="post-meta">
    <span class="post-date">
      14 Feb 2009
    </span>
    <a href="https://github.com/AcePeak" class="post-author">
      <img src="https://github.com/AcePeak.png" class="avatar" alt="AcePeak" width="24" height="24">
      AcePeak
    </a>
  </div>
  <div class="post-content">
    <p>今天情人节，对于咱孤家寡人，不想上街抢对对鸳鸯的戏，就宅在家了～，既然过节就要来点不同嘛，焖面！！！ </p>

<p>话说焖面可是我爸的绝学，做出来的那面，那豆角，那肉，都无法用语言表达那种酣畅淋漓的吃面快感，如果在我开吃焖面的第一口问我一个问题，我一定是吃完之后才有空来回答你～～～ </p>

<p>这个路数（Lousou），我经过潜心研究我爸十几年来各种技战术的卧底工作经验，结合我当前突飞猛进的做饭技巧，再加上我饥饿肚皮发出的3级警告信号，我觉得已经到了我来尝试一把的时候了。 </p>

<p>无奈，不能照搬我爸的那套路数，因为我没有高压锅，普通的锅只好客串一次主要容器了，豆角，肉，面中午买好，下午5点40开始准备，到6点40的时候搞定！！！ </p>

<p>结果嘛。。。非常的形似，看大部分（大部分？）东西都非常有胃口。但是至于神嘛，为了保证我们本篇乐观的文章风格，咱们还是放到下回再说吧。 </p>

<p>什么？不行？那好吧。。。怎么说呢，有以下几点： </p>

<ol>
  <li>
    <p>糊锅。我放面的时候下面都是豆角和肉，后来浇汤的时候用筷子轻轻拨了拨上面的面层而已，最后发现糊锅的都是面，它们怎么跑下去的～～～ </p>
  </li>
  <li>
    <p>面粘。最后出锅的时候，发现有些面还很湿。。。 </p>
  </li>
  <li>
    <p>油多。和上面可能算是同一点，那些湿面上面大部分都是油，吃起来有点小腻了～～～～ </p>
  </li>
  <li>
    <p>肉少。其实，我切肉的时候，起码也有十几片肉啊，为什么最后出锅以后我总共就吃到了2块呢？他们都跑去哪里了？ </p>
  </li>
</ol>

<p><img src="/img/090214_1.jpg" alt="面1" />
<img src="/img/090214_2.jpg" alt="面2" /></p>

<p>总的来说嘛，今天是个很好的尝试（也挺失败）。。。以后有机会再尝试好了～～～ </p>

  </div>
</article>


  <article>
  <h2>
    <a href="/news/2009/02/08/Introducing-WM-Softwares/">
      推荐的WM手机软件
    </a>
  </h2>
  <span class="post-category">
    <span class="label">
      博文
    </span>
  </span>
  <div class="post-meta">
    <span class="post-date">
      08 Feb 2009
    </span>
    <a href="https://github.com/AcePeak" class="post-author">
      <img src="https://github.com/AcePeak.png" class="avatar" alt="AcePeak" width="24" height="24">
      AcePeak
    </a>
  </div>
  <div class="post-content">
    <p>最近用了一个WM6.1 PPC手机，从网上搜罗了N多软件，好的不好的都拿来玩了一把，在这里列出一些我觉得WM系统必备的软件吧： </p>

<p>1,Resco Explorer </p>

<p>这个是资源管理器的增强版，有了这个就不要用自带的资源管理器了，打开Windows再也不用怀疑是死机了。 </p>

<p>2, Resco Registry Add-in </p>

<p>这个是注册表编辑器，有一些系统优化就需要这个东西来搞定了 </p>

<p>3,SmallMenu </p>

<p>这个东西会在开始的徽章那里多一个功能出来,生成另一个menu，这个menu相当于windows的快速启动,而且可以快速关闭程序 </p>

<p>4,iLuncher </p>

<p>这个东西可以让你的今日显示几个tab,每个tab下面都有不同的图标，相当于多tab的快捷方式组合,图标不大,放得挺多，可以当桌面用 </p>

<p>5,这个应该先说,安装CF2.0和CF3.5 </p>

<p>6,QuickClock </p>

<p>这个可以在桌面显示一个大钟,并且可以显示未接来电个数,未看短信个数,未看邮件个数,年月日 </p>

<p>7,AddinTimer </p>

<p>这个功能多多,可以定时提醒,定时飞行模式,定时群发单发短信(赞),定时电话，很多功能,自定义音乐,可以选择某个目录让它随机选择音乐提醒，定时变换情景,定时重启,定时运行程序什么的，可以放到今日,看到未结束的所有的定时项目，很好用 </p>

<p>8,手机千千静听 </p>

<p>这个听音乐很舒服,可以看歌词，不过歌词服务器和千千静听不是一个,所以歌词的质量不好，但是如果你音乐文件同一个目录下有同名的lrc文件,它也可以显示歌词 </p>

<p>9,CorePlayer </p>

<p>手机上的万能播放器,确实够万能的，连图片都可以看.. 你就当它暴风影音好了 </p>

<p>10, UCWEB </p>

<p>上网利器,流量不大,网页速度快,多页面模式，书签也很好用，我今天中午吃饭的地方就是用它上dianping和ddmap找到的 </p>

<p>11,KAV </p>

<p>手机上的卡巴斯基，新短信拦截查毒,陌生号码会问你是否加入黑名单.. 可以Full Scan，好像不消耗很多内存，平时驻留在今日右下角 </p>

<p>12,MDict </p>

<p>手机上的查词冠军,这个是免费的,比手机金山词霸好用，但是必须要下载词库，网上有很多对应词库,自己找找安装吧。我装的是4个：5mAll，现代汉语词典，维基百科050623，牛津英汉双解词典。 </p>

<p>13,MSN </p>

<p>14,QQ2008 </p>

<p>这都不用说 </p>

<p>15,PhoneArea </p>

<p>这个是查询来电归属的,手机来电的时候自动显示，平时运行也可以查询手机归属,身份证归属,区号等 </p>

<p>16,HandCalendar </p>

<p>万年历，有一些好玩的插件，历史上的今天啊，生理曲线啊，有个插件功能很囧：<女性安全期查询> </女性安全期查询></p>

<某丁> ...... 


17,MiniMap 

我觉得这个比手机GoogleMap好，因为Googlemap很慢,而且流量不菲，这个MiniMap不仅可以查地图,还可以查很多其他东西，和GoogleMap都可以当GPS用 


18,GPRS流量软件,我装了半天没装上,自己找吧，据说比较好的是GPRS Tranffic Monitor。我装了总是找不到网络。 


再说两个游戏凑20个吧： 


19，宝石迷阵2 

英文名叫：Astraware Bejeweled2，绝对是百玩不厌的游戏，画面效果好，而且很流畅。 


20，辰元斗地主 

这个斗地主是同类游戏里面做的最好的我觉得，声音是用的QQ游戏的声音，电脑智商很不稳定，但是出牌打牌都很稳定流畅，画面简单明了。 


有哥们可能会问，这些软件好多都是共享软件啊，用不了多久就不行了啊。我只想说一句话------我是中国人！
</某丁>

  </div>
</article>


  <article>
  <h2>
    <a href="/news/2009/02/02/Letter-To-Losing-Boy/">
      回复失恋男的来信
    </a>
  </h2>
  <span class="post-category">
    <span class="label">
      博文
    </span>
  </span>
  <div class="post-meta">
    <span class="post-date">
      02 Feb 2009
    </span>
    <a href="https://github.com/AcePeak" class="post-author">
      <img src="https://github.com/AcePeak.png" class="avatar" alt="AcePeak" width="24" height="24">
      AcePeak
    </a>
  </div>
  <div class="post-content">
    <p>老端注：这是我第一回收到感情方面的来信询问，发信人还是一位男性，由于本人非感情方面的专家，因此本不打算回复。但转念一想，用经济学和进化心理学知识是否也可以提供一些个人情感方面的帮助呢？毕竟这两方面我还稍微有点研究，说不定可以尝试一下。于是干脆隐去来信人姓名，贴上blog供大家共同研究。 </p>

<p>下面是来信内容： </p>

<p>=========================================== </p>

<p>老端，您好： </p>

<p>请允许我叫你老端，这样感觉像是我的大哥，我是从一年多之前开始看您的文章，陆陆续续一直到今天，我知道你写经济学、股票和心理学比较多一些，不过我今天想问的问题和这些关系不是很大，简单讲，我失恋了。 </p>

<p>先简要介绍一下自己吧，我出生在南方沿海一个小城市，大学在上海念，毕业之后也留在了上海，今年我26岁，也就是说，工作已经有4年了，也算是一个小白领吧，月收入不算很高，五千元出头一点，个人感觉自己长得还过得去。 </p>

<p>我女朋友是以前单位的同事，后来我们都换了工作，不过谈到现在也快有1年多了，她是上海人，长得不算非常漂亮，但也算比较漂亮了，年龄和我同岁。刚一开始到那家公司，我就被她给吸引住了，由于有工作往来，渐渐的就开始有了一些感情，有时候下班也会顺道一起走，刚一开始我就非常非常的爱她，感觉自己为她牺牲一切都值得，我想她应该也是爱我的。后来发展下去，我在她身上花了不少时间精力和钱，因为我觉得自己是非常爱她的。但后来由于工作变动，我们见面的时间减少了很多。忽然有一天，她告诉我，我们之间没有那种感觉，我也不知道她指的是什么感觉，反正由于没感觉，因此我们很难继续发展了。听到她这么说，我真是有一种说不出的感觉，似乎这个世界都没多少意思了。 </p>

<p>我这么写是不是让你感觉很傻？但是你不在我这个位置是不会知道我的苦闷的。有一段时间我真的是做什么事情都无聊，脑子里想的都是她，后来我问过她，她说主要是因为家里不同意，因为我按照目前的收入是买不起房子的，而且我家里也不算很富裕的那种。我也不知道这是她的借口还是什么，也有可能就是这个原因。但是我想我们的收入一起买一间外环附近的小房子，还是可能的吧。再说现在房价都开始下跌了。 </p>

<p>老端先生，我写了这么多其实也不知道想说什么。不知道以你的见识，能给我一些什么建议。我知道您肯定会说，喜欢一个女人那都是我的本能基因在作怪，可问题是我就是喜欢，怎么办呢？这次过年我也没有回家，就躲在上海喝闷酒，很希望能够看到您的回复。 </p>

<p>祝 顺利 </p>

<p>失恋男 </p>

<p>========================================== </p>

<p>以下是我的回复： </p>

<p>失恋男，你好： </p>

<p>据我所知，失恋之后会写信找人求助的男人是极少数，很幸运你就是那极少数之一。令我感到好奇的是，我又不是所谓的“知心大姐姐”，为什么你这封信会发到我这边？事实上我对你的问题是毫无办法，唯一的建议大约就是等待时间来给你疗伤吧。不过鉴于我略微知道一些经济学和心理学的知识，因此我打算从这两个角度给你一些建议，希望能够对你有帮助。 </p>

<p>首先我要指出的是，你失恋之后的消极心理状态是非常正常的行为，进化心理学对疼痛的定义就是能够持续唤起大脑注意的信号，这里的“疼痛”不仅仅是指生理上的，同时也是指心理上的，越是“痛”的事情，就越能够占用我们最多的注意力。由于你的失恋行为客观上妨碍了你达成自己的“繁衍成就”，因此随之而来的疼痛可以让你持续关注这件事，以找出解决问题的办法，事实上你这封信就是“疼痛”的产物，虽然我不认为这封信会对你起到多大帮助作用。 </p>

<p>第二点我要指出的是，你的年纪还太轻了，你才二十多岁，很难让女人对你产生多大兴趣。如果你熟悉巴菲特的投资方法，你就会知道，巴菲特是从来不买新股的，按照他的话说，新股没有太多的过往业绩，因此很难证明是一只能够持续带来回报的好股票。同样的，聪明的女人基本上不会对二十几岁的男人报以太大的希望，因为这个年龄段的男人才工作没几年，根本还看不出潜力在哪里，女人们与其在这类男人中挑选未来的黑马，还不如直接找一个三十几岁的成熟蓝筹更安全些。这就是为什么女人常常对成熟老男人动心的原因所在。 </p>

<p>第三点我要告诉你的是，你现在花费太多时间、精力和金钱在女人身上是很不明智的行为。你应该明白，谈恋爱是一场博弈游戏，二十五六岁的女孩子正好处于自身吸引力的顶峰，而你则明显不是。事实上很少有一场博弈游戏是在完全平等的状况下进行的，例如，购房者和开发商的博弈肯定是不平等的，布什和萨达姆的博弈也不平等，回乡农民工和票贩子的博弈更加不会平等。你和你前女友的博弈，在我看来也不平等，而很不幸，你把自己放在了一个劣势的地位上。既然男人可以希望女人长得漂亮，那么女人也同样可以希望男人有钱，这是很公平的交易，对方如果漂亮，那么她要求找一个买得起房子的男人不是很正常吗？问题是你这个年龄段的男人一般来说是买不起房子的。因此这是你的问题了，你不该把自己放在一个不平等的位置再去参与这场博弈游戏，孙子说：先胜而求战。他的意思是，局面对你有利，你才参加游戏，对你不利你就不要去参加了。所以我的建议很简单，二十多岁的时候你好好存钱、好好工作、好好投资、好好学习，乱七八糟的想法不要太多，所谓“筑巢引凤”，你就别盼着有凤来帮你筑巢了，当然这种人也不是说没有，那就要看你运气如何了。 </p>

<p>第四点我要指出的是，进化心理学家很早就已经证明了，女人寻求长期稳定婚姻看中的是两点，第一是能够提升社会地位；第二是能够提升生活水平。因此你最最应该关注的是如何才能提升你自己的社会地位和生活水平，这才是提升自身吸引力的正途，如果你把自己的全部聪明才智放在这两条上，我相信加以时日，你的前途不会太差的。所以请你放弃幻想，牢牢记住一点：凡是女人，都是虚荣和势利的，唯一的区别是程度各有不同。如果你希望进行简单（Easy）模式的婚姻博弈，那么找一个社会地位和生活水平低于你的伴侣；如果你希望进行正常（Normal）模式的婚姻博弈，那么找一个社会地位和生活水平和你相当的，即所谓门当户对的伴侣；如果你希望进行噩梦（Nightmare）级别的婚姻博弈，那么就找一个上海女孩吧，该模式不能save/load，升级速度慢，花费时间长，一旦失败就直接game over，适合希望接受挑战的专家级玩家，普通人连大Boss的面都见不到就挂了。 </p>

<p>第五，前面这些话似乎太理性了，以至于不太能够被接受吧，但是男性就是应该理性一些，所谓理性是指能够正确的基于形势作出判断，而感性是指，不管形势如何总是基于本能反映来作出判断。相对于女人，其实男人占的优势更大，由于一个人长得是美是丑是天生决定的，因此女人更容易相信命运的安排，而男人则不同，男人可以依靠自己的奋斗得到更多资源，因此男人的“可能性”会更多。所以，你可以把女人看作是债券，把男人看作是股票，前者更关注安全性，而后者更关注回报率。 </p>

<p>为了避免造成误解，我得把我的立场表个态，我对你的处境很同情，但是对你的某些做法并不认可，于是从经济博弈和进化心理学角度提出了一些看法，如果对你有帮助，我很高兴，如果没帮助，那就权当作笑话来看吧。另外，这篇东西我不希望被看作充满了歧视女性的言论，我不想作出任何道德上的批判，只是说了一些科学研究的事实。换言之，我也不认为你前女友的做法有什么错。你应该能够明白我的意思。 </p>

<p>最后祝你成功的从一只创业板的三线票成长为主板市场的大蓝筹，虽然困难重重，但你至少应该付出更多努力吧。再见。 </p>

<p>端宏斌</p>

  </div>
</article>


  <article>
  <h2>
    <a href="/news/2009/01/18/Yesterday-Today-Tomorrow/">
      Feedback for <The Sixth Sense>/《第六感》影评
    </a>
  </h2>
  <span class="post-category">
    <span class="label">
      博文
    </span>
  </span>
  <div class="post-meta">
    <span class="post-date">
      18 Jan 2009
    </span>
    <a href="https://github.com/AcePeak" class="post-author">
      <img src="https://github.com/AcePeak.png" class="avatar" alt="AcePeak" width="24" height="24">
      AcePeak
    </a>
  </div>
  <div class="post-content">
    <p>前几天的变化太突然太大太让人受不了，到现在仍然摆脱不了这些事情所引起的阴霾。这几天一直在思考。 </p>

<p>就在那些事发生前几天，我已经在思考我的未来。毕竟目前的工作非常没有前途，如果不是对产品一种慈父的爱和我们成功温馨的团队，我恐怕早就心灰意冷离开这里了。我曾和Samuel聊过，我们究竟未来可以做些什么。Samuel告诉我，我们现在所做的这个职业，这个产品，这份工作，是非常没有前途的，就算一年20万，30万，那又能如何？要想把自己的事业做好做大，必须要有人脉，你一个人再如何有才，再如何能干，你只是一个人，你影响的空间有限。当你有一个更广阔的圈子之后，你就可以依靠这些朋友去推广你以及你的理念，这才会创造更多的价值，回报当然也更大。当时我只想着这辈子找一个稳定些能做大做强的事业来在平时没事的时候来学习，准备；说实话，动机非常原始，下班无聊想找事情做。 </p>

<p>紧接着，公司发生了翻天覆地的变化。公司裁员，我们项目组的人首当其冲，一天之内7个人离开公司，大部分都是很要好的朋友。第二天项目组被宣布将在发布之后解散，人员将要重新配置到其他项目组。 </p>

<p>听到这个消息真的比被裁还要难受。这个产品基本就是我们自己设计编写的，我们全部人一起为之奋斗了4年，我们承认开始的时候一边在摸索一边在开发确实没有把产品做的足够好，但是在我们努力奋斗了几年之后，一直在变好，我们所有人对这个版本的产品都赋予厚望，加上市场有了一些反应和反馈，我们更加坚信我们的产品是有价值的，我们每个人都觉得还有很多事情想要做，想要让产品做得更好。最让我们割舍不下的是我们这个团队，在产品整个过程我们团队基本上没有什么大的改变，每个人都非常了解其他人，大家相处非常融洽其乐融融，大家都是老实人，都非常有能力，都非常的有职业精神。就我所知，我们的团队应该是上海2个office里面讨论最活跃，交流最没有压力最快速的项目组了。我们和大部分QA关系也都非常好，都很认真负责，私底下是朋友，对产品的感情都是真的。这样一群有着共同信仰共同情感的人们走在了一起，开开心心的过了4年，公司的一个变革瞬间令我们分崩瓦解，感慨良多。1年前我家人劝我如果别处有机会的话，可以去跳槽看看，我对家人说，对这个产品我还有很多事情想做但是没有做完，当产品翅膀硬了可以独自翱翔的时候我自然会离开，而且，我非常舍不得现在这个团队。 </p>

<p>这些天发生的这些事情，已经彻底让我对自己的明天有了更清晰的想法。在经历了那些事情之后，我仍然在思考我以后究竟可以把个人价值体现在哪里。我在思考我的事业，我的爱情，我的未来，我的优点和缺点，我能做出什么样的改变。这一系列事情让我有了这些思考。 </p>

<p>曾几何时，我一直很讨厌关系观。什么事情都要讲求关系，我很反感根据关系来办事，甚至当我家人想到动用关系来为我办事的时候我也非常的反感。现在，我对关系观没有一点厌恶之情了。关系观不正是为了朋友为了家人能够更好的生活吗？人生在世，我自己自问不能对国家做出多么出色的贡献，但是我有能力让我的家人我的朋友过上好日子，这就是我存在在这个世界上的价值。如果只是为了我自己兴趣高兴快乐，为了自己能活着而活着，这样有意义吗？如果公司裁员的时候我有能力帮助的话，他们就不需要为了再找工作而努力奔波四处寻找工作了，如果我有能力的话，我就可以留住这个温馨和睦的团队了。我只想以我的角度来试图挽救。 </p>

<p>由此我确定了我短期，长期的计划： 
1. 短期：提升能力，努力赚钱，达到家人无忧的程度。我要对家人负责任让他们过上好日子，尽可能减少他们受到的伤害。 
2. 长期：达到能够有能力尽可能帮助朋友的程度。如果我能够做到的话，我一定会做。</p>

  </div>
</article>


  <article>
  <h2>
    <a href="/news/2009/01/12/2008-Hot-Words/">
      08年流行语文
    </a>
  </h2>
  <span class="post-category">
    <span class="label">
      博文
    </span>
  </span>
  <div class="post-meta">
    <span class="post-date">
      12 Jan 2009
    </span>
    <a href="https://github.com/AcePeak" class="post-author">
      <img src="https://github.com/AcePeak.png" class="avatar" alt="AcePeak" width="24" height="24">
      AcePeak
    </a>
  </div>
  <div class="post-content">
    <p>http://news.qq.com/a/20090112/000550.htm这个更详细。。。</p>

<ol>
  <li>成语 </li>
</ol>

<p>欧阳挖坑：又叫月球挖坑，形容拥有一定身份的人说话极不负责任。欧阳院士一不小心，坑挖到了月球上去了。“多出来的那个坑很可能”这个结论与探月工程首席科学家的身份很不符合。参考：http://blog.sina.com.cn/s/blog_589a39ed01009z92.html </p>

<p>秋雨含泪：秋天的雨水里面含着泪水。秋雨本已肃杀，含泪更显冷酷，寓意帮闲文人阶级不顾平民百姓的疾苦粉饰太平。2008年6月，中国文人余秋雨“含泪劝告灾民”。痛斥灾民要求查清豆腐渣工程的正义行动。而在四川大地震中，成千上万的学生因校园迅速倒塌而丧生。“秋雨含泪”被引申为假惺惺的鳄鱼的眼泪。参考：http://baike.baidu.com/view/1694146.htm 
正龙拍虎：某人或某集团为利益所驱动而做假，被揭穿后还抵死不认；社会公信力缺失。大家基本都知道，而且时间过程比较长，直接看参考好了：http://baike.baidu.com/view/1278620.htm </p>

<p>兆山羡鬼：无耻文人王兆山，2008年6月在四川大地震发生后，面对6万多死难者竟作诗曰：“纵做鬼，也幸福”。“兆山羡鬼”被引申为冷血动物的代名词。例句：家中出了人命都不去看一下，你这不是“兆山羡鬼”吗？ </p>

<p>黔驴死撑：来自瓮安事件。意思大概是政府公信力缺失。 </p>

<p>聚打酱油：网络上不谈政治，不谈敏感话题，与自己无关，自己什么都不知道，就用此话回帖而已，相当于“路过”。 </p>

<p>抵制蠢货：意指鄙视那些不明白是非就怂恿别人一起进行某项活动的人。来自于法国支持ZD的家乐福事件。http://www.xici.net/u13743703/d69031287.htm </p>

<p>俯卧硬撑：同黔驴死撑。 </p>

<p>谁死鹿手：鹿死谁手，谁死鹿手。形容某些没有社会公德的企业所做的事情。来自三鹿事件。http://zhoubutong.blog.sohu.com/100061143.html </p>

<p>比赛第一：比赛第一，友谊第二。人们敢讲实话了。http://www.5jia1.com/uchome/space.php?uid=332202&amp;do=blog&amp;id=397457</p>

<p>叉腰健儿：谢亚龙出品。在网络上，该词多半被引申为不懂装懂，冒充内行。http://www.stnn.cc/sport/200808/t20080823_852343.html </p>

<p>自取其乳：网友感慨三鹿奶粉事件后征婚，条件须严苛至对女方乳腺发育状况的考核，借此确保子嗣有足够奶源，确保在进口奶粉吃不起、国产奶粉吃死人、国外奶粉要钱，国产奶粉要命的险恶境况下可以自取其乳。 </p>

<p>2。年度词组 
★年度风行：【囧】 
★年度震撼：【雷】 
★年度疯狂：【山寨】 
★年度婉约：【散步】 
★年度色情：【艳照门】 
★年度惊悚：【被自杀】 
★年度警醒：【限塑令】 
★年度蹊跷：【俯卧撑】 
★年度益智：【段子代沟】 
★年度科研：【集体世袭】 
★年度民生：【金融海啸】 
★年度悲悯：【心理包扎】 
★年度情势：【网络激辩】 
★年度发现：【气候觉醒】 
★年度新兴：【公益力量】 
★年度发明：【去愤青化】 
★年度学术：【网络政治】 
★年度悲哀：【新闻富矿】 
★年度悲恸：【汶川大地震】 
★年度温情：【全国哀悼日】 
★年度警觉：【万能时评家】 
★年度民心：【蔑视性沉默】 
★年度荒唐：【反二奶同盟】 
★年度长嗟：【内涵式脑残】 
★年度棒喝：【缺德市场经济】 </p>

<p>3。年度短语 
★年度奇喻：【红得尿血】 
★年度豪迈：【很黄很暴力】 
★年度情色：【弄他！弄他！】 
★年度废话：【这是为什么呢？】 
★年度脑残：【无性经历者优先】 
★年度委婉：【圭寸杀殳三易口隹】 
★年度小资：【她的皮肤像形容词】 
★年度诡谲：【我出来是打酱油的】 
★年度美好：【趁兜里还有毛主席】 
★年度忽悠：【让艳照门成为历史】 
★年度祝福：【鼠年你是所有人的大米】 
★年度透彻：【缺乏辩论的大会是寂寞的】 
★年度调笑：【我忍不住英俊地笑了起来】 
★年度坚韧：【拆生命的房子，盖小说的房子】 
★年度缺氧：【只要小葱穿热裤，吧主全是流氓兔】 
★年度嗟叹：【我们无法用一页博客覆盖整个生活】 
★年度悬疑：【是什么让一个拿相机的手拿起了刀？】 
★年度洞穿：【我们在出生的那一天起就叫刘亚玲了】 
★年度睿智：【一个正在用百米冲刺的速度跑马拉松的国度】 
★年度励志：【你有什么不开心的事？说出来让大家开心一下】 
★年度辛酸：【妈妈正细心裁剪一小块一小块黑夜做你棉衣的衬】 
★年度爆笑：【女人是水做的，男人是泥做的，李俊基李宇春是水泥做的】</p>

  </div>
</article>


  <article>
  <h2>
    <a href="/news/2009/01/10/Life-tricks/">
      你一定能用上的生活小绝招～
    </a>
  </h2>
  <span class="post-category">
    <span class="label">
      博文
    </span>
  </span>
  <div class="post-meta">
    <span class="post-date">
      10 Jan 2009
    </span>
    <a href="https://github.com/AcePeak" class="post-author">
      <img src="https://github.com/AcePeak.png" class="avatar" alt="AcePeak" width="24" height="24">
      AcePeak
    </a>
  </div>
  <div class="post-content">
    <p>天涯上看来的，大家分享一下吧～ </p>

<p>1.吃了辣的东西，感觉就要被辣死了，就往嘴里放上少许盐，含一下，吐掉，漱下口，就不辣了； </p>

<p>2.牙齿黄，可以把花生嚼碎后含在嘴里，并刷牙三分钟，很有效； </p>

<p>3.若有小面积皮肤损伤或者烧伤、烫伤，抹上少许牙膏，可立即止血止痛； </p>

<p>4.经常装茶的杯子里面留下难看的茶渍，用牙膏洗之，非常干净； </p>

<p>5.仰头点眼药水时微微张嘴，这样眼睛就不会乱眨了； </p>

<p>6.嘴里有溃疡，就用维生素C贴在溃疡处，等它溶化后溃疡基本就好了； </p>

<p>7.眼睛进了小灰尘，闭上眼睛用力咳嗽几下，灰尘就会自己出来； </p>

<p>8.洗完脸后，用手指沾些细盐在鼻头两侧轻轻按摩，然后再用清水冲洗，黑头和粉刺就会清除干净，毛细孔也会变小； </p>

<p>9.刚刚被蚊子咬完时，涂上肥皂就不会痒了； </p>

<p>10.如果嗓子、牙龈发炎了，在晚上把西瓜切成小块，沾着盐吃，记得一定要是晚上，当时症状就会减轻，第二天就好了； </p>

<p>11.吹风机对着标签吹，等吹到商标的胶热了，就可以很容易的把标签撕下来； </p>

<p>12.旅行带衣服时如果怕压起褶皱，可以把每件衣服都卷成卷； </p>

<p>13.打打嗝时就喝点醋，立杆见影； </p>

<p>14.吃了有异味的东西，如大蒜、臭豆腐，吃几颗花生米就好了； </p>

<p>15.治疗咳嗽，特别是干咳，晚上睡觉前，用纯芝麻香油煎鸡蛋，油放稍多些，什么调味料都不要放，趁热吃过就去睡觉，连吃几天效果很明显； </p>

<p>16.手腕长粗的MM想带较细的手镯，就不能硬带，应把手上套上一个塑料袋再带上手镯，非常好带，也不会把手弄疼，取下也是同样的方法； </p>

<p>17.栗子皮难剥，先把外壳剥掉，再把它放进微波炉转一下，拿出后趁热一搓，皮就掉了； </p>

<p>18.插花时，在水里滴上一滴洗洁精，可以维持好几天； </p>

<p>19.把核桃放进锅里蒸十分钟，取出放在凉水里再砸开，就能取出完整的桃核仁了； </p>

<p>20.把虾仁放进碗里，加一点精盐、食用碱粉，用手抓搓一会儿后用清水浸泡，然后再用清水冲洗，即能使炒出的虾仁透明如水晶，爽嫩可口； </p>

<p>21.炒肉时，先把肉用小苏打水浸泡十几分钟，倒掉水，再入味，炒出来会很嫩滑； </p>

<p>22.将残茶叶浸入水中数天后，浇在植物根部，可促进植物生长； </p>

<p>23.把残茶叶晒干，放到厕所或者沟渠里燃熏，可消除恶臭，具有驱除蚊子苍蝇的功能； </p>

<p>24.夹生饭重煮法：可用筷子在饭内扎些直通锅底的孔，洒入少许黄酒重焖， </p>

<p>25.若只表面夹生，只要将表层翻到中间再焖即可； </p>

<p>26.巧除纱窗油腻：将洗衣服、吸烟剩下的烟头一起放在水里，待溶解后，拿来擦玻璃窗、纱窗，效果真不错； </p>

<p>27.只要在珠宝盒中放上一节小小的粉笔，即可让首饰常保光泽； </p>

<p>28.桌子、瓶子表面的不干胶痕迹用风油精可以擦拭； </p>

<p>29.出门时随时在包里带一节小的干电池，若裙子带静电，就把电池的正极在裙子上面擦几下即可去掉静电； </p>

<p>30.不管是鞋子的哪个地方磨到了你的脚，你就在鞋子磨脚的地方涂一点点白酒，保证就不磨脚了； </p>

<p>31.亨调蔬菜时，如果必须要焯，焯好菜的水最好尽量利用。如做水饺的菜，焯好的水可适量放在肉馅里，这样既保证营养，又使水饺馅味美有汤； </p>

<p>32.夏天足部容易出汗，每天用淡盐水泡脚可有效应对汗脚； </p>

<p>33.夏天游泳后晒晒太阳，可防肌肤劳损等疾病发生； </p>

<p>34.夏天枕头易受潮滋生霉菌，时常曝晒枕芯有利健康； </p>

<p>35.多吃薏米小豆粥等潮湿健脾，可防暑湿； </p>

<p>36.防失眠：睡前少讲太多话，忌饮浓茶，睡前勿大用脑，可用热水加醋洗脚； </p>

<p>37.金银花有疏散风湿功效，金银花水煎取汁凉后与蜂蜜冲调可解暑； </p>

<p>38.吃过于肥腻的食物后喝茶，能刺激自律神经，促进脂肪代谢； </p>

<p>39.睡眠不足会变笨，一天需要睡眠八小时，有午睡习惯可延缓衰老； </p>

<p>40.双手易变得干燥粗糙，用醋泡手十分钟可护肤； </p>

<p>41.夏天擦拭凉席，用滴加了花露水的清水擦拭凉席，可使凉席保持清爽洁净。当然，擦拭时最好沿着凉席纹路进行，以便花露水渗透到凉席的纹路缝隙，这样清凉舒适的感觉会更持久； </p>

<p>42.早餐多食西红柿、柠檬酸等酸性蔬菜和水果，有益于养肝； </p>

<p>43.爽身止痒洗头或洗澡时，在水中加五六滴花露水，能起到很好的清凉除菌、祛痱止痒作用； </p>

<p>44.葡萄含有睡眠辅助激素，常食有助睡眠； </p>

<p>45.夏天多喝番茄汤既可获得养料，又能补充水分，番茄汤应烧好并冷却后再喝，所含番茄红素有一定的抗前列腺癌和保护心肌的功效，最适合于男子；吃酸性物质马上刷牙会损害牙齿健康； </p>

<p>46.因外伤碰破皮肉时，在伤处涂上牙膏进行消炎、止血，再包扎，作为临时急救药，以药物牙膏效果最为显著； </p>

<p>47.将白醋喷洒在菜板上，放上半小时后再洗，不但能杀菌，还能除味； </p>

<p>48.喝酸奶能解酒后烦躁，酸奶能保护胃黏膜、延缓酒精吸收，并且含钙丰富，对缓解酒后烦躁尤其有效；</p>

<p>49.皮鞋包皮放久了发霉时，可用软布蘸酒精加水（1：1）溶液擦拭即可； </p>

<p>50.发生头痛、头晕时，可在太阳穴涂上牙膏，因为牙膏含有薄荷脑、丁香油可镇痛； </p>

<p>51.蜡烛冷冻二十四小时后，再插到生日蛋糕上，点燃时不会流下烛油； </p>

<p>52.白色衣裤洗后易泛黄，可取一盆清水，滴上二三滴蓝墨水，将洗过的衣裤在浸泡一刻钟，不必拧干，就放在太阳下晒，即可洁白干净； </p>

<p>53.过多食用生葱蒜会刺激口腔肠胃， 不利健康，最好加一点醋再食用； </p>

<p>54.及时补充水分但应少喝果汁、可乐、雪碧、汽水等饮料，含有较多的糖精和电解质，喝多了会对肠胃产生不良刺激，影响消化和食欲。因此夏天应多喝白开水或淡盐（糖）水； </p>

<p>55.每天早晨用豆腐摩擦面部几分钟，坚持一个月，面部会变得很滋润； </p>

<p>56.空调室内温差不宜超过五度，即使天气再热，空调室内温度也不宜到24度以下； </p>

<p>57.加酶洗衣粉剂放在温水中需要较长的分解时间才能使洗衣效果更佳； </p>

<p>58.夏天，人的活动时间变长，出汗多，耗能过大，应适当多吃鸡、鸭、瘦肉、鱼类、蛋类等营养食品，以满足人体的代谢需要； </p>

<p>59.头痛时把苹果磨成泥状涂在纱布上，贴在头痛处，症状可减轻； </p>

<p>60.皮包上有污渍，可以用棉花蘸风油精擦拭</p>

  </div>
</article>


  <article>
  <h2>
    <a href="/news/2009/01/03/Movie-Feedback-The-Sixth-Sense/">
      Feedback for <The Sixth Sense>/《第六感》影评
    </a>
  </h2>
  <span class="post-category">
    <span class="label">
      博文
    </span>
  </span>
  <div class="post-meta">
    <span class="post-date">
      03 Jan 2009
    </span>
    <a href="https://github.com/AcePeak" class="post-author">
      <img src="https://github.com/AcePeak.png" class="avatar" alt="AcePeak" width="24" height="24">
      AcePeak
    </a>
  </div>
  <div class="post-content">
    <the sixth="" sense=""> movie is defined as a psychological horror film which I thought is to scare people, but actually it is wrong. All I can see from this film is real love. 


Cole, the boy who can see dead people, only lives with her mother. But because of Cole's ability, he was always in scared and did not expect to tell his mother. The mom could do everything for her son without any daults, and they love each other all the time. After the boy did not scared by his own ability, when he spoke out his own secrets and her mom's secrets, their hearts went together finally. I can never forget the scene that they hugged with each other tightly after those horrible things happened. This is the real maternal love. 


Another scene which can't stop me from weeping is the end that Crowe talked to her wife. In fact, he is already dead man but he did not know about this before the end, he heared his wife is missing him in the dream but he can't wake her up. He can only talk to her in her dream and express his missing. When the wedding ring falls upon the ground, everything comes clear, and the real love between Crowe and his wife comes clear: She always loves him. I indeed can't stop my tears rolled down my cheek at this moment. 


Another example about love is the Collins. Kyra Collins is the dead girl who was murdered by her mother, the movie did not tell us why she did not tell her dad when she lives, but I guess she did not expect to expose the fact that her mother wants her die is because she still wants to have a happy family and she loves the others so she did not expect the family is broken down. It's the her love to family. 


Actually the secret would be hidden forever if the mother did not hurt her sister by the same way. Kyra loves her sister and she doesn't want her get hurt anymore so she has to expose it to her farther via Cole. That's the affections bettwen elder and younger sisters. 


The love scatters throughout, I think we'd better remember what the film wants to tell us: Please treasure your loves. 




看一部电影写一个影评。为了让大家明白什么意思，我翻译如下（因为我先写的英文，翻译不一定表达得对，事实上，英文也不一定好，见谅）： 




《第六感》一直以来被定义为一个恐怖片，但事实上它并不是。我从这部电影所看到的主题是----爱。 


Cole是一个能看到死人的小孩，他和他的妈妈一起住。但是由于Cole的这个特别的能力，使得他自己一直生活在恐惧中并且不想告诉他的妈妈。毫无疑问，妈妈肯为了Cole做任何事情。他们一直很爱对方。在这个孩子克服了自己的恐惧，并且告诉了妈妈他的秘密和他妈妈的秘密之后，他们的心终于贴到了一起。我永远也无法忘记在一系列恐怖事情发生之后，他们重新紧紧地拥抱。这是真正的母子之爱。 


我还为了电影中的另一幕而潸然泪下，那就是Crowe和他妻子对话的那个结局部分。事实上，大部分情况下他自己都已经是一个死人，只是他自己并不知道。当他回来以后听到妻子在梦中想念他但是他却并不能叫醒她。他终于知道了事情真相，他于是只能在妻子的梦里来表达他的思念之情。当他自己那颗结婚戒指掉落到地面的一霎那，所有的事情都清楚了，他们之间的爱也清楚了：她仍然在爱着他。在这一刻，我真的无法阻止眼泪从脸颊落下。 


关于爱的另一个例子是Collins一家的遭遇。Kyla被自己的母亲长期喂药谋杀而死，这部影片并没有告诉我们为什么Kyla并没有在自己活着的时候告诉自己的父亲，但我猜她不想把这件事情公之于众正是因为她想有一个快乐的家庭。她爱每个人所以她不希望这个家最后四分五裂。这就是她对这个家的那份感情。 


如果她妈妈不对她的妹妹做同样事情的话，我想这个秘密会被永远雪藏。Kyla爱她的妹妹，她并不想自己的妹妹再受到伤害，所以她不得不把这样的消息通过Cole告诉自己的父亲。这是姐妹手足之情。 


爱贯穿始终，我想我们应该记住这部电影真正想要告诉我们的：请珍惜我们的爱。
</the>

  </div>
</article>


  <article>
  <h2>
    <a href="/news/2009/01/01/Joke-Japanese-Cannot-Find/">
      日本鬼子来了也找不到！
    </a>
  </h2>
  <span class="post-category">
    <span class="label">
      博文
    </span>
  </span>
  <div class="post-meta">
    <span class="post-date">
      01 Jan 2009
    </span>
    <a href="https://github.com/AcePeak" class="post-author">
      <img src="https://github.com/AcePeak.png" class="avatar" alt="AcePeak" width="24" height="24">
      AcePeak
    </a>
  </div>
  <div class="post-content">
    <p>今天和老妈聊天，老妈说起了一件事。 </p>

<p>我妈爱干净，经常勤奋的收拾厨房，对厨房每个物品都想有个理想的摆放地点，有一次老妈下定决心收拾了一天厨房，把所有的餐具什么的都摆到了她认为很合适的地方。 </p>

<p>第二天我老爸做饭的时候，把厨房翻了个底朝天都没找到以前放在某处的东西，最后我妈去一下就找到了，我爸说了句：“你这样放，就是日本鬼子来扫荡都找不到！”。 </p>

<p>吃完饭我妈收拾厨房的时候，又把东西放到新位置。结果过了几天可怜的我爸又做饭的时候又找不到了~~~~ </p>

<p>囧~~~</p>

  </div>
</article>


  <article>
  <h2>
    <a href="/news/2008/12/28/About-Destiny/">
      关于投资的谈话
    </a>
  </h2>
  <span class="post-category">
    <span class="label">
      博文
    </span>
  </span>
  <div class="post-meta">
    <span class="post-date">
      28 Dec 2008
    </span>
    <a href="https://github.com/AcePeak" class="post-author">
      <img src="https://github.com/AcePeak.png" class="avatar" alt="AcePeak" width="24" height="24">
      AcePeak
    </a>
  </div>
  <div class="post-content">
    <p>[甲]“结婚是靠缘分，没有缘分再好也走不到一块去”非诚勿扰的台词 </p>

<p>[甲]“如果一定要结婚，又不可以跟自己爱的人在一起，那起码要找个知己”台词 </p>

<p>[乙]其实 </p>

<p>[乙]一直以来人们都被忽悠了 </p>

<p>[乙]什么是缘分 </p>

<p>[乙]你知道吗？ </p>

<p>[甲]恩 </p>

<p>[甲]就是无数的巧合碰一块，触动了你心里的那根弦 </p>

<p>[甲]你觉得呢 </p>

<p>[乙]不是   </p>

<p>[甲]那你说 </p>

<p>[乙]缘分是事后认为而已 </p>

<p>[乙]过程到底发生了什么？ </p>

<p>[乙]过程是两个人相互努力的过程 </p>

<p>[甲]可是，没有那么些巧遇，怎么会有以后的过程 </p>

<p>[乙]没有相互努力不会有结果，你觉得开始觉得有缘分的人最终一定会走到一起吗？ </p>

<p>[甲]那就是缘分不到 </p>

<p>[甲]我相信有缘，真是宿命论 </p>

<p>[乙]缘分不到仍然是事后的说法 </p>

<p>[甲]这虽然是宿命论，但是我信 </p>

<p>[甲]缘分会让你有那么一瞬的感觉 </p>

<p>[甲]佛不说吗？机缘济会 </p>

<p>[乙]这都是为了让劳苦大众自我安慰而已 </p>

<p>[乙]试想，当你和某人觉得有缘的时候，你们一定会在一起吗？ </p>

<p>[乙]那么有缘代表什么呢？ </p>

<p>[甲]不一定会 </p>

<p>[甲]但是缘分让你有了那么段美好的回忆 </p>

<p>[甲]这就够了 </p>

<p>[甲]就跟一个寓言说的 </p>

<p>[乙]缘分完全都是事后的说法 </p>

<p>[乙]关键在于过程你们是否双方都付出了努力 </p>

<p>[乙]当结婚的时候，会说我们真有缘份 </p>

<p>[乙]当离婚的时候，会说可能我们没有缘分 </p>

<p>[甲]百年修的同船度，千年修的共枕眠 </p>

<p>[乙]当复婚的时候，会说我们还真有缘分 </p>

<p>[甲]不是那么个说法 </p>

<p>[甲]有的人只有缘分做朋友，有的人却有缘分做夫妻 </p>

<p>[甲]不是有缘无缘，而是缘分多少 </p>

<p>[乙]如此说来，这个道理其实就是万事万物都是由联系的，只不过有的联系多些有的联系少些，联系=缘 </p>

<p>[甲]你终于有所悟 </p>

<p>[甲]可以这么说 </p>

<p>[乙]你要明白，一个事物和另一个事物的联系可以被这两个事物共同决定，而不是说两个事物生来就有固定的联系 </p>

<p>[乙]甚至可以被许多其他事物所联系 </p>

<p>[乙]所决定 </p>

<p>[甲]如果没有撞见，会有共同努力吗 </p>

<p>[甲]只有去寻去碰，才会有希望 </p>

<p>[乙]如果到了另一个地方，你仍然会和另外的人发生联系 </p>

<p>[甲]对 </p>

<p>[甲]可是，那根弦有可能将你带回原来的起点 </p>

<p>[乙]所以说，你和别人中的一个有缘是真的，并不是说你和某个固定的人有缘是真的 </p>

  </div>
</article>


  <article>
  <h2>
    <a href="/news/2008/12/21/About-Investment/">
      关于投资的谈话
    </a>
  </h2>
  <span class="post-category">
    <span class="label">
      博文
    </span>
  </span>
  <div class="post-meta">
    <span class="post-date">
      21 Dec 2008
    </span>
    <a href="https://github.com/AcePeak" class="post-author">
      <img src="https://github.com/AcePeak.png" class="avatar" alt="AcePeak" width="24" height="24">
      AcePeak
    </a>
  </div>
  <div class="post-content">
    <p>[甲]你炒股吗 </p>

<p>[乙]不 </p>

<p>[乙]我向来不去高风险的地方 </p>

<p>[甲]那不是高风险 </p>

<p>[甲]是投资 </p>

<p>[甲]现在人必须有投资意识 </p>

<p>[甲]怎么也比钱存银行强 </p>

<p>[乙]呵呵，炒股确实是一种投资，但是在中国炒股是一种投机 </p>

<p>[甲]可以这么说吧 </p>

<p>[甲]国家不是正在让股市走上正轨吗 </p>

<p>[甲]要对政府有信心 </p>

<p>[乙]我是比较要求稳的那种。。 </p>

<p>[甲]我觉得炒股是一个成年人玩的游戏 </p>

<p>[甲]那你喜欢兢兢业业过日子 </p>

<p>[甲]节俭着过 </p>

<p>[乙]错了，我正觉得炒股是成年人用未成年人心态玩的游戏 </p>

<p>[甲]不见得,挑股票也有学问,不是瞎摸的 </p>

<p>[甲]如果你要求稳,你可以去买国债 </p>

<p>[甲]绝对保本,也有收益 </p>

<p>[甲]我最近比较喜欢中央二套的经济节目 </p>

<p>[甲]好多讲得比较好 </p>

<p>[乙]当你不能完全掌控一件事物的时候就去进行所谓的投资，这种情形完全是在看运气。 </p>

<p>[乙]国债可以考虑，但是如果这部分钱拿出来进行更有意义的活动不是更好吗？ </p>

<p>[甲]你要分析一下大势是在爬坡还是下坡就行了,不是你想象的那么可怕 </p>

<p>[甲]那你平常拿出这些钱来作什么 </p>

<p>[乙]如果我拿出这部分钱去学习某项技能，这项技能可能以后会在我被裁员的时候救我一命，或者可以让我每年增加几万的额外收益，这样不是
更好么？ </p>

<p>[乙]能不能学好一项技能恰恰是我们所能掌控的 </p>

<p>[甲]你说的是培训 </p>

<p>[甲]你说的固然有理,可是你没想过自己当自己的老板 </p>

<p>[乙]还有一点，怎么说，我现在还没有房贷压力可能不能体会。这部分钱用来提升生活质量 </p>

<p>[乙]正因为我不去炒股，所以我自己是自己的老板；如果我拿去投资，别人是这些钱的老板 </p>

<p>[甲]不是有句老话说的好:吃不穷,穿不穷,算计不到一辈子穷 </p>

<p>[乙]钱固然重要，但是更重要的是心态，总是想着钱，这辈子钱就是自己的主人了 </p>

<p>[甲]可能工作性质不同所导致的吧,我们这边只要签约,只要你不走,单位不会开除你的 </p>

<p>[甲]所以我们闲着没事,就会考虑这些事情 </p>

<p>[乙]呵呵，我上面所说的只是我个人想法 </p>

  </div>
</article>


  <article>
  <h2>
    <a href="/news/2006/05/19/CPP-Test-English/">
      C++ STL 习题
    </a>
  </h2>
  <span class="post-category">
    <span class="label">
      desktop
    </span>
  </span>
  <div class="post-meta">
    <span class="post-date">
      19 May 2006
    </span>
    <a href="https://github.com/AcePeak" class="post-author">
      <img src="https://github.com/AcePeak.png" class="avatar" alt="AcePeak" width="24" height="24">
      AcePeak
    </a>
  </div>
  <div class="post-content">
    <h1 id="questions">Questions:</h1>

<h2 id="base">BASE:</h2>

<ol>
  <li>which are wrong?</li>
</ol>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="kt">int</span> <span class="n">ia</span><span class="p">[</span> <span class="mi">7</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span> <span class="p">};</span>
<span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="n">vector</span><span class="o">&lt;</span> <span class="n">vector</span><span class="o">&lt;</span> <span class="kt">int</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">ivec</span><span class="p">;</span>
<span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="n">vector</span><span class="o">&lt;</span> <span class="kt">int</span> <span class="o">&gt;</span> <span class="n">ivec</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span> <span class="p">};</span>
<span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="n">vector</span><span class="o">&lt;</span> <span class="kt">int</span> <span class="o">&gt;</span> <span class="n">ivec</span><span class="p">(</span> <span class="n">ia</span><span class="p">,</span> <span class="n">ia</span><span class="o">+</span><span class="mi">7</span> <span class="p">);</span>
<span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="n">vector</span><span class="o">&lt;</span> <span class="n">string</span> <span class="o">&gt;</span> <span class="n">svec</span> <span class="o">=</span> <span class="n">ivec</span><span class="p">;</span>
<span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="n">vector</span><span class="o">&lt;</span> <span class="n">string</span> <span class="o">&gt;</span> <span class="n">svec</span><span class="p">(</span> <span class="mi">10</span><span class="p">,</span> <span class="n">string</span><span class="p">(</span> <span class="s">&quot;null&quot;</span> <span class="p">));</span></code></pre></div>

<ol>
  <li>Change code style to STL and compare their efficiency.</li>
</ol>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="c1">// ***** C-style character string implementation *****</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">errors</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">pc</span> <span class="o">=</span> <span class="s">&quot;a very long literal string&quot;</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span> <span class="kt">int</span> <span class="n">ix</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">ix</span> <span class="o">&lt;</span> <span class="mi">1000000</span><span class="p">;</span> <span class="o">++</span><span class="n">ix</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span> <span class="n">pc</span> <span class="p">);</span>
        <span class="kt">char</span> <span class="o">*</span><span class="n">pc2</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span> <span class="n">len</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">];</span>
        <span class="n">strcpy</span><span class="p">(</span> <span class="n">pc2</span><span class="p">,</span> <span class="n">pc</span> <span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span> <span class="n">strcmp</span><span class="p">(</span> <span class="n">pc2</span><span class="p">,</span> <span class="n">pc</span> <span class="p">))</span>
            <span class="o">++</span><span class="n">errors</span><span class="p">;</span>
        <span class="k">delete</span> <span class="p">[]</span> <span class="n">pc2</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;C-style character strings: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">errors</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; errors occurred.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p>3.accept some ints from standard input, then sort them and output to standard output. Please use STL as far as possible.</p>

<h2 id="advanced">ADVANCED:</h2>

<p>1.What are the types of std::cin and std::cout? Write a console program ECHO that can be invoked by the following ways:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">ECHO</span> <span class="o">[</span><span class="n">infile</span><span class="o">]</span> <span class="o">[</span><span class="n">outfile</span><span class="o">]</span>                             <span class="sr">//</span><span class="o">[]</span> <span class="n">indicates</span> <span class="n">the</span> <span class="n">infile</span> <span class="n">is</span> <span class="ow">not</span> <span class="n">necessary</span><span class="o">.</span>
                                                        <span class="sr">//</span><span class="n">there</span> <span class="n">must</span> <span class="n">be</span> <span class="n">one</span> <span class="ow">and</span> <span class="n">only</span> <span class="n">one</span> <span class="n">between</span> <span class="o">-</span><span class="n">i</span> <span class="ow">and</span> <span class="o">-</span><span class="n">s</span><span class="o">.</span>
<span class="no">The</span> <span class="nb">test</span> <span class="k">case</span> <span class="n">are</span> <span class="p">:</span>

    <span class="no">ECHO</span> <span class="n">infile</span><span class="o">.</span><span class="n">txt</span> <span class="n">outfile</span><span class="o">.</span><span class="n">txt</span>                         <span class="sr">//</span><span class="n">read</span> <span class="n">from</span> <span class="n">infile</span><span class="o">.</span><span class="n">txt</span> <span class="ow">and</span> <span class="n">write</span> <span class="n">to</span> <span class="n">outfile</span><span class="o">.</span><span class="n">txt</span><span class="o">.</span>
    <span class="no">ECHO</span> <span class="n">infile</span><span class="o">.</span><span class="n">txt</span>                                     <span class="sr">//</span><span class="n">read</span> <span class="n">from</span> <span class="n">infile</span><span class="o">.</span><span class="n">txt</span> <span class="ow">and</span> <span class="n">write</span> <span class="n">to</span> <span class="n">screen</span><span class="o">.</span>
    <span class="no">ECHO</span>                                                <span class="sr">//</span><span class="n">read</span> <span class="n">from</span> <span class="n">standard</span> <span class="n">input</span> <span class="ow">and</span> <span class="n">write</span> <span class="n">to</span> <span class="n">standard</span> <span class="n">output</span><span class="o">.</span>
    
<span class="sr">//</span><span class="ss">related</span><span class="p">:</span><span class="n">ofstream</span><span class="p">,</span> <span class="n">ifstream</span><span class="p">,</span> <span class="n">ostream</span><span class="p">,</span> <span class="n">istream</span><span class="o">.</span></code></pre></div>

<p>2.Try your best to write a class to implement two-dimensional arrays like built-in type.</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="kt">int</span> <span class="n">a</span><span class="p">[</span><span class="mi">10</span><span class="p">][</span><span class="mi">10</span><span class="p">];</span>
    <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
    
    <span class="n">YourClass</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">yc</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">);</span>
    <span class="n">yc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span></code></pre></div>

<p>3.write a program to process students’ scores table(by using map/multimap).
    a.student infomation is like this:
            name, C++ basic score, C++ OOP score, C++ template score, C++ STL score, C++ MFC score
    b.sort by name.
    d.traverse infotable and generate the total score and average score to another table.
    e.output name, total score, average score and place for each student sorting by place.</p>

<ol>
  <li>write a program to read words and calculate every word’s frequency from a file. Output the 20 words and frequency with most high frequency.</li>
</ol>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="c1">//</span>
<span class="c1">//Note:</span>
<span class="c1">//token - a set of characters bound on either side by spaces, the beginning of</span>
<span class="c1">//the input string parameter or the end of the input String parameter.</span>
<span class="c1">//word - a token that contains only letters (a-z or A-Z) and may end with a</span>
<span class="c1">//single period or a single comma. A word must have at least one letter. </span>
<span class="c1">//</span>
<span class="c1">//  this is a word.</span>
<span class="c1">//          //token(4) : this is a word.</span>
<span class="c1">//          //words(4) : this is a word</span></code></pre></div>

<h2 id="exploration">EXPLORATION:</h2>

<ol>
  <li>
    <p>How and when is std::auto_ptr used? can std::auto_ptr be put on argument list? why?</p>
  </li>
  <li>
    <p>Compare vector with deque. When do we use each?</p>
  </li>
  <li>
    <p>What does the following code do? write a better method.</p>
  </li>
</ol>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">vector</span><span class="o">&lt;</span><span class="n">Type</span><span class="o">&gt;</span> <span class="n">c</span><span class="p">(</span> <span class="mi">10000</span> <span class="p">);</span>
    <span class="n">c</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span> <span class="n">c</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span> <span class="o">+</span> <span class="mi">10</span><span class="p">,</span> <span class="n">c</span><span class="p">.</span><span class="n">end</span><span class="p">()</span> <span class="p">);</span>
    <span class="n">c</span><span class="p">.</span><span class="n">reserve</span><span class="p">(</span> <span class="mi">10</span> <span class="p">);</span></code></pre></div>

<p>4.what does the std::remove() algorithm do? Does the algorithm remove what should be removed really? What’s the difference in size and capacity between before and after? Write the right remove method.</p>

<p>5.write a file_iterator，and 3 functors，to make the following code work：</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="c1">// count of file entries in the directory</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Total count: &quot;</span>
       <span class="o">&lt;&lt;</span> <span class="n">count_if</span><span class="p">(</span><span class="n">file_iterator</span><span class="p">(),</span> <span class="n">file_iterator</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
                   <span class="n">always_true</span><span class="o">&lt;</span><span class="n">file_iterator</span><span class="o">::</span><span class="n">value_type</span><span class="o">&gt;</span><span class="p">())</span>
       <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

  <span class="c1">// for_each() to display all entries</span>
  <span class="n">for_each</span><span class="p">(</span><span class="n">file_iterator</span><span class="p">(),</span> <span class="n">file_iterator</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">display_file_entry</span><span class="p">());</span>

  <span class="c1">// accumulate() to add up the size of all file entries</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Total: &quot;</span><span class="p">;</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">accumulate</span><span class="p">(</span><span class="n">file_iterator</span><span class="p">(),</span> <span class="n">file_iterator</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span>
                     <span class="n">file_size</span><span class="p">())</span>
       <span class="o">&lt;&lt;</span> <span class="s">&quot;bytes.&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p>the test case(the program name is mydir)：</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="ss">c</span><span class="p">:\</span><span class="o">&gt;</span> <span class="n">mydir</span>
<span class="no">Total</span> <span class="ss">count</span><span class="p">:</span> <span class="mi">3</span>
<span class="o">.</span><span class="n">.</span><span class="o">.</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<span class="o">.</span><span class="n">.</span><span class="o">.</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<span class="o">.</span><span class="n">.</span><span class="o">.</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<span class="ss">Total</span><span class="p">:</span> <span class="mi">102487</span> <span class="n">bytes</span><span class="o">.</span></code></pre></div>

<h2 id="fun">FUN:</h2>

<p>1.you want to write a class template C that can be instantiated only on types that have a member function named Clone() that takes no parameters and returns a pointer to the same kind of object.</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="c1">//T must provide T* T::Clone() const</span>
<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">C</span>
<span class="p">{</span>
  <span class="c1">//</span>
<span class="p">}</span></code></pre></div>

<blockquote>
  <p>Note: It’s obvious that if C writes code that just tries to invoke T::Clone() without parameters, then such code will fail to compile if there isn’t a T::Clone() that can be called without parameters.</p>
</blockquote>

<p>2.try the following code in VC6 and VC.net 2003 seperately:</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="cp">#include &lt;iostream&gt;</span>
<span class="cp">#include &lt;string&gt;</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">string</span> <span class="n">str1</span><span class="p">(</span><span class="s">&quot;Hello, World!&quot;</span><span class="p">);</span>
    <span class="n">string</span> <span class="n">str2</span><span class="p">(</span><span class="n">str1</span><span class="p">);</span>
    <span class="kt">char</span><span class="o">*</span> <span class="n">c</span> <span class="o">=</span> <span class="k">const_cast</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">*&gt;</span> <span class="p">(</span><span class="n">str1</span><span class="p">.</span><span class="n">c_str</span><span class="p">())</span> <span class="p">;</span>
    <span class="o">*</span><span class="n">c</span> <span class="o">=</span> <span class="sc">&#39;h&#39;</span><span class="p">;</span>
    <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">str1</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">str2</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p>Why are the results different?</p>

  </div>
</article>


  <article>
  <h2>
    <a href="/news/2006/05/17/Template-Test-English/">
      C++ Template 习题
    </a>
  </h2>
  <span class="post-category">
    <span class="label">
      desktop
    </span>
  </span>
  <div class="post-meta">
    <span class="post-date">
      17 May 2006
    </span>
    <a href="https://github.com/AcePeak" class="post-author">
      <img src="https://github.com/AcePeak.png" class="avatar" alt="AcePeak" width="24" height="24">
      AcePeak
    </a>
  </div>
  <div class="post-content">
    
<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="c1">//</span>
<span class="c1">//因为这次公司培训机制改变为先发布题目，由学员看书做题，再由教员专向辅导。</span>
<span class="c1">//因此这次没有准备讲义，只把题目贴上来，朋友们也可以练练手，过几天把部分答案上传。</span>
<span class="c1">//本套题分为四个难度：BASE, ADVANCED, EXPLORATION, FUN. 思考难度指数分别大概是</span>
<span class="c1">//2，5，7，9（满分10）。其中BASE和ADVANCED是要求学员一定要做的。EXPLORATION</span>
<span class="c1">//是探索题目，FUN是探索题目做完后还有余力的一些很有意思有嚼头的题目。</span>
<span class="c1">//</span>
<span class="c1">//PS:自我感觉题目总体难度有些高，不知道学员能不能坚持下来...</span>

<span class="c1">//这里想要放一个目录链接到一下各个section的，但是不知道怎么做，有朋友知道的能说说吗？</span></code></pre></div>

<p>BASE:
1． write the output.</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">Type</span><span class="o">&gt;</span>
<span class="kt">void</span> <span class="n">Func</span><span class="p">(</span><span class="n">Type</span> <span class="o">&amp;</span><span class="n">x</span> <span class="p">,</span> <span class="n">Type</span> <span class="o">&amp;</span><span class="n">y</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">Type</span> <span class="n">a</span><span class="o">=</span><span class="n">x</span><span class="p">;</span>
    <span class="n">x</span><span class="o">=</span><span class="n">y</span><span class="p">;</span>
    <span class="n">y</span><span class="o">=</span><span class="n">a</span><span class="p">;</span>
<span class="p">}</span>

<span class="cp">#include &lt;iostream&gt;</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">24</span><span class="p">;</span>
    <span class="n">Func</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">);</span>
    <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;a:&quot;</span><span class="o">&lt;&lt;</span><span class="n">a</span><span class="o">&lt;&lt;</span><span class="s">&quot; &quot;</span><span class="o">&lt;&lt;</span><span class="s">&quot;b:&quot;</span><span class="o">&lt;&lt;</span><span class="n">b</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p>2． With the function Template:</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">template</span><span class="o">&lt;</span><span class="kt">int</span> <span class="n">size</span> <span class="p">,</span> <span class="k">class</span> <span class="nc">T</span> <span class="o">&gt;</span>
<span class="kt">void</span> <span class="n">Show</span><span class="p">(</span><span class="n">T</span> <span class="o">*</span><span class="n">d</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="n">size</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">)</span> 
        <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">d</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="sc">&#39; &#39;</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p>What is the template function prototype invoked by Show&lt;10&gt;(“abcdefghijklmn”)? What’s the output?</p>

<ol>
  <li>the program’s output is not right, please correct the following program with right semantics:</li>
</ol>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
<span class="n">T</span> <span class="n">maxEx</span><span class="p">(</span><span class="n">T</span> <span class="n">a</span><span class="p">,</span><span class="n">T</span> <span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
 <span class="k">return</span> <span class="p">(</span><span class="n">a</span> <span class="o">&gt;</span> <span class="n">b</span><span class="p">)</span> <span class="o">?</span> <span class="nl">a</span> <span class="p">:</span> <span class="n">b</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span>
<span class="p">{</span>
 <span class="kt">int</span> <span class="n">nFirst</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
 <span class="kt">int</span> <span class="n">nSecond</span> <span class="o">=</span> <span class="mi">16</span><span class="p">;</span>
 <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">maxEx</span><span class="p">(</span><span class="n">nFirst</span><span class="p">,</span> <span class="n">nSecond</span><span class="p">)</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>            <span class="c1">//should be 16</span>

    <span class="kt">char</span> <span class="o">*</span><span class="n">c1</span> <span class="o">=</span> <span class="s">&quot;a&quot;</span><span class="p">;</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">c2</span> <span class="o">=</span> <span class="s">&quot;zoo&quot;</span><span class="p">;</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">c3</span> <span class="o">=</span> <span class="s">&quot;ZOO&quot;</span><span class="p">;</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">c4</span> <span class="o">=</span> <span class="s">&quot;A&quot;</span><span class="p">;</span>
    <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">maxEx</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span><span class="n">c2</span><span class="p">)</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>                       <span class="c1">//should be zoo</span>
    <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">maxEx</span><span class="p">(</span><span class="n">c3</span><span class="p">,</span><span class="n">c4</span><span class="p">)</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>                       <span class="c1">//should be ZOO</span>

 <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p>4.write the output of the following code.</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span> <span class="kt">void</span> <span class="n">f</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>                    <span class="c1">// (d)</span>
<span class="p">{</span>
    <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;d&quot;</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span> <span class="kt">void</span> <span class="n">f</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="n">T</span><span class="p">,</span> <span class="kt">double</span><span class="p">)</span>       <span class="c1">// (e)</span>
<span class="p">{</span>
    <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;e&quot;</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span> <span class="kt">void</span> <span class="n">f</span><span class="p">(</span><span class="n">T</span><span class="o">*</span><span class="p">)</span>                   <span class="c1">// (f)</span>
<span class="p">{</span>
    <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;f&quot;</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">template</span> <span class="o">&lt;&gt;</span> 
<span class="kt">void</span> <span class="n">f</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span> <span class="p">(</span><span class="kt">double</span><span class="p">)</span>                         <span class="c1">// (g)</span>
<span class="p">{</span>
    <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;g&quot;</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">f</span><span class="p">(</span><span class="kt">double</span><span class="p">)</span>                                  <span class="c1">// (h)</span>
<span class="p">{</span>
    <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;h&quot;</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">bool</span> <span class="n">b</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">d</span> <span class="o">=</span> <span class="mf">3.14</span><span class="p">;</span>
    <span class="n">f</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>                   
    <span class="n">f</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="mi">42</span><span class="p">,</span><span class="n">d</span><span class="p">)</span> <span class="p">;</span>             
    <span class="n">f</span><span class="p">(</span><span class="o">&amp;</span><span class="n">i</span><span class="p">)</span> <span class="p">;</span>                 
    <span class="n">f</span><span class="p">(</span><span class="n">d</span><span class="p">);</span>                   

 <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p>5.Case:</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">Type</span><span class="o">&gt;</span> 
<span class="k">class</span> <span class="nc">TwoNum</span>
<span class="p">{</span>
<span class="k">private</span><span class="o">:</span>
    <span class="n">Type</span> <span class="n">a</span><span class="p">;</span>
    <span class="n">Type</span> <span class="n">b</span><span class="p">;</span>
<span class="k">public</span><span class="o">:</span>
    <span class="n">TwoNum</span><span class="p">(){}</span>
    <span class="n">TwoNum</span><span class="p">(</span><span class="n">Type</span> <span class="n">aa</span> <span class="p">,</span> <span class="n">Type</span> <span class="n">bb</span><span class="p">);</span>

    <span class="kt">int</span> <span class="nf">Compare</span><span class="p">();</span> <span class="c1">//比较a 和b的大小</span>

    <span class="n">Type</span> <span class="nf">Max</span><span class="p">()</span> <span class="c1">// 求a 和b的最大值</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">a</span><span class="o">&gt;</span><span class="n">b</span><span class="p">)</span><span class="o">?</span><span class="nl">a</span><span class="p">:</span><span class="n">b</span><span class="p">;</span> 
    <span class="p">}</span>
    <span class="n">Type</span> <span class="nf">Min</span><span class="p">()</span> <span class="c1">// 求a 和b的最小值</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">a</span><span class="o">&gt;</span><span class="n">b</span><span class="p">)</span><span class="o">?</span><span class="nl">b</span><span class="p">:</span><span class="n">a</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="nf">Setab</span><span class="p">(</span><span class="n">Type</span><span class="o">&amp;</span> <span class="n">aa</span> <span class="p">,</span> <span class="n">Type</span><span class="o">&amp;</span> <span class="n">bb</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">a</span><span class="o">=</span><span class="n">aa</span><span class="p">;</span> <span class="n">b</span><span class="o">=</span><span class="n">bb</span><span class="p">;</span> 
    <span class="p">}</span>

    <span class="n">Type</span> <span class="nf">geta</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">a</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="n">Type</span> <span class="nf">getb</span><span class="p">()</span>
    <span class="p">{</span>
    <span class="k">return</span> <span class="n">b</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">Type</span><span class="o">&gt;</span>
<span class="n">TwoNum</span><span class="o">&lt;</span><span class="n">Type</span><span class="o">&gt;::</span><span class="n">TwoNum</span><span class="p">(</span><span class="n">Type</span> <span class="n">aa</span> <span class="p">,</span><span class="n">Type</span> <span class="n">bb</span><span class="p">)</span>
                   <span class="o">:</span> <span class="n">a</span><span class="p">(</span><span class="n">aa</span><span class="p">),</span> <span class="n">b</span><span class="p">(</span><span class="n">bb</span><span class="p">)</span>
<span class="p">{</span>
    <span class="p">;</span>
<span class="p">}</span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">Type</span><span class="o">&gt;</span>
<span class="kt">int</span> <span class="n">TwoNum</span><span class="o">&lt;</span><span class="n">Type</span><span class="o">&gt;::</span><span class="n">Compare</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">a</span><span class="o">&gt;</span><span class="n">b</span><span class="p">)</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">a</span><span class="o">==</span><span class="n">b</span><span class="p">)</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">else</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
    
<span class="cp">#include &lt;iostream.h&gt;</span>
<span class="kt">void</span> <span class="n">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">TwoNum</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">x</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">8</span><span class="p">);</span>
    <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">x</span><span class="p">.</span><span class="n">Compare</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="err">’</span> <span class="err">‘</span><span class="o">&lt;&lt;</span><span class="n">x</span><span class="p">.</span><span class="n">Max</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="err">’</span> <span class="err">‘</span><span class="o">&lt;&lt;</span><span class="n">x</span><span class="p">.</span><span class="n">Min</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>

    <span class="kt">char</span> <span class="n">ch</span><span class="o">=</span><span class="err">’</span><span class="n">x</span><span class="err">’</span><span class="p">;</span>
    <span class="n">TwoNum</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="n">y</span><span class="p">(</span><span class="n">ch</span><span class="p">,</span><span class="err">’</span><span class="n">x</span><span class="err">’</span><span class="p">);</span>
    <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">y</span><span class="p">.</span><span class="n">Compare</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="err">’</span> <span class="err">‘</span><span class="o">&lt;&lt;</span><span class="n">y</span><span class="p">.</span><span class="n">Max</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="err">’</span> <span class="err">‘</span><span class="o">&lt;&lt;</span><span class="n">y</span><span class="p">.</span><span class="n">Min</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p>Please write the output：</p>

<p>6．Which of the following templates are illegal? Why?</p>

<p>(1)</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">Type</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">Container1</span><span class="p">;</span>
<span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">Type</span><span class="p">,</span> <span class="kt">int</span> <span class="n">size</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">Container1</span><span class="p">;</span></code></pre></div>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">Type</span><span class="o">&gt;</span>
<span class="kt">void</span> <span class="n">Container1</span><span class="p">(</span><span class="n">Type</span> <span class="n">t</span><span class="p">);</span>
<span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">Type</span><span class="p">,</span> <span class="kt">int</span> <span class="n">size</span><span class="o">&gt;</span>
<span class="kt">void</span> <span class="n">Container1</span><span class="p">(</span><span class="n">Type</span> <span class="n">t</span><span class="p">);</span></code></pre></div>

<p>(2)</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="p">,</span><span class="n">U</span><span class="p">,</span><span class="k">class</span> <span class="nc">V</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">Container2</span><span class="p">;</span></code></pre></div>

<p>(3)</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">myT</span><span class="p">,</span> <span class="k">class</span> <span class="nc">myT</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">Container3</span><span class="p">;</span></code></pre></div>

<p>(4)</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">Type</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">ptr</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Container4</span><span class="p">;</span>
<span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">Type</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span> <span class="n">pi</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Container4</span><span class="p">;</span></code></pre></div>

<p>(5)</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">Type</span><span class="p">,</span> <span class="kt">int</span> <span class="n">val</span> <span class="o">=</span> <span class="mi">0</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">Container6</span><span class="p">;</span></code></pre></div>

<p>7．correct the class CList declaration (No need to implement the members.)</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">elementType</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">ListItem</span><span class="p">;</span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">elemType</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">CList</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="n">CList</span><span class="p">()</span><span class="o">:</span> <span class="n">front</span><span class="p">(</span><span class="nb">NULL</span><span class="p">),</span> <span class="n">end</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
    <span class="n">CList</span> <span class="p">(</span><span class="k">const</span> <span class="n">List</span> <span class="o">&amp;</span><span class="p">);</span>
    <span class="o">~</span><span class="n">CList</span><span class="p">();</span>

    <span class="kt">void</span> <span class="nf">insert</span><span class="p">(</span><span class="n">ListItem</span><span class="o">&lt;</span><span class="n">elemType</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">ptr</span><span class="p">,</span> <span class="n">elemType</span><span class="o">&lt;</span><span class="n">elemType</span><span class="o">&gt;</span> <span class="n">value</span><span class="p">);</span>
    <span class="kt">int</span> <span class="nf">remove</span><span class="p">(</span><span class="n">elemType</span><span class="o">&lt;</span><span class="n">elemType</span><span class="o">&gt;</span> <span class="n">value</span><span class="p">);</span>
    <span class="kt">size_t</span> <span class="nf">size</span><span class="p">(</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">_size</span><span class="p">;</span> 
    <span class="p">}</span>
<span class="k">private</span><span class="o">:</span>
    <span class="n">ListItem</span><span class="o">&lt;</span><span class="n">elemType</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">front</span><span class="p">;</span>
    <span class="n">ListItem</span><span class="o">&lt;</span><span class="n">elemType</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">end</span><span class="p">;</span>
<span class="p">};</span></code></pre></div>

<p>8.write the output for overload class template</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span> <span class="k">class</span> <span class="nc">mvector</span>                <span class="c1">// (a)</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="kt">void</span> <span class="n">f</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;a&quot;</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
<span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span> <span class="k">class</span> <span class="nc">mvector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">*&gt;</span>            <span class="c1">// (b)</span>
<span class="p">{</span>
    <span class="n">T</span> <span class="n">t</span><span class="p">;</span>
<span class="k">public</span><span class="o">:</span>
    <span class="kt">void</span> <span class="n">f</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">t</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;b&quot;</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>  
<span class="k">template</span> <span class="o">&lt;&gt;</span>   <span class="k">class</span> <span class="nc">mvector</span> <span class="o">&lt;</span><span class="kt">void</span><span class="o">*&gt;</span>             <span class="c1">// (c)</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="kt">void</span> <span class="n">f</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;c&quot;</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>

    <span class="n">mvector</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">*&gt;</span>  <span class="n">vpm</span><span class="p">;</span>
    <span class="n">mvector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">*&gt;</span>   <span class="n">ipm</span><span class="p">;</span>
    <span class="n">mvector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span>    <span class="n">im</span><span class="p">;</span>

    <span class="n">vpm</span><span class="p">.</span><span class="n">f</span><span class="p">();</span>
    <span class="n">ipm</span><span class="p">.</span><span class="n">f</span><span class="p">();</span>
    <span class="n">im</span><span class="p">.</span><span class="n">f</span><span class="p">();</span>
<span class="p">}</span></code></pre></div>

<p>ADVANCED:
1．Write a class template CVar<typename> which has following methods:</typename></p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">Operator</span> <span class="o">+</span> <span class="p">(</span><span class="n">CVar</span><span class="o">&lt;</span><span class="k">typename</span><span class="o">&gt;&amp;</span> <span class="p">)</span>  <span class="c1">//plus</span>
     <span class="n">Operator</span> <span class="err">–</span><span class="p">(</span><span class="n">CVar</span><span class="o">&lt;</span><span class="k">typename</span><span class="o">&gt;&amp;</span> <span class="p">)</span>  <span class="c1">//division</span>
     <span class="n">Operator</span> <span class="o">=</span><span class="p">(</span><span class="n">CVar</span><span class="o">&lt;</span><span class="k">typename</span><span class="o">&gt;&amp;</span> <span class="p">)</span>  <span class="c1">//assign</span>
     <span class="n">Operator</span> <span class="o">==</span><span class="p">(</span><span class="n">CVar</span><span class="o">&lt;</span><span class="k">typename</span><span class="o">&gt;&amp;</span> <span class="p">)</span>  <span class="c1">//equal</span>
     <span class="n">Operator</span> <span class="k">typename</span><span class="p">()</span>        <span class="c1">//cast</span>
     <span class="n">Output</span><span class="p">();</span>       <span class="c1">//output it’s data;</span></code></pre></div>

<p>And other necessary members.</p>

<ol>
  <li>Write some global function template:</li>
</ol>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">Operator</span> <span class="o">+</span><span class="p">(</span> <span class="n">CVar</span><span class="o">&lt;</span><span class="n">Typename</span><span class="o">&gt;&amp;</span> <span class="p">,</span> <span class="n">CVar</span><span class="o">&lt;</span><span class="n">Typename</span><span class="o">&gt;&amp;</span><span class="p">)</span>
     <span class="n">Operator</span> <span class="o">-</span><span class="p">(</span> <span class="n">CVar</span><span class="o">&lt;</span><span class="n">Typename</span><span class="o">&gt;&amp;</span> <span class="p">,</span> <span class="n">CVar</span><span class="o">&lt;</span><span class="n">Typename</span><span class="o">&gt;&amp;</span><span class="p">)</span></code></pre></div>

<p>You can try to comment CVar class operator +/- to test whether your global function is enable.</p>

<ol>
  <li>Write a specialized template class CVar&lt;char*&gt; and CVar<bool>.</bool></li>
</ol>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="c1">//Note: Using your semantics to implement the algorithm.</span>
<span class="c1">// such as :            CVar&lt;char*1&gt; + CVar&lt;char*2&gt; : strcat();</span>
<span class="c1">//                          CVar&lt;char*1&gt; - CVar&lt;char*2&gt; : find all char*2 and delete them in char*1.</span>
<span class="c1">//                          CVar&lt;bool&gt;   + CVar&lt;bool&gt;   : &amp;</span>
<span class="c1">//                          CVar&lt;bool&gt;   - CVar&lt;bool&gt;   : ^</span></code></pre></div>

<ol>
  <li>Write a template function my_sort as following:</li>
</ol>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">Type</span><span class="o">&gt;</span>
    <span class="n">Void</span> <span class="n">my_sort</span><span class="p">(</span><span class="n">Type</span><span class="o">*</span> <span class="n">array</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">size</span><span class="p">);</span>
<span class="c1">//NOTE: </span>
<span class="c1">//* Maybe you have to implement another 2 function templates:</span>

     <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">Type</span><span class="o">&gt;</span>
     <span class="kt">bool</span> <span class="n">my_max</span><span class="p">(</span><span class="n">Type</span><span class="o">&amp;</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">Type</span><span class="o">&amp;</span> <span class="n">rhs</span><span class="p">);</span>
     <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">Type</span><span class="o">&gt;</span>
     <span class="n">Void</span> <span class="n">my_swap</span><span class="p">(</span><span class="n">Type</span><span class="o">&amp;</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">Type</span><span class="o">&amp;</span> <span class="n">rhs</span><span class="p">);</span>
<span class="c1">//* you can decide your concrete sort algorithm.</span></code></pre></div>

<p>EXPLORATION:
1． Design a template queue class and implement the following members:</p>

<p>(1) method void add(Type elem).     //add an element to tail.</p>

<p>(2) method Type remove().           //remove element from head, and return the element.</p>

<p>(3) method Type head().             //return the head value of queue.</p>

<p>(4) method void clear().            //clear all queue.</p>

<p>(5) method bool is_empty().         //indicate whether the queue is empty.</p>

<p>(6) method size_t count().          //return the count.</p>

<p>(7) nested class Iterator to traverse the queue.</p>

<p>(8) method operator+=(Type elem).    //The same to add();</p>

<p>(9) method operator–().             //The same to remove();</p>

<p>(10) method Iterator begin().        //Return the begin of the queue.</p>

<p>(11) method Iterator end().          //Return the end of the queue.</p>

<p>Besides, define an global overload operator:</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">;</span></code></pre></div>

<p>to directly output all the values of queue item.</p>

<p>the following is the test of your queue：</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="cp">#include &lt;iostream.h&gt;</span>
<span class="cp">#include &quot;queue.h&quot;</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">Queue</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">iq</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="n">iq</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">i</span><span class="o">*</span><span class="mi">5</span><span class="p">);</span>
    <span class="n">iq</span><span class="o">--</span><span class="p">;</span>
    <span class="n">iq</span> <span class="o">+=</span> <span class="mi">50</span><span class="p">;</span>
    
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">iq</span><span class="p">.</span><span class="n">is_empty</span><span class="p">())</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Removed : &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">iq</span><span class="p">.</span><span class="n">remove</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; Current Head : &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">iq</span><span class="p">.</span><span class="n">head</span><span class="p">();</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">iq</span><span class="p">.</span><span class="n">is_empty</span><span class="p">())</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">iq</span><span class="p">;</span>
    <span class="n">Queue</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;::</span><span class="n">Iterator</span> <span class="n">iQueue</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="n">iQueue</span> <span class="o">=</span> <span class="n">iq</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">iQueue</span> <span class="o">!=</span> <span class="n">iq</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="n">iQueue</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="o">*</span><span class="n">iQueue</span><span class="p">)</span><span class="o">&lt;&lt;</span><span class="s">&quot; &quot;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">iq</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">iq</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p>The ourput is：
Removed : 5 Current Head : 10
There are 9 queue items: &lt; 10 15 20 25 30 35 40 45 50 &gt;
10 15 20 25 30 35 40 45 50 
There are 0 queue items: &lt; &gt;</p>

<p>2.design a class template CHash which algorithm is besed on buckets:</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">Key</span><span class="p">,</span> <span class="k">typename</span> <span class="n">Value</span> <span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">CHash</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="k">class</span> <span class="nc">Iterator</span>
    <span class="p">{</span>
    <span class="p">}</span>
    <span class="n">CHash</span><span class="p">(</span> <span class="k">const</span> <span class="kt">size_t</span> <span class="n">nMax</span><span class="p">,</span>
           <span class="n">ULONG</span>        <span class="p">(</span> <span class="o">*</span><span class="n">hashFunc</span> <span class="p">)(</span> <span class="k">const</span> <span class="n">Key</span> <span class="n">tKey</span> <span class="p">),</span>
           <span class="kt">bool</span>         <span class="n">bAutoSize</span> <span class="o">=</span> <span class="nb">false</span> <span class="p">);</span>
 <span class="n">CHash</span><span class="p">(</span> <span class="k">const</span> <span class="n">CHash</span><span class="o">&amp;</span> <span class="n">hash</span> <span class="p">);</span>
 <span class="o">~</span><span class="n">CHash</span><span class="p">();</span>
 <span class="n">CHash</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span> <span class="p">(</span> <span class="k">const</span> <span class="n">CHash</span><span class="o">&lt;</span><span class="n">Key</span><span class="p">,</span> <span class="n">Value</span><span class="o">&gt;&amp;</span> <span class="n">hash</span> <span class="p">);</span>
    <span class="k">operator</span><span class="p">[];</span>
    <span class="n">Iterator</span> <span class="nf">begin</span><span class="p">();</span>
    <span class="n">Iterator</span> <span class="nf">end</span><span class="p">();</span>
 <span class="kt">size_t</span> <span class="nf">size</span><span class="p">();</span>
 <span class="kt">void</span> <span class="nf">insert</span><span class="p">(</span> <span class="k">const</span> <span class="n">Key</span> <span class="n">tKey</span><span class="p">,</span> <span class="n">Value</span><span class="o">&amp;</span> <span class="n">rValue</span> <span class="p">);</span>
 <span class="kt">void</span> <span class="nf">clear</span><span class="p">();</span>
<span class="p">}</span></code></pre></div>

<p>FUN:</p>

<p>1.Write the output of the following code.</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="cp">#include &lt;IOSTREAM&gt;</span>
<span class="k">using</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">;</span>
<span class="k">using</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="k">template</span><span class="o">&lt;</span><span class="kt">int</span> <span class="n">N</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">CalculateCycle</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="k">enum</span> <span class="p">{</span> <span class="n">count</span> <span class="o">=</span> <span class="n">CalculateCycle</span><span class="o">&lt;</span> <span class="n">N</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">?</span> <span class="p">(</span><span class="n">N</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">:</span> <span class="p">(</span><span class="n">N</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&gt;::</span><span class="n">count</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">};</span>
<span class="p">};</span>

<span class="k">template</span> <span class="o">&lt;&gt;</span>
<span class="k">class</span> <span class="nc">CalculateCycle</span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="k">enum</span> <span class="p">{</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">};</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">const</span> <span class="kt">int</span> <span class="n">iNo</span> <span class="o">=</span> <span class="mi">22</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Cycle length of &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">iNo</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; is = &quot;</span> 
        <span class="o">&lt;&lt;</span> <span class="n">CalculateCycle</span><span class="o">&lt;</span><span class="n">iNo</span><span class="o">&gt;::</span><span class="n">count</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p>2.The following is a smart list. Please add other necessary implements to make it work.</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="cp">#include &lt;iostream&gt;</span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">CListTemplate</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="n">T</span><span class="o">*</span> <span class="n">left</span><span class="p">;</span>
    <span class="n">T</span><span class="o">*</span> <span class="n">right</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">elem</span><span class="p">;</span>
<span class="p">};</span>
<span class="k">class</span> <span class="nc">CMyList</span> <span class="o">:</span> <span class="k">public</span> <span class="n">CListTemplate</span><span class="o">&lt;</span><span class="n">CMyList</span><span class="o">&gt;</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="kt">size_t</span> <span class="n">size</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">CList</span> <span class="o">:</span> <span class="k">public</span> <span class="n">T</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
 <span class="n">T</span><span class="o">*</span> <span class="n">Head</span><span class="p">;</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">CList</span><span class="o">&lt;</span><span class="n">CMyList</span><span class="o">&gt;</span> <span class="n">my_List</span><span class="p">;</span>

    <span class="c1">//my_List.left-&gt;left-&gt;right-&gt;elem = 10;</span>
 <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>


  </div>
</article>


  <article>
  <h2>
    <a href="/news/2006/05/10/ActiveX-Safety/">
      剖析ActiveX控件安全问题
    </a>
  </h2>
  <span class="post-category">
    <span class="label">
      desktop
    </span>
  </span>
  <div class="post-meta">
    <span class="post-date">
      10 May 2006
    </span>
    <a href="https://github.com/AcePeak" class="post-author">
      <img src="https://github.com/AcePeak.png" class="avatar" alt="AcePeak" width="24" height="24">
      AcePeak
    </a>
  </div>
  <div class="post-content">
    <h2 id="section">1、介绍</h2>

<p>如果你曾经在网页或者ASP中使用过com对象，你可能会发现，有时候会出现这样讨厌的对话框</p>

<p><img src="/img/060510_1.jpg" alt="对话框" /></p>

<p>这是因为你的控件没有被标记为安全的，对于初始化不安全或者对于脚本不安全，甚至兼而有之。你每打开一次这样的网页，这种情况就会发生一次，你怎么办？当然，这可以通过设置IE本身的安全等级为low来解决这样的问题，但是如果你要制作一个可发布的控件，你能想象到每一位用户在使用你制作的控件时都要且列抱怨这种强制行为；或者如果你是其中一个使用者，当你同样遇到这种情况之后不得不将自己的IE安全等级设置为low，与此同时你平时上网过程中那些行为不轨的控件有时也会悄然而至，你的灾难来了！作为一个聪明的程序员，你不能要求任何用户做一些不切实际或者不够安全的改变来适应你的产品，因为你知道那只会使你的控件被逐渐打入冷宫，到最后销声匿迹，那不是你想要的。我们要消灭掉这样的对话框而且还不让用户发现丝毫安全上和使用上的失望。本文就是横向探讨在C++编程环境下如何消除这些问题的。</p>

<h2 id="section-1">2、原理</h2>

<p>ActiveX控件是一种极其危险的提供功能的方法（目前正在被MS逐渐冷落），因为它是一种组建对象模型（COM）的对象，只要电脑的用户可以完成的任务，它都可以完成。比如它可以存取注册表，可以随意访问本地文件系统等等。一个网页上面的控件一般有2种不安全的状态，一种是脚本的不安全，一种是初始化的不安全。当用户将一个压缩解压缩控件指向一个远程被压缩的包含特洛伊木马的系统文件并且需要控件来解压缩这个文件时，系统安全会被打破。这个状态就是初始化的不安全。从代码的角度来讲，如果控件从IPersist派生，也就是说控件实现了永久性，那么就会触发unsafe for initializing。而在脚本程序安全执行以前，一个控件依赖于特定的系统设置，那么在允许这段代码运行之前，控件的开发人员需要提供一些必要的代码。从代码的角度来讲，如果控件从IDispatch派生，也就是说控件支持脚本，那么就会触发unsafe for scripting。</p>

<p>从用户下载一个ActiveX控件开始，这个控件甚至可能很容易被攻击，因为网络上任何网络程序都可以使用它，无论是出于友好的目的还是恶意的目的。因此IE浏览器（本文只探讨IE内核的浏览器）总是试图弹出一个对话框来告诉你，这个控件可能是不安全的。这几乎总是一个很好的预防网络攻击的好方法，但是对于那些我们认为总是安全的控件，我们仍然要总是接受这种IE产生的干扰，这就使人厌烦了。其实当身为程序员的你写这样的安全控件时，这样的问题是很容易解决的。 </p>

<h2 id="section-2">3、解决方法</h2>

<p>目前，对这个问题的解决方法主要有几种：使用数字签名，继承IObjectSafety接口，修改注册表等。</p>

<h3 id="section-3">3.1、使用数字签名</h3>
<p>数字签名是一种使控件足够安全的方法，它通过特定的密钥来加密控件的使用，使得使用控件的对象能够根据密钥是否相符来检测控件是否足够安全。通常，拥有自己的可发布的数字签名是要Money的，本文是一篇技术文章，对此并不深入探讨，下面主要介绍代码方面的安全化。</p>

<h3 id="iobjectsafety">3.2、继承IObjectSafety接口</h3>
<p>IObjectSafety接口是在头文件”objsafe.h”中定义的接口，定义如下： </p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="nl">IObjectSafety</span> <span class="p">:</span> <span class="k">public</span> <span class="n">IUnknown</span>
<span class="p">{</span>
    <span class="k">public</span><span class="o">:</span>
    <span class="k">virtual</span> <span class="n">HRESULT</span> <span class="n">STDMETHODCALLTYPE</span> <span class="n">GetInterfaceSafetyOptions</span><span class="p">(</span> 
    <span class="cm">/* [in] */</span> <span class="n">REFIID</span> <span class="n">riid</span><span class="p">,</span>
    <span class="cm">/* [out] */</span> <span class="n">DWORD</span> <span class="o">*</span><span class="n">pdwSupportedOptions</span><span class="p">,</span>
    <span class="cm">/* [out] */</span> <span class="n">DWORD</span> <span class="o">*</span><span class="n">pdwEnabledOptions</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">virtual</span> <span class="n">HRESULT</span> <span class="n">STDMETHODCALLTYPE</span> <span class="n">SetInterfaceSafetyOptions</span><span class="p">(</span> 
    <span class="cm">/* [in] */</span> <span class="n">REFIID</span> <span class="n">riid</span><span class="p">,</span>
    <span class="cm">/* [in] */</span> <span class="n">DWORD</span> <span class="n">dwOptionSetMask</span><span class="p">,</span>
    <span class="cm">/* [in] */</span> <span class="n">DWORD</span> <span class="n">dwEnabledOptions</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span></code></pre></div>

<p>其中参数意义如下：</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="c1">//riid                Interface identifier for the object to be made safe. </span>
<span class="c1">//</span>
<span class="c1">//dwOptionSetMask     Options to be changed. </span>
<span class="c1">//</span>
<span class="c1">//dwEnabledOptions    Settings for the options that are to be changed. This can be one of the following values. </span>
<span class="c1">//                    INTERFACESAFE_FOR_UNTRUSTED_CALLER</span>
<span class="c1">//                        Indicates the interface identified by riid should be made safe for scripting. </span>
<span class="c1">//                    INTERFACESAFE_FOR_UNTRUSTED_DATA</span>
<span class="c1">//                        Indicates the interface identified by riid should be made safe for untrusted data during initialization.</span></code></pre></div>

<p>这个接口允许容器询问控件是否安全或者改变控件的安全属性。目前IObjectSafety支持四种安全属性，但是一般我们只使用前两个：脚本安全和初始化安全。这些属性定义如下：</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="c1">// Option bit definitions for IObjectSafety:</span>
<span class="cp">#define    INTERFACESAFE_FOR_UNTRUSTED_CALLER        0x00000001    </span><span class="c1">// Caller of interface may be untrusted</span>
<span class="cp">#define    INTERFACESAFE_FOR_UNTRUSTED_DATA          0x00000002    </span><span class="c1">// Data passed into interface may be untrusted</span>
<span class="cp">#define    INTERFACE_USES_DISPEX                     0x00000004    </span><span class="c1">// Object knows to use IDispatchEx</span>
<span class="cp">#define    INTERFACE_USES_SECURITY_MANAGER           0x00000008    </span><span class="c1">// Object knows to use IInternetHostSecurityManager</span></code></pre></div>

<h4 id="section-4">3.2.1、实现方法</h4>

<p>首先包含头文件</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="cp">#include &quot;objsafe.h&quot;</span></code></pre></div>

<p>然后是自己的控件类继承IObjectSafetyImpl</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">class</span> <span class="nc">YourClass</span> <span class="o">:</span>
    <span class="k">public</span> <span class="n">IObjectSafetyImpl</span><span class="o">&lt;</span><span class="n">YourClass</span><span class="p">,</span> <span class="n">INTERFACESAFE_FOR_UNTRUSTED_CALLER</span> <span class="o">|</span> <span class="n">INTERFACESAFE_FOR_UNTRUSTED_DATA</span><span class="o">&gt;</span>
<span class="p">{</span></code></pre></div>

<p>其中<code>INTERFACESAFE_FOR_UNTRUSTED_CALLER | INTERFACESAFE_FOR_UNTRUSTED_DATA</code>代表默认这个控件是脚本安全而且初始化安全的。然后在com接口表中添加接口名</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">BEGIN_COM_MAP</span><span class="p">(</span><span class="n">CCGrid</span><span class="p">)</span>
    
    <span class="n">COM_INTERFACE_ENTRY</span><span class="p">(</span><span class="n">IObjectSafety</span><span class="p">)</span>
<span class="n">END_COM_MAP</span><span class="p">()</span></code></pre></div>

<p>OK，大功告成。这也是一种很简单的方法。</p>

<h3 id="section-5">3.3、修改注册表</h3>

<p>修改注册表项使控件支持安全类别的原理，归根到底其实就是下面的第三个方法，另外两个方法都是对这个方法的外围包装和更加安全的处理。修改注册表在不同的工程中有着不同的表现：</p>

<h4 id="atlcom">3.3.1、用于ATL属性工程的com接口</h4>

<p>因为VC的属性工程已经加入了安全控件的注册表支持，并且直接加入了关键字implements_category，因此我们仅仅象下面这样既可完成安全属性设置：</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="p">[</span>
    <span class="n">coclass</span><span class="o">/</span><span class="n">progid</span><span class="o">/</span><span class="n">vi_prgid</span><span class="p">,</span>            <span class="c1">//必须至少有其中一个</span>
    
    <span class="n">implements_category</span><span class="p">(</span><span class="s">&quot;CATID_SafeForScripting&quot;</span><span class="p">),</span>
    <span class="n">implements_category</span><span class="p">(</span><span class="s">&quot;CATID_SafeForInitializing&quot;</span><span class="p">),</span>
    
<span class="p">]</span></code></pre></div>

<p>不过要注意的是，对于类似下面的代码（往往是非属性工程的）是不能添加的：</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="p">[</span>
    <span class="n">uuid</span><span class="p">(),</span>
    <span class="n">helpstring</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">)</span>
<span class="p">]</span>
<span class="n">coclass</span> <span class="n">YourCtrl</span>
<span class="p">{</span>
    <span class="p">[</span><span class="k">default</span><span class="p">]</span> <span class="n">interface</span> <span class="p">,</span>
        <span class="p">[</span><span class="k">default</span><span class="p">,</span><span class="n">source</span><span class="p">]</span> <span class="n">dispinterface</span> 
<span class="p">}</span></code></pre></div>

<p>因为这种coclass是IDL的属性，而IDL本身并没有安全功能。</p>

<p>而上面的那种coclass是VC的属性，MS提供了对安全控件的支持。</p>

<h4 id="section-6">3.3.2、主要用于非属性工程的通用方法</h4>

<p>在类声明文件中加入头文件</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="cp">#include &quot;objsafe.h&quot;</span></code></pre></div>

<p>在类声明中添加如下代码：</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">BEGIN_CATEGORY_MAP</span><span class="p">(</span> <span class="n">YourCtrlClassName</span> <span class="p">)</span>
       <span class="n">IMPLEMENTED_CATEGORY</span><span class="p">(</span> <span class="n">CATID_SafeForScripting</span> <span class="p">)</span>
       <span class="n">IMPLEMENTED_CATEGORY</span><span class="p">(</span> <span class="n">CATID_SafeForInitializing</span> <span class="p">)</span>
   <span class="n">END_CATEGORY_MAP</span><span class="p">()</span></code></pre></div>

<p>即可使其支持safety属性，当然你也可以选择性的只支持一种安全属性。</p>

<h4 id="mfc-activex-control">3.3.3、主要用于MFC ActiveX Control的通用方法</h4>

<p>在$project.cpp文件中添加以下代码：</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="cp">#include &quot;comcat.h&quot;</span>
<span class="cp">#include &quot;Objsafe.h&quot;</span>

<span class="c1">// 控件的CLSID,注册表用（一定要是实际使用的控件的）</span>
<span class="k">const</span> <span class="n">GUID</span> <span class="n">CDECL</span> <span class="n">CLSID_SafeItem</span> <span class="o">=</span><span class="p">{</span> <span class="mh">0x7AE7497B</span><span class="p">,</span> <span class="mh">0xCAD8</span><span class="p">,</span> <span class="mh">0x4E66</span><span class="p">,</span> <span class="p">{</span> <span class="mh">0xA5</span><span class="p">,</span><span class="mh">0x8B</span><span class="p">,</span><span class="mh">0xDD</span><span class="p">,</span><span class="mh">0xE9</span><span class="p">,</span><span class="mh">0xBC</span><span class="p">,</span><span class="mh">0xAF</span><span class="p">,</span><span class="mh">0x6B</span><span class="p">,</span><span class="mh">0x61</span> <span class="p">}</span> <span class="p">};</span>

<span class="c1">// 版本控制</span>
<span class="k">const</span> <span class="n">WORD</span> <span class="n">_wVerMajor</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="c1">// 次版本号</span>
<span class="k">const</span> <span class="n">WORD</span> <span class="n">_wVerMinor</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="c1">//////////////////////////////////////////////////////////////////////</span>
<span class="c1">// 创建组件种类</span>
<span class="n">HRESULT</span> <span class="nf">CreateComponentCategory</span><span class="p">(</span><span class="n">CATID</span> <span class="n">catid</span><span class="p">,</span> <span class="n">WCHAR</span><span class="o">*</span> <span class="n">catDescription</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">ICatRegister</span><span class="o">*</span> <span class="n">pcr</span> <span class="o">=</span> <span class="nb">NULL</span> <span class="p">;</span>
    <span class="n">HRESULT</span> <span class="n">hr</span> <span class="o">=</span> <span class="n">S_OK</span> <span class="p">;</span>

    <span class="n">hr</span> <span class="o">=</span> <span class="n">CoCreateInstance</span><span class="p">(</span><span class="n">CLSID_StdComponentCategoriesMgr</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">CLSCTX_INPROC_SERVER</span><span class="p">,</span> <span class="n">IID_ICatRegister</span><span class="p">,</span> <span class="p">(</span><span class="kt">void</span><span class="o">**</span><span class="p">)</span><span class="o">&amp;</span><span class="n">pcr</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">FAILED</span><span class="p">(</span><span class="n">hr</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">hr</span><span class="p">;</span>

    <span class="c1">// Make sure the HKCR\Component Categories\{..catid}</span>
    <span class="c1">// key is registered.</span>
    <span class="n">CATEGORYINFO</span> <span class="n">catinfo</span><span class="p">;</span>
    <span class="n">catinfo</span><span class="p">.</span><span class="n">catid</span> <span class="o">=</span> <span class="n">catid</span><span class="p">;</span>
    <span class="n">catinfo</span><span class="p">.</span><span class="n">lcid</span> <span class="o">=</span> <span class="mh">0x0409</span> <span class="p">;</span> <span class="c1">// english</span>

    <span class="c1">// Make sure the provided description is not too long.</span>
    <span class="c1">// Only copy the first 127 characters if it is.</span>
    <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">wcslen</span><span class="p">(</span><span class="n">catDescription</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">len</span><span class="o">&gt;</span><span class="mi">127</span><span class="p">)</span>
        <span class="n">len</span> <span class="o">=</span> <span class="mi">127</span><span class="p">;</span>
    <span class="n">wcsncpy</span><span class="p">(</span><span class="n">catinfo</span><span class="p">.</span><span class="n">szDescription</span><span class="p">,</span> <span class="n">catDescription</span><span class="p">,</span> <span class="n">len</span><span class="p">);</span>

    <span class="c1">// Make sure the description is null terminated.</span>
    <span class="n">catinfo</span><span class="p">.</span><span class="n">szDescription</span><span class="p">[</span><span class="n">len</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;\0&#39;</span><span class="p">;</span>

    <span class="n">hr</span> <span class="o">=</span> <span class="n">pcr</span><span class="o">-&gt;</span><span class="n">RegisterCategories</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">catinfo</span><span class="p">);</span>
    <span class="n">pcr</span><span class="o">-&gt;</span><span class="n">Release</span><span class="p">();</span>

    <span class="k">return</span> <span class="n">hr</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 注册组件种类</span>
<span class="n">HRESULT</span> <span class="nf">RegisterCLSIDInCategory</span><span class="p">(</span><span class="n">REFCLSID</span> <span class="n">clsid</span><span class="p">,</span> <span class="n">CATID</span> <span class="n">catid</span><span class="p">)</span>
<span class="p">{</span>

    <span class="c1">// Register your component categories information.</span>
    <span class="n">ICatRegister</span><span class="o">*</span> <span class="n">pcr</span> <span class="o">=</span> <span class="nb">NULL</span> <span class="p">;</span>
    <span class="n">HRESULT</span> <span class="n">hr</span> <span class="o">=</span> <span class="n">S_OK</span> <span class="p">;</span>
    <span class="n">hr</span> <span class="o">=</span> <span class="n">CoCreateInstance</span><span class="p">(</span><span class="n">CLSID_StdComponentCategoriesMgr</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">CLSCTX_INPROC_SERVER</span><span class="p">,</span> <span class="n">IID_ICatRegister</span><span class="p">,</span> <span class="p">(</span><span class="kt">void</span><span class="o">**</span><span class="p">)</span><span class="o">&amp;</span><span class="n">pcr</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">SUCCEEDED</span><span class="p">(</span><span class="n">hr</span><span class="p">))</span>
    <span class="p">{</span>

        <span class="c1">// Register this category as being implemented by the class.</span>
        <span class="n">CATID</span> <span class="n">rgcatid</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">;</span>
        <span class="n">rgcatid</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">catid</span><span class="p">;</span>
        <span class="n">hr</span> <span class="o">=</span> <span class="n">pcr</span><span class="o">-&gt;</span><span class="n">RegisterClassImplCategories</span><span class="p">(</span><span class="n">clsid</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">rgcatid</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">pcr</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="n">pcr</span><span class="o">-&gt;</span><span class="n">Release</span><span class="p">();</span>
    <span class="k">return</span> <span class="n">hr</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 卸载组件种类</span>
<span class="n">HRESULT</span> <span class="nf">UnRegisterCLSIDInCategory</span><span class="p">(</span><span class="n">REFCLSID</span> <span class="n">clsid</span><span class="p">,</span> <span class="n">CATID</span> <span class="n">catid</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">ICatRegister</span><span class="o">*</span> <span class="n">pcr</span> <span class="o">=</span> <span class="nb">NULL</span> <span class="p">;</span>
    <span class="n">HRESULT</span> <span class="n">hr</span> <span class="o">=</span> <span class="n">S_OK</span> <span class="p">;</span>

    <span class="n">hr</span> <span class="o">=</span> <span class="n">CoCreateInstance</span><span class="p">(</span><span class="n">CLSID_StdComponentCategoriesMgr</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">CLSCTX_INPROC_SERVER</span><span class="p">,</span> <span class="n">IID_ICatRegister</span><span class="p">,</span> <span class="p">(</span><span class="kt">void</span><span class="o">**</span><span class="p">)</span><span class="o">&amp;</span><span class="n">pcr</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">SUCCEEDED</span><span class="p">(</span><span class="n">hr</span><span class="p">))</span>
    <span class="p">{</span>

        <span class="c1">// Unregister this category as being implemented by the class.</span>
        <span class="n">CATID</span> <span class="n">rgcatid</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">;</span>
        <span class="n">rgcatid</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">catid</span><span class="p">;</span>
        <span class="n">hr</span> <span class="o">=</span> <span class="n">pcr</span><span class="o">-&gt;</span><span class="n">UnRegisterClassImplCategories</span><span class="p">(</span><span class="n">clsid</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">rgcatid</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">pcr</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="n">pcr</span><span class="o">-&gt;</span><span class="n">Release</span><span class="p">();</span>

    <span class="k">return</span> <span class="n">hr</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p>修改以下函数：</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="c1">// DllRegisterServer - Adds entries to the system registry</span>
<span class="n">STDAPI</span> <span class="nf">DllRegisterServer</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">HRESULT</span> <span class="n">hr</span><span class="p">;</span>

    <span class="n">AFX_MANAGE_STATE</span><span class="p">(</span><span class="n">_afxModuleAddrThis</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">AfxOleRegisterTypeLib</span><span class="p">(</span><span class="n">AfxGetInstanceHandle</span><span class="p">(),</span> <span class="n">_tlid</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">ResultFromScode</span><span class="p">(</span><span class="n">SELFREG_E_TYPELIB</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">COleObjectFactoryEx</span><span class="o">::</span><span class="n">UpdateRegistryAll</span><span class="p">(</span><span class="n">TRUE</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">ResultFromScode</span><span class="p">(</span><span class="n">SELFREG_E_CLASS</span><span class="p">);</span>

    <span class="c1">// 标记控件初始化安全.</span>
    <span class="c1">// 创建初始化安全组件种类</span>
    <span class="n">hr</span> <span class="o">=</span> <span class="n">CreateComponentCategory</span><span class="p">(</span><span class="n">CATID_SafeForInitializing</span><span class="p">,</span> <span class="s">L&quot;Controls safely initializable from persistent data!&quot;</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">FAILED</span><span class="p">(</span><span class="n">hr</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">hr</span><span class="p">;</span>

    <span class="c1">// 注册初始化安全</span>
    <span class="n">hr</span> <span class="o">=</span> <span class="n">RegisterCLSIDInCategory</span><span class="p">(</span><span class="n">CLSID_SafeItem</span><span class="p">,</span> <span class="n">CATID_SafeForInitializing</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">FAILED</span><span class="p">(</span><span class="n">hr</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">hr</span><span class="p">;</span>

    <span class="c1">// 标记控件脚本安全</span>
    <span class="c1">// 创建脚本安全组件种类 </span>
    <span class="n">hr</span> <span class="o">=</span> <span class="n">CreateComponentCategory</span><span class="p">(</span><span class="n">CATID_SafeForScripting</span><span class="p">,</span> <span class="s">L&quot;Controls safely scriptable!&quot;</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">FAILED</span><span class="p">(</span><span class="n">hr</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">hr</span><span class="p">;</span>

    <span class="c1">// 注册脚本安全组件种类</span>
    <span class="n">hr</span> <span class="o">=</span> <span class="n">RegisterCLSIDInCategory</span><span class="p">(</span><span class="n">CLSID_SafeItem</span><span class="p">,</span> <span class="n">CATID_SafeForScripting</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">FAILED</span><span class="p">(</span><span class="n">hr</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">hr</span><span class="p">;</span>

    <span class="k">return</span> <span class="n">NOERROR</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">//////////////////////////////////////////////////////////////////</span>
<span class="c1">// DllUnregisterServer - Removes entries from the system registry</span>
<span class="n">STDAPI</span> <span class="nf">DllUnregisterServer</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">HRESULT</span> <span class="n">hr</span><span class="p">;</span>
    <span class="n">AFX_MANAGE_STATE</span><span class="p">(</span><span class="n">_afxModuleAddrThis</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">AfxOleUnregisterTypeLib</span><span class="p">(</span><span class="n">_tlid</span><span class="p">,</span> <span class="n">_wVerMajor</span><span class="p">,</span> <span class="n">_wVerMinor</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">ResultFromScode</span><span class="p">(</span><span class="n">SELFREG_E_TYPELIB</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">COleObjectFactoryEx</span><span class="o">::</span><span class="n">UpdateRegistryAll</span><span class="p">(</span><span class="n">FALSE</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">ResultFromScode</span><span class="p">(</span><span class="n">SELFREG_E_CLASS</span><span class="p">);</span>

    <span class="c1">// 删除控件初始化安全入口.</span>
    <span class="n">hr</span><span class="o">=</span><span class="n">UnRegisterCLSIDInCategory</span><span class="p">(</span><span class="n">CLSID_SafeItem</span><span class="p">,</span> <span class="n">CATID_SafeForInitializing</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">FAILED</span><span class="p">(</span><span class="n">hr</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">hr</span><span class="p">;</span>

    <span class="c1">// 删除控件脚本安全入口</span>
    <span class="n">hr</span><span class="o">=</span><span class="n">UnRegisterCLSIDInCategory</span><span class="p">(</span><span class="n">CLSID_SafeItem</span><span class="p">,</span> <span class="n">CATID_SafeForScripting</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">FAILED</span><span class="p">(</span><span class="n">hr</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">hr</span><span class="p">;</span>

    <span class="c1">//////////////////////////</span>
    <span class="k">return</span> <span class="n">NOERROR</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p>至此对工程的修改完成了，现在控件就可以在自注册时就注册为安全控件了！</p>

<h4 id="section-7">3.3.4、手动修改注册表</h4>

<p>我们可以自己手动为控件在注册表中添加安全支持，实际上我们所需要的两个项（Key）就是这样的形式：</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="err">\</span><span class="n">HKEY_LOCAL_MACHINE</span><span class="err">\</span><span class="n">SOFTWARE</span><span class="err">\</span><span class="n">Classes</span><span class="err">\</span><span class="n">CLSID</span><span class="err">\</span><span class="o">&lt;</span><span class="n">GUID</span> <span class="n">of</span> <span class="n">control</span> <span class="n">class</span><span class="o">&gt;</span><span class="err">\</span><span class="n">Implemented</span> <span class="n">Categories</span><span class="err">\</span><span class="o">&lt;</span><span class="n">GUID</span> <span class="n">of</span> <span class="n">category</span><span class="o">&gt;</span></code></pre></div>

<p>ActiveX SDK头文件ObjSafe.H 已经为类别CATID_SafeForInitializing和CATID_SafeForScripting定义了GUID值。因此对于特定的工程，如果控件类的GUID是{20048BB3-DB68-11CF-9CAF-00AA006CB425}，那么我们就只需要添加两个注册表项：  </p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">REGEDIT4</span>
       
   <span class="p">[</span><span class="n">HKEY_CLASSES_ROOT</span><span class="err">\</span><span class="n">CLSID</span><span class="err">\</span><span class="p">{</span><span class="mi">20048</span><span class="n">BB3</span><span class="o">-</span><span class="n">DB68</span><span class="o">-</span><span class="mi">11</span><span class="n">CF</span><span class="o">-</span><span class="mi">9</span><span class="n">CAF</span><span class="o">-</span><span class="mo">00</span><span class="n">AA006CB425</span><span class="p">}</span><span class="err">\</span><span class="n">Implemented</span> <span class="n">Categories</span><span class="p">]</span>
       
   <span class="p">[</span><span class="n">HKEY_CLASSES_ROOT</span><span class="err">\</span><span class="n">CLSID</span><span class="err">\</span><span class="p">{</span><span class="mi">20048</span><span class="n">BB3</span><span class="o">-</span><span class="n">DB68</span><span class="o">-</span><span class="mi">11</span><span class="n">CF</span><span class="o">-</span><span class="mi">9</span><span class="n">CAF</span><span class="o">-</span><span class="mo">00</span><span class="n">AA006CB425</span><span class="p">}</span><span class="err">\</span><span class="n">Implemented</span> <span class="n">Categories</span><span class="err">\</span><span class="p">{</span><span class="mi">7</span><span class="n">DD95801</span><span class="o">-</span><span class="mi">9882</span><span class="o">-</span><span class="mi">11</span><span class="n">CF</span><span class="o">-</span><span class="mf">9F</span><span class="n">A9</span><span class="o">-</span><span class="mo">00</span><span class="n">AA006C42C4</span><span class="p">}]</span>
       
   <span class="p">[</span><span class="n">HKEY_CLASSES_ROOT</span><span class="err">\</span><span class="n">CLSID</span><span class="err">\</span><span class="p">{</span><span class="mi">20048</span><span class="n">BB3</span><span class="o">-</span><span class="n">DB68</span><span class="o">-</span><span class="mi">11</span><span class="n">CF</span><span class="o">-</span><span class="mi">9</span><span class="n">CAF</span><span class="o">-</span><span class="mo">00</span><span class="n">AA006CB425</span><span class="p">}</span><span class="err">\</span><span class="n">Implemented</span> <span class="n">Categories</span><span class="err">\</span><span class="p">{</span><span class="mi">7</span><span class="n">DD95802</span><span class="o">-</span><span class="mi">9882</span><span class="o">-</span><span class="mi">11</span><span class="n">CF</span><span class="o">-</span><span class="mf">9F</span><span class="n">A9</span><span class="o">-</span><span class="mo">00</span><span class="n">AA006C42C4</span><span class="p">}]</span></code></pre></div>

<p>将以上代码拷贝到一个*.reg中去，保存后执行就可以将GUID为{20048BB3-DB68-11CF-9CAF-00AA006CB425}的控件类注册为安全控件。有时候注册表中不一定有那两个类别，因此我们还需要自己来描述这两个重要的类别： </p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">REGEDIT4</span>

<span class="p">[</span><span class="n">HKEY_CLASSES_ROOT</span><span class="err">\</span><span class="n">Component</span> <span class="n">Categories</span><span class="p">]</span>

<span class="p">[</span><span class="n">HKEY_CLASSES_ROOT</span><span class="err">\</span><span class="n">Component</span> <span class="n">Categories</span><span class="err">\</span><span class="p">{</span><span class="mi">7</span><span class="n">DD95801</span><span class="o">-</span><span class="mi">9882</span><span class="o">-</span><span class="mi">11</span><span class="n">CF</span><span class="o">-</span><span class="mf">9F</span><span class="n">A9</span><span class="o">-</span><span class="mo">00</span><span class="n">AA006C42C4</span><span class="p">}]</span>
<span class="s">&quot;409&quot;</span><span class="o">=</span><span class="s">&quot;Controls that are safely scriptable&quot;</span>

<span class="p">[</span><span class="n">HKEY_CLASSES_ROOT</span><span class="err">\</span><span class="n">Component</span> <span class="n">Categories</span><span class="err">\</span><span class="p">{</span><span class="mi">7</span><span class="n">DD95802</span><span class="o">-</span><span class="mi">9882</span><span class="o">-</span><span class="mi">11</span><span class="n">CF</span><span class="o">-</span><span class="mf">9F</span><span class="n">A9</span><span class="o">-</span><span class="mo">00</span><span class="n">AA006C42C4</span><span class="p">}]</span>
<span class="s">&quot;409&quot;</span><span class="o">=</span><span class="s">&quot;Controls safely initializable from persistent data&quot;</span></code></pre></div>

<p>同样，将以上代码拷贝到*.reg文件中执行后，就可以生成这两个类别。以后就可以使用这两个类别来注册安全控件了。注意：除非你没有别的办法，千万不要使用这个方法，也不要使用这个方法来标记实际上并不安全的控件为安全控件。</p>

<p>那么方法3和方法1和2有什么不同的呢？其实他们最大的不同就是方法1和2实际上都加入各种判断代码在修改注册表之前和之后，实际上也防止了不安全控件注册为安全控件的行为。因此除非万不得已，不要用方法3。就算是方法1和方法2，也要在确定自己控件足够安全的情况下才使用。</p>

<h3 id="section-8">3.4、另一个问题</h3>

<p>在施行了这些方法后，那个讨厌的对话框没了，但是对于window XP SP2及以上版本来说，用默认安全级别的IE打开任何包括了控件或者脚本的网页时，在运行代码前都会弹出一个这样的条框:</p>

<p><img src="/img/060510_2.jpg" alt="对话框" /></p>

<p><img src="/img/060510_3.jpg" alt="对话框" /></p>

<p><img src="/img/060510_4.jpg" alt="对话框" /></p>

<p>这也是为了不断提醒用户这样的操作可能会有安全上的危险，可是这样也会影响用户的操作，对于一个频繁访问的某一个页面来说，这个横条和对话框都是不易忍受的，如果你正在编写这样包括脚本和控件的页面，那么这里有一个窍门来解决这样的问题。请把下面这句加在网页文件源代码的&lt;html&gt;和&lt;head&gt;之间：</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="o">&lt;!--</span> <span class="n">saved</span> <span class="n">from</span> <span class="n">url</span><span class="o">=</span><span class="p">(</span><span class="mo">0017</span><span class="p">)</span><span class="nl">http</span><span class="p">:</span><span class="c1">//localhost/ --&gt;</span></code></pre></div>

<p>在你做网页时，如果网页需要运行ActiveX或脚本，并且他们位于客户端以外的地方，那么可以添加这个注释语句，IE当然不会不理他， IE会按照他指出的URL去找脚本的位置。 这句话的作用是让Internet Explorer 使用 Internet 区域的安全设置，而不是本地计算机区域的设置。其中0017代表后面网址的字符个数，后面的网址字符串要指向注册了这个组件或脚本的地方。如果是象上面那样，就表明是在自己的电脑上。把这句话删除，有些脚本就不执行了。</p>

<h3 id="section-9">3.5、什么是足够安全的控件</h3>

<p>我怎么知道我的控件是不是足够安全呢？请好好看看这一节。一旦标注出现在控件上而非网页上时，那些标注为安全的控件就一定要在所有可能的网页上是安全的。因此一个控件被标注为安全的就表示它能够保护自己并与网页制作者可能在初始化或脚本过程中做的不愉快的东西隔离。实际上很容易检验当被用于网页时一个控件是否安全的：当你标注你的控件为初始化安全时，相当于你在发誓无论用什么样的值来初始化你的控件，都不可能发生伤害用户的系统或者威胁到用户的安全；当你标注你的控件为脚本安全时，那就是说你有把握说无论控件的函数和属性如何被网页的脚本操作，控件本身都不会做出危及用户安全的行为。换句话说，它必须接受任何脚本中任何顺序的函数和/或属性调用而不会发生危险。　在设计控件过程中，下面是一些表明此控件是安全的条款：</p>

<blockquote>
  <ul>
    <li>不要操作用户的文件系统；</li>
    <li>不要操作注册表（除非是注册和注销它本身）；</li>
    <li>不要数组越界或其他的内存错误；</li>
    <li>验证（或更正）所有的输入，包括初始化，方法的参数和属性的Set函数；</li>
    <li>不要滥用与用户有关的活是用户提供的数据；</li>
    <li>做大量的测试。</li>
  </ul>
</blockquote>

<p>这份表还远没有结束，但这些至少都是必要的。还有一点很重要，就是千万不要把本来实际上不安全的控件注册为安全的，尽管这很诱人（比如说你没有控件的源代码）。无论控件做什么事情的，一旦控件被标注为安全的，那么所有的网页都会省略对这个控件的安全检测。到目前为止，还没有方法能把一个控件标注为仅对特定网页是安全的。标注不安全控件为安全空间的一个简单安全的选择就是写一个包含了不安全控件的新安全控件。只要确保新安全控件的初始化，方法和属性都是安全的就行了。 </p>

<h2 id="section-10">4、总结</h2>

<p>控件的安全问题可以通过各种各样的方法来巧妙的解决，但是对于一个负责的程序员来说，一定要确保控件本身是绝对安全的。一个欲发布的控件往往是要有用户使用的，如果本身不安全的控件被当成安全的控件流传出去，那就是恶意行为了。为了对用户负责，也为了对自己负责，程序员一定要再三检查自己的控件是否足够安全，而后再决定是否发布及以何种方式发布。</p>

  </div>
</article>


  <article>
  <h2>
    <a href="/news/2006/04/30/Universe-Think/">
      西山居士的宇宙模型遐想
    </a>
  </h2>
  <span class="post-category">
    <span class="label">
      博文
    </span>
  </span>
  <div class="post-meta">
    <span class="post-date">
      30 Apr 2006
    </span>
    <a href="https://github.com/AcePeak" class="post-author">
      <img src="https://github.com/AcePeak.png" class="avatar" alt="AcePeak" width="24" height="24">
      AcePeak
    </a>
  </div>
  <div class="post-content">
    <p>以前学习了物理中原子等知识的时候我就有这种想法了，后来不时又在这么想，现在有了blog那就放上来好了：</p>

<p>空间无限大,时间无限长。</p>

<p>太阳系由一颗太阳和九大行星组成，银河系由非常多太阳系这样的星系组成，而更远更大的星系团等由许多的银河系这样的星系组成。</p>

<p>生物由不同的细胞组成，这些细胞都很像，细胞里面又有很多结构，每个结构又由许多的分子等组成。</p>

<p>分子由原子组成，原子由原子核和电子组成，原子核又可逐渐往下细分。</p>

<p>根据量子物理学原理，质量越大时间越慢,质量越小时间越快。用我们的眼光看宇宙的运行速度(相对)，几乎每天晚上的星座方位变化不大；但是用我们的眼光看分子内电子等的运动，又觉得非常快,其轨迹甚至不明所以。</p>

<p>当我们有一天可以用10的20次方frames/sec的摄像机拍摄电子表面及其活动时，也许会惊奇的发现，真的是天下没有完全相同的物质，每个电子都不同，而且越看越觉得很熟悉，像极了现实中的星球。也许电子表面也在不停的变化，前后两桢显示的是不同的时代，也许也存在着昙花一现的生物。但是那一定只是一瞬间而且他们的力量不足以动摇整个原子。</p>

<p>换一个角度，我们，太阳系，银河系共同组成了更庞大物质的一个小部分，也许宇宙的膨胀与收缩只是那个物质的一呼吸间，一次“心跳”（如果它也会的话）。也许有一天那个物质被同一个维的智能生物使用我上面说的那种方法在观察我们的太阳系（对于他们，也许只是一个分子甚至更小），当然，他们的一秒相当于我们的非常长的时间，也许是10的10次，也许是10的20次，甚至更多。</p>

<p>不同的维度物质不能跨越自己的维度。我们如果要向高一维的物质发出信号，那么也许到地球毁灭的时候它才可以看到，太阳系毁灭的时候它才能知道这是信号，银河系毁灭的时候才能研究出来如何给我们发消息，它每说一个字，我们就要死掉100代。这也许只是个笑话，但是这也许可以很好的解释了其中的关系。</p>

<p>没错，一切都是时间搞的鬼。</p>

  </div>
</article>


  <article>
  <h2>
    <a href="/news/2005/12/20/Translation-Dialog-Change-Name/">
      【翻译】 对话：换个名字
    </a>
  </h2>
  <span class="post-category">
    <span class="label">
      desktop
    </span>
  </span>
  <div class="post-meta">
    <span class="post-date">
      20 Dec 2005
    </span>
    <a href="https://github.com/AcePeak" class="post-author">
      <img src="https://github.com/AcePeak.png" class="avatar" alt="AcePeak" width="24" height="24">
      AcePeak
    </a>
  </div>
  <div class="post-content">
    <p>仅仅挂起100公里的距离，小行星就迅速占满了我们的视线。它的表面看起来就像碎过又用冰粘起来的杯子。很多的冰河在交错的小山脊间静静的流淌。木卫二，荒凉而美丽的地方。</p>

<p>这时喇叭响起，“请大家登机，三号舱和七号舱。”然后又安静下来了。</p>

<p>Jeannine和我在一小群专家团同事们中挤到窗口附近，大概我们很多人正在像发呆的学生们一样看着整个世界。我们不在乎。当然在飞船里面的任何屏幕都可以更好的观察，但这里有些很特殊很原始的光线，那是从月亮直接反射到我们的眼睛里面的光线。</p>

<p>“一个可以观察的很好的地方，”Jeannine跃跃欲试，“他们仍然对谣言很谨慎。”</p>

<p>“还没开始‘谨慎’。Ganymede这么说，Ganymede又那么说。他们本已告诉我们真正的目的了。”</p>

<p>“是的。我确定我们不久会在冰层下面找出他们发现的东西。”</p>

<p>“嗯？恩。”我反应了一下。“我很高兴能成为这里的参观者。我从前就已经看到了这漂亮虚幻的一幕，这很好了已经，不，更好了。我们真的在这里了。这让我想起了我的第一个工作。”</p>

<p>她调皮的喷了口鼻息。“每件事情都会让你想起你的第一份工作。”</p>

<p>“所以我才年轻又敏感。总之，现在参观到这里的一番谈话又让我想起了它。”</p>

<p>“阿。”顿了顿，吊吊胃口，然后：“你的意思是？”</p>

<p>我笑了，继续讲述。。。</p>

<hr />

<p>我一直在与一个设计问题作斗争。我很想独立解决，因为我的试用期快结束了并且我想证明我自己。你也还记得你试用期之后的第一份工作，是吧？把事情做好是多么重要的事情？我亲眼看到其他的新员工没有通过试用期因为他们对付不了Guru。别误会，它是很出色的程序员，只不过有点古怪。现在她是我的老师，不为别的，就是因为我想向她证明我自己的能力。</p>

<p>我在一个类体系里需要一个新的虚函数，但是另一个组在维护它并且不会让别人改动它的。它看起来是这样的：</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">class</span> <span class="nc">Personnel</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
 <span class="k">virtual</span> <span class="kt">void</span> <span class="n">Pay</span> <span class="p">(</span><span class="cm">/**/</span> <span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
 <span class="k">virtual</span> <span class="kt">void</span> <span class="n">Promote</span><span class="p">(</span> <span class="cm">/**/</span> <span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
 <span class="k">virtual</span> <span class="kt">void</span> <span class="n">Accept</span> <span class="p">(</span> <span class="n">PersonnelV</span><span class="o">&amp;</span> <span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
 <span class="c1">// other functions </span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">Officer</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Personnel</span> <span class="p">{</span> <span class="cm">/* override virtuals */</span> <span class="p">};</span>
<span class="k">class</span> <span class="nc">Captain</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Officer</span> <span class="p">{</span> <span class="cm">/* override virtuals */</span> <span class="p">};</span>
<span class="k">class</span> <span class="nc">First</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Officer</span> <span class="p">{</span> <span class="cm">/* override virtuals */</span> <span class="p">};</span></code></pre></div>

<p>我需要一个函数，如果对象是船长，做一件事；如果是大副，就做另一件事。一个在Personnel或Officer声明在Captain和First里覆盖的虚函数本可以完成完成这件事的。</p>

<p>问题在于我不能增加一个函数。我知道我也能通过简单的增加使用RTTI的类型检测来完成工作，比如：</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="kt">void</span> <span class="nf">f</span><span class="p">(</span> <span class="n">Officer</span> <span class="o">&amp;</span><span class="n">o</span><span class="p">)</span>
<span class="p">{</span>
 <span class="k">if</span><span class="p">(</span> <span class="k">dynamic_cast</span><span class="o">&lt;</span><span class="n">Captain</span><span class="o">*&gt;</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">o</span><span class="p">)</span> <span class="p">)</span>
 <span class="cm">/* do one thing */</span>
 <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="k">dynamic_cast</span><span class="o">&lt;</span><span class="n">First</span><span class="o">*&gt;</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">o</span><span class="p">)</span> <span class="p">)</span>
 <span class="cm">/* do another thing */</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
 <span class="n">Captain</span> <span class="n">k</span><span class="p">;</span>
 <span class="n">First</span> <span class="n">s</span><span class="p">;</span>
 <span class="n">f</span><span class="p">(</span> <span class="n">k</span> <span class="p">);</span>
 <span class="n">f</span><span class="p">(</span> <span class="n">s</span> <span class="p">);</span>
<span class="p">}</span></code></pre></div>

<p>但是我知道在公司的代码标准里这样的类型检测是不允许的。“我不喜欢它，”我对自己说，“但是我想我这次必须要改变对它的看法了。显然没有其他方法了。”</p>

<p>“任何问题都可以通过增加一个中间层的方法来解决。”</p>

<p>我被身后Guru的声音吓了一跳。“什么？”我问道，转向了她。</p>

<p>“任何问。。。”</p>

<p>“是的，”我打断了她，忘了自己是谁了。“我听到你说的了，我只是不知道你从哪里来的。”我想这是我的掩饰。没人敢打断她的谈话。</p>

<p>“阿，但你知道的。”Guru斜着眼看着我，“你知道的，我的小学徒。”她注视了我一会，然后提高声音说，“孩子，C语言的弟子们会常用switch判断来控制对象类型的程序流。看看这个。”她拿起了一支涂写笔：</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="cm">/* A not-atypical C program */</span>
<span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="k">struct</span> <span class="n">someStruct</span> <span class="o">*</span><span class="n">s</span><span class="p">)</span>
<span class="p">{</span>
 <span class="k">switch</span><span class="p">(</span><span class="n">s</span><span class="o">-&gt;</span><span class="n">type</span><span class="p">)</span> <span class="p">{</span>
 <span class="k">case</span> <span class="nl">APPLE</span><span class="p">:</span>
  <span class="cm">/* do one thing */</span>
  <span class="k">break</span><span class="p">;</span>
 <span class="k">case</span> <span class="nl">ORANGE</span><span class="p">:</span>
  <span class="cm">/* do another thing */</span>
 <span class="cm">/*  etc.  */</span>
 <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<p>“当那些弟子们学习先知Stroustrup时，”她继续说，“在学习C++方面，他们必须学习如何设计好的类体系结构。”</p>

<p>“是的，”我又一次打断了她，急于显示我确实知道。“他们应该建立一个类结构体系来把Fruit作为积累，派生出Apple类和Orange类。那么‘do something’的代码会成为派生类的虚函数。”</p>

<p>“很好，孩子。C++的弟子们常常会用我刚刚讲的比喻来劝C的弟子们改变作风，他们指出switch状态检测是一种有错误倾向的需要常常维护的事情。但是，看看这个比喻的另一种方法：通过引入了一个虚函数，你增加了一个中间层。”她放下笔，“你需要的不就是一个新的虚函数吗？”
“阿，对。我知道，”我马上神气起来。“但我不能在这里那样做。”</p>

<p>她点了点头。“因为你不能修改类结构，对吧。”</p>

<p>这又使我恢复了平静，不过只是一瞬间。“哦，你知道了？我们不能改动它？原来你知道阿。”</p>

<p>“哦，是的。是我设计的这个结构。”</p>

<p>“哦。”这完全浇灭了我。</p>

<p>“这个结构必须非常稳定，因为有不多见的跨平台的依赖性。但是这样设计出来是让你增加虚函数来避免switch类型的代码的。你可以通过增加一个中间层来解决你的问题。在想象那个比喻。知道Personnel::Accept是什么吗？”</p>

<p>“唔，恩？”我含糊了声。</p>

<p>“这个类实现了一个未命名的模式（PNP）。也就是Visitor模式。”</p>

<p>“唔！”我说，现在有点明白了。“我已经看过Visitor了。但是那只是为允许对象之间可以迭代访问的机制。不是吗？”</p>

<p>她叹了口气，“这是流行的误解。想想那个V的意思，与其叫Visitor，不如叫Virtual，”她解释说。“这个PNP的最有用的应用就是允许增加虚函数到一个已存在的类结构里面，而不用改变现有的类结构。记得开始Personnel里面实现的那个Accept和它的子类吗？”她在下面的代码停了下来：</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="kt">void</span> <span class="n">Personnel</span><span class="o">::</span><span class="n">Accept</span><span class="p">(</span> <span class="n">PersonnelV</span><span class="o">&amp;</span> <span class="n">v</span> <span class="p">)</span>
<span class="p">{</span>
 <span class="n">v</span><span class="p">.</span><span class="n">Visit</span><span class="p">(</span> <span class="o">*</span><span class="k">this</span> <span class="p">);</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">Officer</span><span class="o">::</span><span class="n">Accept</span> <span class="p">(</span> <span class="n">PersonnelV</span><span class="o">&amp;</span> <span class="n">v</span> <span class="p">)</span>
<span class="p">{</span>
 <span class="n">v</span><span class="p">.</span><span class="n">Visit</span><span class="p">(</span> <span class="o">*</span><span class="k">this</span> <span class="p">);</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">Captain</span><span class="o">::</span><span class="n">Accept</span> <span class="p">(</span> <span class="n">PersonnelV</span><span class="o">&amp;</span> <span class="n">v</span> <span class="p">)</span>
<span class="p">{</span>
 <span class="n">v</span><span class="p">.</span><span class="n">Visit</span><span class="p">(</span> <span class="o">*</span><span class="k">this</span> <span class="p">);</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">First</span><span class="o">::</span><span class="n">Accept</span> <span class="p">(</span> <span class="n">PersonnelV</span><span class="o">&amp;</span> <span class="n">v</span> <span class="p">)</span>
<span class="p">{</span>
 <span class="n">v</span><span class="p">.</span><span class="n">Visit</span><span class="p">(</span> <span class="o">*</span><span class="k">this</span> <span class="p">);</span>
<span class="p">}</span></code></pre></div>

<p>“而且，”她继续说道，“Visitor的基类是这样的：”</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">class</span> <span class="nc">PersonnelV</span> <span class="cm">/*Visitor*/</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
 <span class="k">virtual</span> <span class="kt">void</span> <span class="n">Visit</span><span class="p">(</span> <span class="n">Personnel</span><span class="o">&amp;</span> <span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
 <span class="k">virtual</span> <span class="kt">void</span> <span class="n">Visit</span><span class="p">(</span> <span class="n">Officer</span><span class="o">&amp;</span> <span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
 <span class="k">virtual</span> <span class="kt">void</span> <span class="n">Visit</span><span class="p">(</span> <span class="n">Captain</span><span class="o">&amp;</span> <span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
 <span class="k">virtual</span> <span class="kt">void</span> <span class="n">Visit</span><span class="p">(</span> <span class="n">First</span><span class="o">&amp;</span> <span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p>“阿，”我说，我想起来了。“那么当我写了使用派生自Personnel的对象的代码时，我只要调用Personnel::Accept( myVisitorObject )，因为Accept是一个虚的myVisitorObject。Visit会被正确的继承类型来调用，重载机制会选择正确的函数。那就相当于增加了一个新的虚函数了，是吗？”</p>

<p>“确实，孩子。新增加的函数一般要用客户类的公有接口，但是怀着尊敬，它能并且在表现的像个虚函数而并不通过成员。我们所需要的就是原有的体系支持的借口Accept，就像是开放自己用于扩展。如果以后我们发现我们常常要通过新的子类来扩展访问到的Personnel体系，或者我们想更好的管理重新编译的依赖性，我们可以移植到非循环的Visitor（Acyclic Visitor）–在它们Accept函数重新声明前就不再需要改动Personnel和它的子类。”</p>

<p>我知道了。“ok，那么我可以这样做：”我快速的写下了：</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">class</span> <span class="nc">DoSomething</span> <span class="o">:</span> <span class="k">public</span> <span class="n">PersonnelV</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
 <span class="k">virtual</span> <span class="kt">void</span> <span class="n">Visit</span> <span class="p">(</span> <span class="n">Personnel</span><span class="o">&amp;</span> <span class="p">);</span>
 <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">Visit</span> <span class="p">(</span> <span class="n">Officer</span><span class="o">&amp;</span> <span class="p">);</span>
 <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">Visit</span> <span class="p">(</span> <span class="n">Captain</span><span class="o">&amp;</span> <span class="p">);</span>
 <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">Visit</span> <span class="p">(</span> <span class="n">First</span><span class="o">&amp;</span> <span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">DoSomething</span><span class="o">::</span><span class="n">Visit</span><span class="p">(</span> <span class="n">Captain</span><span class="o">&amp;</span> <span class="n">c</span> <span class="p">)</span>
<span class="p">{</span>
  <span class="k">if</span><span class="p">(</span> <span class="n">femaleGuestStarIsPresent</span> <span class="p">)</span>
    <span class="n">c</span><span class="p">.</span><span class="n">TurnOnCharm</span><span class="p">();</span>
  <span class="k">else</span>
    <span class="n">c</span><span class="p">.</span><span class="n">StartFight</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">DoSomething</span><span class="o">::</span><span class="n">Visit</span><span class="p">(</span> <span class="n">First</span><span class="o">&amp;</span> <span class="n">f</span> <span class="p">)</span>
<span class="p">{</span>
  <span class="n">f</span><span class="p">.</span><span class="n">RaiseEyebrowAtCaptainsBehavior</span><span class="p">();</span>
<span class="p">}</span></code></pre></div>

<p>Guru对我的代码很满意了。“你刚才说这样的代码是为什么系统工作的呢？”</p>

<p>“阿…一个模拟器？”</p>

<p>“我知道。继续，孩子，写出剩下的代码。”我又增加了下面的代码：</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="kt">void</span> <span class="nf">f</span><span class="p">(</span> <span class="n">Personnel</span><span class="o">&amp;</span> <span class="n">p</span> <span class="p">)</span>
<span class="p">{</span>
  <span class="n">p</span><span class="p">.</span><span class="n">Accept</span><span class="p">(</span> <span class="n">DoSomething</span><span class="p">()</span> <span class="p">);</span> <span class="c1">// like p.DoSomething()</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">Captain</span> <span class="n">k</span><span class="p">;</span>
  <span class="n">First</span> <span class="n">s</span><span class="p">;</span>

  <span class="n">f</span><span class="p">(</span> <span class="n">k</span> <span class="p">);</span>
  <span class="n">f</span><span class="p">(</span> <span class="n">s</span> <span class="p">);</span>
<span class="p">}</span></code></pre></div>

<p>Guru走回去了，又把她那独特的声音塞入我的耳朵。“确实，这个函数并不通过Personnel::域名字直接继承自原来的体系了。在这个例子里，换了另一个名字的函数仍然是虚的。”他笑了笑，悄悄地走了。她的话又飘了出来直到她走出我的视线：“Visitor模式换个名字会仍然有用，甚至会更合适的描述。但是世事难料啊。。。”</p>

<hr />

<p>宏伟的木星显得很庄严，甚至淡化了木卫二表面的美丽，当飞船旋转的时候，木星开始进入屏幕视角。</p>

<p>“我会申请一些表面合适的时间，”我决定。“多么适合散步的天空阿。甚至我只是一个参观者。”</p>

<p>“我们都是参观者，”Jeannine同意道。“但是我觉得，我们是第一个吗？”</p>

<p>随后片刻，我们都只是静静地观看。</p>

  </div>
</article>


  <article>
  <h2>
    <a href="/news/2005/11/28/Translation-Dialog-Touching-Pointers/">
      【翻译】 对话：接触指针
    </a>
  </h2>
  <span class="post-category">
    <span class="label">
      desktop
    </span>
  </span>
  <div class="post-meta">
    <span class="post-date">
      28 Nov 2005
    </span>
    <a href="https://github.com/AcePeak" class="post-author">
      <img src="https://github.com/AcePeak.png" class="avatar" alt="AcePeak" width="24" height="24">
      AcePeak
    </a>
  </div>
  <div class="post-content">
    <p>“哎呀！”</p>

<p>这是我一小时内第七次受挫了。显然Wendy很讨厌我这样。“看就看吧，朋友，安静一会行不行？”她的声音飘出了隔间。貌似比她先前的反应好些。</p>

<p>我正是在auto_ptrs这里摔跤了。在为Guru工作的前些天里，我已经了解了auto_ptrs的好处-以及他们并不很明显的缺陷。我已经被auto_ptrs的奇怪的所有权语义刺痛了。auto_ptr是用move操作来代替copy操作，想象一下：当你走近一台影印机，把材料放进进纸器，按下“Copy”按钮。几分钟之后，影印机给了你一份拷贝-然后把原文扔进了碎纸机。这正好和auto_ptr的拷贝和赋值做的一样。</p>

<p>总之，虽然我很聪明还有更多的经验，我仍然撞在了auto_ptr的各种限制上面。auto_ptr不能持有指向数组的指针， 我打算通过以下删除数组的方式来玩玩它：</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">auto_ptr</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">autoArray</span><span class="p">(</span><span class="k">new</span> <span class="n">T</span><span class="p">[</span><span class="mi">10</span><span class="p">]);</span>
<span class="c1">//...</span>
<span class="k">delete</span> <span class="p">[]</span> <span class="n">autoArray</span><span class="p">.</span><span class="n">release</span><span class="p">();</span></code></pre></div>

<p>但是我几乎马上抛弃了这个主意。甚至我可以看到这个“憎恶（abomination）（正如Guru说的）”的很多危害。全部的，恩，全部的auto_ptr的要点都是用于拥有和销毁内存的；要是手动处理就完全违背了其目的。</p>

<p>因此我决定使用vector来取代拥有一个array， 这将比我需要的更强大，因为我不需要vector的动态调整大小，但它却符合我的目的。我真正想要的是一个能自动持有指针和内存管理权的智能指针，来让我可以用来操作一个数组。</p>

<p>“使用Boost， Luke，”我听到了背后Guru的声音。</p>

<p>“不是“使用Force，Luke”吗？”我耸耸肩，“还有，不要叫我Luke。”</p>

<p>“Boost库将是一个强大的支持，”Guru继续她的完美表演。</p>

<p>虽然我今天不在状态，但我仍打断了她。“阿，我们今天能不能不要表演了？Bob在我们伦敦的办公室，没有实习医生可以处理反常者了。”</p>

<p>她来到我旁边，我看到她笑着耸了耸肩，“哦，我刚才觉得很无聊，”她叹了口气，“你检验过Boost库的智能指针了吗？”</p>

<p>“唔，好吧，”我犹豫了，“我还没机会看Boost库的细节。使用智能指针方法的都有什么？”</p>

<p>“总共有5种，”Guru坐下后说。“2个提供了简单指针所有权，2个共享所有权。”</p>

<p>“共享所有权？哦，就是说像一个引用技术类咯？”</p>

<p>“没错，智能指针是成对的，所以你有一个持有指向简单对象的指针的智能指针的时候，还有一个持有指向数组的指针。”她突然停住了，开始在白板上写下了：scoped_ptr, scoped_array, shared_ptr, shared_array。</p>

<p>“这只有4个；你不是说有5个吗？”我质问。</p>

<p>“还有一个是weak_ptr。它是shared_ptr的一个无所有权的观察者。我待会会说到这个。scoped_* 指针自动销毁超出作用区域的对象， 一种建议的用法就是实现出Pimpl-指向实现的，”她一口气说完，阻止了我另一次的双关语。</p>

<p>“那么。。。他们都像auto_ptr，对吗？”</p>

<p>“不全是。scoped_ptr和scoped_array是不可以拷贝的。”</p>

<p>“不可以拷贝？那么，如果我有一个作为类的成员-”我拿起笔说，开始在白板上涂写：</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">class</span> <span class="nc">T</span>
<span class="p">{</span>
<span class="n">scoped_ptr</span><span class="o">&lt;</span><span class="n">TImpl</span><span class="o">&gt;</span> <span class="n">p</span><span class="p">;</span>
<span class="p">...</span></code></pre></div>

<p>“-我如何实现拷贝和赋值呢？”</p>

<p>“就跟使用auto_ptr是一样，”Guru回答，然后她写了：</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">T</span><span class="p">(</span> <span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span><span class="o">:</span><span class="n">p</span><span class="p">(</span><span class="k">new</span> <span class="n">TImpl</span><span class="p">(</span><span class="o">*</span><span class="n">other</span><span class="p">.</span><span class="n">p</span><span class="p">))</span>
<span class="p">{</span>
<span class="p">}</span>
<span class="n">T</span> <span class="o">&amp;</span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">scoped_ptr</span><span class="o">&lt;</span><span class="n">TImpl</span><span class="o">&gt;</span> <span class="n">tmp</span><span class="p">(</span><span class="k">new</span> <span class="n">TImpl</span><span class="p">(</span><span class="o">*</span><span class="n">other</span><span class="p">.</span><span class="n">p</span><span class="p">));</span>
    <span class="n">p</span><span class="p">.</span><span class="n">swap</span><span class="p">(</span><span class="n">tmp</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>

<p>“好吧，”我一边消化这种用法一边懒洋洋的说，“那么，当我在用scoped_ptr时,我必须做和用auto_ptr一样的工作，是吗？那么为什么不直接用auto_ptr？”</p>

<p>“因为使用auto_ptr会为了自动生成的函数编译，这并不是在做坏的事情。使用scoped_ptr使它更难发生意外无意的拷贝语义，因为如果你用编译器生成的版本的话，编译器会拒绝编译这个类。 还有，scoped_ptr不能被用在一个不完整的类型上。”我有点不知所措的看向Guru。她叹了口气，“比如这样，”她边说边在白板上写：</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">class</span> <span class="nc">Simple</span><span class="p">;</span>
<span class="n">Simple</span><span class="o">*</span> <span class="nf">CreateSimple</span><span class="p">();</span>
<span class="kt">void</span> <span class="nf">f</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">auto_ptr</span><span class="o">&lt;</span><span class="n">Simple</span><span class="o">&gt;</span> <span class="n">autoS</span><span class="p">(</span><span class="n">CreateSimple</span><span class="p">());</span>
  <span class="n">scoped_ptr</span><span class="o">&lt;</span><span class="n">Simple</span><span class="o">&gt;</span> <span class="n">scopedS</span><span class="p">(</span><span class="n">CreateSimple</span><span class="p">());</span>
  <span class="c1">//...</span>
<span class="p">}</span></code></pre></div>

<p>“在这个函数里，Simple是一个不完整的类型。如果析构需要代价，那么通过auto_ptr或者scoped_ptr析构就会导致未定义的行为。当你实例化一个auto_ptr时，一些编译器会警告你，但不全是这样。另一面，scoped_ptr，如果实例化一个不完整的类型，在那之前就会产生一个编译错误。”</p>

<p>“哦，对，当然如此，”我插了进来，以表明我明白这点。“那么我们总可以使用scoped_ptr来取代auto_ptr,是不是？”</p>

<p>“对不起，错，”她说道，很失望。“auto_ptr仍然有自己的用处。跟auto_ptr不一样，scoped_ptr没有release()成员-也就是说它不能放弃指针的所有权。正因为如此，还因为scoped_ptr不能拷贝，当scoped_ptr出了范围的时候，它所管理的指针总会被删除。这是scoped_ptr不适合于那些你真正需要传递所有权的场合，比如工厂。</p>

<p>“使用scoped_ptr把你的意图发给其他程序员。它告诉他们：‘这个指针不应该在当前范围外被拷贝。’另一方面，auto_ptr授权可以在创建指针的范围外传播所有权，但是在所有权传播完成后，它仍然还可以控制指针。当然，这在写异常-安全(exception-safe)的代码时很重要。”</p>

<p>“阿，好吧，我知道了，”我咕哝着，“其他你提到的智能指针呢？”</p>

<p>“scoped_array就像一个scoped_ptr，只是它管理一个对象数组而不是一个简单对象。scoped_array提供了一些稍为不同的访问函数。它并没有*和-&gt;操作符，但是它有[]操作符。 我相信，”她总结说，“你需要的智能指针是一个scoped_array指针。”</p>

<p>“也许吧，”我回答，“但是我想在我决定之前我还想对这些shared_*智能指针多了解一些。”</p>

<p>“很好，我的学…徒，对不起，我失口了。”Guru羞涩的对我笑了笑。“是的，在决定之前对所有的选择都熟悉一下是一个好的工程实践（？）。”</p>

<p>“shared_*智能指针呢，”她指了指白板上的shared_ptr和shared_array，“是很强大的工具。他们是引用计数的指针，他们能区分拥有者和观察者。比如，使用下面这个类T：”</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="kt">void</span> <span class="nf">sharing</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">firstShared</span><span class="p">(</span><span class="k">new</span> <span class="n">T</span><span class="p">);</span>
  <span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">secondShared</span><span class="p">(</span><span class="n">firstShared</span><span class="p">);</span>
  <span class="c1">//...</span>
<span class="p">}</span></code></pre></div>

<p>“2个shared_ptr对象都指向相同的T对象。shared_ptr的使用计数现在是2。由于shared_ptr被引用计数了，对象在最后一个shared_ptr出了作用范围-引用计数降到0-才会销毁。</p>

<p>“shared_*指针非常有弹性，因此你可以使用他们来持有指向不完整类型的指针。”</p>

<p>“我记得你刚说这样不好？”</p>

<p>“如果不注意使用的话，这样确实并不好。但是只要你指定一个当持有的对象被销毁时候会调用的函数或者函数对象，shared_*指针就能用一个指向不完整类型的指针实例化出来。比如，如果我们修改了我们上面的小函数f：”</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="kt">void</span> <span class="nf">DestroySimple</span><span class="p">(</span><span class="n">Simple</span><span class="o">*</span><span class="p">);</span>
<span class="kt">void</span> <span class="nf">f</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Simple</span><span class="o">&gt;</span> <span class="n">sharedSFails</span><span class="p">(</span><span class="n">CreateSimple</span><span class="p">());</span>
  <span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Simple</span><span class="o">&gt;</span> <span class="n">sharedSSucceeds</span><span class="p">(</span><span class="n">CreateSimple</span><span class="p">(),</span> <span class="n">DestroySimple</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>

<p>“第一个shared_ptr失败了，因为Simple是一个不完整的类型。第二个成功了，因为你已经无二义的告诉shared_ptr如何销毁这个指针。</p>

<p>“因为shared_ 指针被设计用来拷贝的，他们都很适合用在标准容器中，包括关联容器。而且，在那些需要转换的仅有的情况下，还有特殊操作符定义出来，这些操作符创建一个新的shared_* 指针。 比如，如果我们在明显的公有继承体系中有类Base 和 Derived和一个无关联的类，我们可以这样：”</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="kt">void</span> <span class="nf">g</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Base</span><span class="o">&gt;</span> <span class="n">sharedBase</span><span class="p">(</span><span class="k">new</span> <span class="n">Derived</span><span class="p">);</span>
  <span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Derived</span><span class="o">&gt;</span> <span class="n">sharedDer</span> <span class="o">=</span> <span class="n">shared_dynamic_cast</span><span class="o">&lt;</span><span class="n">Derived</span><span class="o">&gt;</span><span class="p">(</span><span class="n">sharedBase</span><span class="p">);</span>
  <span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Unrelated</span><span class="o">&gt;</span> <span class="n">sharedDer</span> <span class="o">=</span> <span class="n">shared_dynamic_cast</span><span class="o">&lt;</span><span class="n">Unrelated</span><span class="o">&gt;</span><span class="p">(</span><span class="n">sharedBase</span><span class="p">);</span>
  <span class="n">try</span>
  <span class="p">{</span>
     <span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Unrelated</span><span class="o">&gt;</span> <span class="n">oops</span> <span class="o">=</span> <span class="n">shared_polymorphic_cast</span><span class="o">&lt;</span><span class="n">Unrelated</span><span class="o">&gt;</span><span class="p">(</span><span class="n">sharedBase</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">catch</span><span class="p">(</span><span class="n">bad_cast</span><span class="p">)</span>
  <span class="p">{</span>
     <span class="c1">//...</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<p>“还有一个shared_static_cast，是用在需要的极少的场合的，”Guru总结道。</p>

<p>我研究了这个函数一会。“好吧，我看看我是否能遵循这些。第一个shared_dynamic_cast执行针对智能指针的dynamic_cast并且返回一个新的智能指针。如果dynamic_cast失败了，引用计数将会怎样？”</p>

<p>Guru赞许的点点头。“那样的话，原始的计数将不受影响，新的shared_ptr将包含一个NULL指针。你也许能从try/catch子句推出来，shared_polymorphic_cast也会尝试对拥有的指针执行dynamic_cast。如果转换失败，就会抛出一个bad_cast异常。”</p>

<p>“喔，”我暗暗叫绝，“这才是那个类。看起来真是为此而设计的。”</p>

<p>“确实，”Guru也同意。“但是还有2件事要注意。引用计数很简单，但不能检测循环引用。还有，shared_ptr不能实现写方式的拷贝形式，因此如果要实现Pimpl，你必须多加小心。”</p>

<p>我对它捉摸了半天，发现我很喜欢它。“嘿，”我想起来什么，又说，“那么你提到的weak_ptr呢？”</p>

<p>“阿，是的。weak_ptr用于关联shared_ptr。weak_ptr是一个观察者，它并不影响共享对象的使用计数。weak_ptr的主要目的是用来允许shared_ptr参与到循环依赖中来-A持有B的引用，B同时也持有A的引用。我更喜欢把weak_ptr当作一个俱乐部中的关联成员-它没有投票权，但是可以参加俱乐部活动。”</p>

<p>“呒…”我想了一会。“因为weak_ptr没有影响使用计数，当weak_ptr在用一个共享对象，此时如果俱乐部解散-换句话说，最后一个shared_ptr出了范围-会发生什么事呢？”</p>

<p>“那样的话，weak_ptr管理的指针会被设置为NULL。讲到NULL，没有可以卸领（dereferencing）的操作符，比如*，-〉，[]，会在卸领之前检查一个NULL指针。因此，正如你所指出的在卸领之前原始指针非空，你还必须检查一个智能指针不为空。这个限制也适用于Boost库中所有的智能指针。”</p>

<p>“老大，有太多的材料要记了，”我说着，看着我自己潦草的白板。</p>

<p>“别担心，”Guru笑道，准备站起来走了。“我会发email给你Boost精简库的网址和一个小程序，它可以用来练习和示例各种指针。”当然，她对自己的话从不食言，几分钟后我收到了她的email。我揉了揉我的眼睛，因为我只看到：</p>

<p>“我的小学徒，这儿是那个Boost文章的地址：&lt;<a href="www.boost.org/libs/smart_ptr/smart_ptr.htm">www.boost.org/libs/smart_ptr/smart_ptr.htm</a>&gt;。看看它，再思考一下附件中关于谦虚的寓言。”</p>

  </div>
</article>


  <article>
  <h2>
    <a href="/news/2005/11/19/Translation-Dialog-Portable-Design/">
      【翻译】 对话：究竟谁才是可移植的程序员？
    </a>
  </h2>
  <span class="post-category">
    <span class="label">
      desktop
    </span>
  </span>
  <div class="post-meta">
    <span class="post-date">
      19 Nov 2005
    </span>
    <a href="https://github.com/AcePeak" class="post-author">
      <img src="https://github.com/AcePeak.png" class="avatar" alt="AcePeak" width="24" height="24">
      AcePeak
    </a>
  </div>
  <div class="post-content">
    <p>“嗨，小鬼。”Jeannine走过来坐在我对面，我现在很邋遢。“听说消息了吗？”</p>

<p>我扫了一眼时间确认一下，我并不打算再跟她聊半个小时以上。“嗨，二等公民。不，还不是。无论如何，他们仍在值班。你今天这么早就不值班了？”</p>

<p>“Brzenkowski睡不着，所以他跟我换班了。我欠了他一次。”</p>

<p>“他真体贴，”我又吃了一口午餐同意道，“我真的很喜欢他，他经常加班，而且并不会影响到其他人，他知道如何融入到这个环境中来。但愿我们在下个月的行星登陆（planetfall）以后还能与他一起工作。任何人都该如此专业。”</p>

<p>“大多数人都是的，”Jeannine笑了。“你自己也不赖阿。”</p>

<p>“实际上，”我咯咯笑了笑，“你让我想起了bob。你知道，我以前跟你提过他，他是我第一次工作遇到的另一个怪人。哥们，有时他做起事情来能让你把肺气炸。因此如果有人默不作声的工作，我们都叫他‘胡扯Bob’”</p>

<p>我继续讲述我的故事…</p>

<hr />

<p>一个声音在我耳边响起：“嘿，新来的，你破坏了结构。”</p>

<p>我暗暗叹了口气，然后闭上了我的眼睛。我做这份工作已经快2个月了，我早就开始讨厌Guru叫我‘我的学徒’，但也不及这个没用的程序员Bob这样叫我-尤其是“新来的”。我数到10，然后直直的回答：“Bob，你在说什么？”</p>

<p>“你的新代码check in了，”Bob温和地回复，吸了口他的拿铁咖啡（latté）。“我的编译器不能通过。它在抱怨一个迭代器已经定义过了。你破坏了结构，朋友。在头儿发现之前赶紧改掉把。”我缩了一下，我还不熟练，我知道破坏结构是很糟糕的事情。我甚至可以想象到Guru知道后的反应：记住，我的小学徒，团队合作的第二条戒律就是绝对不要破坏结构。</p>

<p>“好吧，”我又叹了口气，这次乖了。“你在说代码的哪个部分？”</p>

<p>Bob弯下身，打了几个键，弄出了下面的函数：</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="c1">//OBJMAP是一种标准容器的typedef</span>
<span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="n">OBJMAP</span> <span class="o">&amp;</span><span class="n">theMap</span><span class="p">)</span>
<span class="p">{</span>
 <span class="k">for</span><span class="p">(</span><span class="n">OBJMAP</span><span class="o">::</span><span class="n">iterator</span> <span class="n">iter</span> <span class="o">=</span> <span class="n">theMap</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
     <span class="n">iter</span> <span class="o">!=</span> <span class="n">theMap</span><span class="p">.</span><span class="n">end</span><span class="p">();</span>
     <span class="o">++</span><span class="n">iter</span><span class="p">)</span>
 <span class="p">{</span>
 <span class="c1">//do something</span>
 <span class="p">}</span>
 <span class="c1">//other code in here</span>
 <span class="k">for</span><span class="p">(</span><span class="n">OBJMAP</span><span class="o">::</span><span class="n">iterator</span> <span class="n">iter</span> <span class="o">=</span> <span class="n">theMap</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
     <span class="n">iter</span> <span class="o">!=</span> <span class="n">theMap</span><span class="p">.</span><span class="n">end</span><span class="p">();</span>
     <span class="o">++</span><span class="n">iter</span><span class="p">)</span>
 <span class="p">{</span>
 <span class="c1">//do something else</span>
 <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<p>“这里有错误吗？”我问道。“我在Stroustrup里把它check out了，迭代器应该在每一个循环结束时超出了范围。”</p>

<p>“是啊，是要这样的，但我的编译器不支持。”Bob回答说，剔着自己的牙齿。“它抱怨说iter已经定义了。很容易的更改吧，仅仅只是去掉iter的第二次定义。实际上，当我check in 它的时候，那就是我的代码起始如何读进去的。然后你的代码运行的时候破坏了结构。”</p>

<p>我终于明白了。由于我仍在在试用期，我不得不表现得很谦逊。“Bob，”我心有成竹，“这是必须在我们面对的所有平台上面编译的。我把第二个定义放上是因为我的编译器抱怨第二个迭代器没有定义，根据Stroustrup，他应该能工作。”</p>

<p>Bob似乎有些不耐烦。“我不在乎你的新编译器。我用我的很多年了，它从没有让我失望过。你的代码不能工作。”</p>

<p>“Bob，代码是正确的。在我这里编译没问题。”</p>

<p>“你的是个烂编译器。不是我的错，我在做我的工作，我不在乎别的编译器。”Bob又耸了耸肩，为自己辩护道。</p>

<p>一个响亮的声音在我们身后响起：“我感觉你有些害怕阿。”</p>

<p>我吓了一跳；Bob也好不到哪里，拿铁咖啡还在乱晃。Guru无声的在我们身后定住，手里还是拿着一本厚厚的书。</p>

<p>Guru慢慢的摇了摇头，皱了皱眉毛。“害怕导致愤怒。”她继续说道。</p>

<p>“哼，住口。我不担心别的编译器！”Bob激动的说，吸着溅落在他手上的奶咖啡。“我一点也不在乎它们。”</p>

<p>“愤怒导致仇恨。仇恨…导致苦难。”</p>

<p>“我是在受苦，没错，”我大气不敢喘，小声地嘀咕了声。“我只是想写出可移植的代码。-好吧，Bob，”我认输了，渴望摆脱掉他，“我会改掉它让它好好工作的，好吗？”</p>

<p>“就像我说的，新来的，去掉第二个声明就可以了。”他又看了看我，然后转过身走了。</p>

<p>Wendy靠着下一个隔间，看着他走了。“那么这次Bahb又在抱怨什么呢？”她问我。然后Guru靠近站了站，合上了她那本厚书，我给Wendy看了那段代码，解释了一下Bob要做的。“真是典型，”Wendy有点生气，“在实现一个可移植的方案和依赖于他的编译器的方案之间选择的话，他会毫不犹豫选择后者。就像你说的，他的代码不具有可移植性。你知道，这样的话，你就真的不需要在每个循环声明一个新的迭代器。只在第一个循环之前声明它们一次，它们就可以在两种编译器下都良好工作。”她快速改变了一下那段代码：</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="c1">// OBJMAP is a typedef for a standard container</span>
<span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="n">OBJMAP</span> <span class="o">&amp;</span><span class="n">theMap</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">OBJMAP</span><span class="o">::</span><span class="n">iterator</span> <span class="n">iter</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span> <span class="n">iter</span> <span class="o">=</span> <span class="n">theMap</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
         <span class="n">iter</span> <span class="o">!=</span> <span class="n">theMap</span><span class="p">.</span><span class="n">end</span><span class="p">();</span>
         <span class="o">++</span><span class="n">iter</span> <span class="p">)</span> <span class="p">{</span>
        <span class="c1">// do something</span>
    <span class="p">}</span>
    <span class="c1">// other code in here</span>
    <span class="k">for</span><span class="p">(</span> <span class="n">iter</span> <span class="o">=</span> <span class="n">theMap</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
         <span class="n">iter</span> <span class="o">!=</span> <span class="n">theMap</span><span class="p">.</span><span class="n">end</span><span class="p">();</span>
         <span class="o">++</span><span class="n">iter</span> <span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something else</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<p>Guru检查了一下自己的书写，扫了一眼这个方案。“非常聪明，孩子。”Wendy轻挑眉梢：她常常这样。“而且如你所说，这不是惟一的方案。另一个优雅的可能是干脆避免迭代器的声明，也许提高了可读性，通过在可能的地方使用for_each和模板表达式。我的学徒。”Guru继续对我说，“但是了解，理解和遵守神圣标准是很重要的，了解你的工具甚至那些不正常的也很重要。Bob在使用的那个编译器不服从for初始化变量的范围。他不在乎可移植的代码，只在乎自己的编译器。”</p>

<p>“嗯…”我说，摸了摸自己的下巴。“写可移植的代码比我想的要困难，所以，在我们可以利用我原先的代码前，不得不等着Bob的编译器出新的版本了。”</p>

<p>Guru注视着自己前方好一会。“我不是先知，我看不到未来。虽然如此，我还是能看到：可移植的发布绝对不会消失。编译器不都是遵守标准的-只是在级别上保持一致罢了。一些开发商甚至已经在他们的编译器里摒弃了过时的行为，而并不是一味迎合旧代码。</p>

<p>“而且，一些编译器会产生出新的特性来扩展标准。有一些是很好的，还有一些会使语言趋于陈腐，没有弹性，最终会亡于停步不前。只适应一个平台的程序可能从新特性中获益。在可移植代码中使用那些非标准的特性有时是灾难性的-有些见习生，比如你，可能不注意他们的不可移植性而滥用它们。不要只钟爱于某一个编译器而害怕其他的。害怕就要导致不能移植。”</p>

<p>她停了一下，然后转身走了。随着她的离开，她绵绵的声线飘入我们的耳朵，“但愿我能记起那位圣人的名字，他曾经说过，‘理论和实践的区别总是在实践中更明显…’”</p>

<hr />

<p>“Bob并不是一个融入大局的家伙，”我总结道。</p>

<p>“在Ganymede号上没有人是这样的，”Jeannine也同意。“这并不是一个可以原谅的地方。嘿，你得走了。Anderson在等你。”</p>

<p>我看了看时间站了起来。“职责呼叫。在第三次调查后你和Laura在做什么？”我问，因为我发现了那儿，当然，还有比谈论Bob更舒适的事情，比如Guru…</p>

  </div>
</article>



      </div>

      <div class="unit one-fifth hide-on-mobiles">
  <aside>
    <ul>
      <li class=""> <a href="/news/">所有博文</a> </li>
    </ul>
    
    <h4>博文索引</h4>
    <ul>
      
      <li class=""> <a href="/news/2015/01/07/Jekyll-Date/">GithubPages+Jekyll模板中各类型对象的方法介绍</a> </li>
      <br/>
      
      <li class=""> <a href="/news/2015/01/02/Advertise-Mobile-Platform-Market/">2014年移动广告平台界投融资整理</a> </li>
      <br/>
      
      <li class=""> <a href="/news/2014/12/28/Advertise-glossary/">广告平台术语</a> </li>
      <br/>
      
      <li class=""> <a href="/news/2014/12/23/PubNative-Publish/">PubNative发布世界上首个满足专业需求的“原生广告适配器”</a> </li>
      <br/>
      
      <li class=""> <a href="/news/2014/12/17/Mac+GithubPages+Jekyll-site/">Mac+GithubPages+Jekyll配置个人网站</a> </li>
      <br/>
      
      <li class=""> <a href="/news/2009/03/15/Productivity-And-Production-Relations/">生产力VS生产关系</a> </li>
      <br/>
      
      <li class=""> <a href="/news/2009/03/13/Joke-Music-Strings/">这把伞是你的吗？</a> </li>
      <br/>
      
      <li class=""> <a href="/news/2009/03/13/Joke-Is-This-Your-Umbrella/">这把伞是你的吗？</a> </li>
      <br/>
      
      <li class=""> <a href="/news/2009/02/27/About-Career/">好文分享－不错的短文《所谓职业》</a> </li>
      <br/>
      
      <li class=""> <a href="/news/2009/02/19/Joke-Maybe-Cow-Sick/">可能会有口蹄疫</a> </li>
      <br/>
      
      <li class=""> <a href="/news/2009/02/17/Joke-No-Matters-Neither-Him/">没事，他也没有</a> </li>
      <br/>
      
      <li class=""> <a href="/news/2009/02/14/Houseman-Lovers-Day/">情人节的绝活亮相！</a> </li>
      <br/>
      
      <li class=""> <a href="/news/2009/02/08/Introducing-WM-Softwares/">推荐的WM手机软件</a> </li>
      <br/>
      
      <li class=""> <a href="/news/2009/02/02/Letter-To-Losing-Boy/">回复失恋男的来信</a> </li>
      <br/>
      
      <li class=""> <a href="/news/2009/01/18/Yesterday-Today-Tomorrow/">Feedback for <The Sixth Sense>/《第六感》影评</a> </li>
      <br/>
      
      <li class=""> <a href="/news/2009/01/12/2008-Hot-Words/">08年流行语文</a> </li>
      <br/>
      
      <li class=""> <a href="/news/2009/01/10/Life-tricks/">你一定能用上的生活小绝招～</a> </li>
      <br/>
      
      <li class=""> <a href="/news/2009/01/03/Movie-Feedback-The-Sixth-Sense/">Feedback for <The Sixth Sense>/《第六感》影评</a> </li>
      <br/>
      
      <li class=""> <a href="/news/2009/01/01/Joke-Japanese-Cannot-Find/">日本鬼子来了也找不到！</a> </li>
      <br/>
      
      <li class=""> <a href="/news/2008/12/28/About-Destiny/">关于投资的谈话</a> </li>
      <br/>
      
      <li class=""> <a href="/news/2008/12/21/About-Investment/">关于投资的谈话</a> </li>
      <br/>
      
      <li class=""> <a href="/news/2006/05/19/CPP-Test-English/">C++ STL 习题</a> </li>
      <br/>
      
      <li class=""> <a href="/news/2006/05/17/Template-Test-English/">C++ Template 习题</a> </li>
      <br/>
      
      <li class=""> <a href="/news/2006/05/10/ActiveX-Safety/">剖析ActiveX控件安全问题</a> </li>
      <br/>
      
      <li class=""> <a href="/news/2006/04/30/Universe-Think/">西山居士的宇宙模型遐想</a> </li>
      <br/>
      
      <li class=""> <a href="/news/2005/12/20/Translation-Dialog-Change-Name/">【翻译】 对话：换个名字</a> </li>
      <br/>
      
      <li class=""> <a href="/news/2005/11/28/Translation-Dialog-Touching-Pointers/">【翻译】 对话：接触指针</a> </li>
      <br/>
      
      <li class=""> <a href="/news/2005/11/19/Translation-Dialog-Portable-Design/">【翻译】 对话：究竟谁才是可移植的程序员？</a> </li>
      <br/>
      
    </ul>
    
    <h4>分类索引</h4>
    <ul>
    
    <li class="category_list_item"><a href="\cat.html">desktop</a> (6) </li>
      
    <li class="category_list_item"><a href="\cat.html">博文</a> (17) </li>
      
    <li class="category_list_item"><a href="\cat.html">internet</a> (2) </li>
      
    <li class="category_list_item"><a href="\cat.html">广告平台</a> (3) </li>
      
    </ul>
    
    <h4>标签云</h4>
    <ul>
    
    <li class="category_list_item"><a href="\tags.html">原生</a> (22) </li>
      
    <li class="category_list_item"><a href="\tags.html">C++</a> (6) </li>
      
    <li class="category_list_item"><a href="\tags.html">OOP</a> (2) </li>
      
    <li class="category_list_item"><a href="\tags.html">boost</a> (1) </li>
      
    <li class="category_list_item"><a href="\tags.html">Design Pattern</a> (1) </li>
      
    <li class="category_list_item"><a href="\tags.html">宇宙</a> (1) </li>
      
    <li class="category_list_item"><a href="\tags.html">遐想</a> (1) </li>
      
    <li class="category_list_item"><a href="\tags.html">ActiveX</a> (1) </li>
      
    <li class="category_list_item"><a href="\tags.html">Safety</a> (1) </li>
      
    <li class="category_list_item"><a href="\tags.html">Template</a> (1) </li>
      
    <li class="category_list_item"><a href="\tags.html">试题</a> (2) </li>
      
    <li class="category_list_item"><a href="\tags.html">STL</a> (1) </li>
      
    <li class="category_list_item"><a href="\tags.html">Mac</a> (1) </li>
      
    <li class="category_list_item"><a href="\tags.html">Github</a> (1) </li>
      
    <li class="category_list_item"><a href="\tags.html">Jekyll</a> (2) </li>
      
    <li class="category_list_item"><a href="\tags.html">WebSite</a> (1) </li>
      
    <li class="category_list_item"><a href="\tags.html">市场</a> (3) </li>
      
    <li class="category_list_item"><a href="\tags.html">术语</a> (1) </li>
      
    <li class="category_list_item"><a href="\tags.html">Liquid</a> (1) </li>
      
    </ul>
    </aside>
</div>


      <div class="clear"></div>

    </div>
  </section>


  <footer>
  <div class="grid">
    <div class="unit one-third center-on-mobiles">
    	<p>
        巍巍乎志在高山
        <br/>
        洋洋乎志在流水
        </p>
    </div>
    <div class="unit two-thirds align-right center-on-mobiles">
      <p>
        <a href="https://github.com">
          <img src="/img/footer-logo.png" width="100" height="30" alt="GitHub • Social coding">
        </a>
      </p>
    </div>
  </div>
</footer>

  <script>
  var anchorForId = function (id) {
    var anchor = document.createElement("a");
    anchor.className = "header-link";
    anchor.href      = "#" + id;
    anchor.innerHTML = "<i class=\"fa fa-link\"></i>";
    return anchor;
  };

  var linkifyAnchors = function (level, containingElement) {
    var headers = containingElement.getElementsByTagName("h" + level);
    for (var h = 0; h < headers.length; h++) {
      var header = headers[h];

      if (typeof header.id !== "undefined" && header.id !== "") {
        header.appendChild(anchorForId(header.id));
      }
    }
  };

  document.onreadystatechange = function () {
    if (this.readyState === "complete") {
      var contentBlock = document.getElementsByClassName("docs")[0] || document.getElementsByClassName("news")[0];
      if (!contentBlock) {
        return;
      }
      for (var level = 1; level <= 6; level++) {
        linkifyAnchors(level, contentBlock);
      }
    }
  };
</script>

  




	<script type="text/javascript">
		var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1253874436'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s11.cnzz.com/z_stat.php%3Fid%3D1253874436' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <style>
		#cnzz_stat_icon_1253874436 { display:none;}
	</style>



<!-- JiaThis Button BEGIN -->
<script type="text/javascript">
	var jiathis_config = {data_track_clickback:'true'};
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jiathis_r.js?move=0&amp;uid=1253874436" charset="utf-8">
</script>
<style>
	.jiathis_style table { background:transparent; }
</style>
<!-- JiaThis Button END -->



</body>
</html>
